"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3116],{23098:function(e,t,r){r.d(t,{$P:function(){return v},Vq:function(){return N},Z0:function(){return j},mo:function(){return y},nR:function(){return w}});var n=r(66557),s=r(27218),i=r(6385),a=r(87033),l=r(10228),o=r(7653),d=r(41270),c=r(95899),u=r(92676),h=r(32559),x=r(35548),f=r(95586);let m={hardLimit:1e5},p={default:{max:m,raven:m,pro:m,free:m}},g=d.z.object({hardLimit:d.z.number().optional(),tokensPerImage:d.z.number().optional()}),b=d.z.object({free:g.optional(),pro:g.optional(),raven:g.optional(),max:g.optional()}),v=d.z.record(b.optional()),j=()=>{let{data:e,isLoading:t}=(0,h.O3)(),r=(0,f.H)();return{projects:e,isLoading:t,createProjectsDisabled:void 0!==r&&void 0!==e&&e.length>=r}},y=()=>{var e,t,r,n,i,l,o,d,c,u;let h=(0,s.Cf)(),x=(0,s.ZJ)(),f=(0,s.ue)(),m=(0,a.Zr)("console_default_model","model",null,a.rO),g=(0,a.xQ)("hatch_token_limits",p,v),b=null!==(e=g[null!=m?m:"default"])&&void 0!==e?e:null;return b||(b=null!==(t=g.default)&&void 0!==t?t:{}),Math.round(.9*(f?null!==(n=null==b?void 0:null===(r=b.max)||void 0===r?void 0:r.hardLimit)&&void 0!==n?n:19e4:h?null!==(l=null==b?void 0:null===(i=b.raven)||void 0===i?void 0:i.hardLimit)&&void 0!==l?l:19e4:x?null!==(d=null==b?void 0:null===(o=b.pro)||void 0===o?void 0:o.hardLimit)&&void 0!==d?d:19e4:null!==(u=null==b?void 0:null===(c=b.free)||void 0===c?void 0:c.hardLimit)&&void 0!==u?u:25e3))-4e3},w=e=>{let{data:t}=(0,c.Kf)(e),{data:r}=(0,u.yg)(e,!0),{data:s}=(0,c.pK)(e),d=null==s?void 0:s.filter(e=>"document"===e.file_kind),h=(0,o.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d.reduce((e,t)=>e+(0,x.ZJ)(t),0))&&void 0!==e?e:0},[d]),f=null==s?void 0:s.filter(e=>"image"===e.file_kind),m=(0,o.useMemo)(()=>{var e;return null!==(e=null==f?void 0:f.reduce((e,t)=>e+(0,x.Rv)(t),0))&&void 0!==e?e:0},[f]),p=(0,o.useMemo)(()=>(t||[]).map(e=>e.content).join(" "),[t]),g=(0,n.c)(p)+h+m,b=(0,o.useMemo)(()=>{var e,t;let n=null==r?void 0:r.filter(e=>e.type===l.Fg.GITHUB),s=null==r?void 0:r.filter(e=>e.type!==l.Fg.GITHUB),a=null!==(e=null==n?void 0:n.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==e?e:0,o=null!==(t=null==s?void 0:s.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==t?t:0;return Math.floor(a/i.dS+o/i.r6)},[r]),{value:v}=(0,a.FL)("claude_ai_project_bananagrams");return v?0:void 0!==t?void 0!==r?g+b:g:void 0!==r?b:void 0},N=e=>{let{mutate:t}=(0,h.dY)(e),{data:r}=(0,h.Yc)(e);return()=>{t({is_starred:!(null==r?void 0:r.is_starred)})}}},6688:function(e,t,r){r.d(t,{G:function(){return h},k:function(){return x}});var n=r(27573),s=r(27218),i=r(32737),a=r(11510),l=r(40950),o=r(45790),d=r(32559),c=r(53545);let u=e=>{let{intl:t}=e;return(0,n.jsx)(i.u,{tooltipContent:t.formatMessage({defaultMessage:"Claude will guide your learning process instead of just giving answers. You can adjust these instructions in the project anytime.",id:"X9ioIsDrqe"}),side:"right",align:"end",children:(0,n.jsx)(a.k,{size:16,className:"shrink-0"})})},h=(e,t)=>{let r=(0,s.Cf)(),i=(0,l.Z)(),a=(0,c.DU)();e=null!=e?e:null==a?void 0:a.type,t=null!=t?t:null==a?void 0:a.subtype;let h={};return r&&(h.createProjectTitle=i.formatMessage({defaultMessage:"Create a project",id:"HR5A+UPiIu"})),e===d.cd.Student&&(t===d.nL.Study&&(h.createProjectTitle=i.formatMessage({defaultMessage:"Create a study project",id:"aM+8eAE0xv"}),h.createProjectNameLabel=(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,n.jsx)(o.Z,{defaultMessage:"What course are you studying?",id:"v36OurBGgA"}),(0,n.jsx)(u,{intl:i})]}),h.createProjectDescriptionDefault=i.formatMessage({defaultMessage:"A project for studying your course materials, where Claude helps visualize key concepts, build comprehensive study guides, and tutor you according to your learning needs.",id:"KXxo+Xoski"})),t===d.nL.Career&&(h.createProjectTitle=i.formatMessage({defaultMessage:"Create a career project",id:"so02zrH0dG"}),h.createProjectNameLabel=i.formatMessage({defaultMessage:"What are you working towards?",id:"lqTAz2gpwu"}),h.createProjectDescriptionDefault=i.formatMessage({defaultMessage:"A project for exploring career opportunities, where Claude helps match your skills to potential careers, improve your resume, and develop personalized roadmaps for professional growth.",id:"JlrkubQL9D"})),t===d.nL.Research&&(h.createProjectTitle=i.formatMessage({defaultMessage:"Create a research project",id:"L9PkdSYTu+"}),h.createProjectNameLabel=i.formatMessage({defaultMessage:"What are you researching?",id:"gsRiHcI+J7"}),h.createProjectDescriptionDefault=i.formatMessage({defaultMessage:"A project for developing academic research, where Claude helps identify key themes in your research, create structured outlines, and provide feedback to improve your drafts.",id:"WI7ROAQaAW"}))),h},x=e=>{let t=(0,l.Z)();if(!e)return{};let r=e.type,n=e.subtype,s={};return r===d.cd.Student&&(s.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Reference materials",id:"IAK8rLiiAO"}),s.projectNoChatsMessage=t.formatMessage({defaultMessage:"Start a chat to keep conversations organized and re-use reference materials.",id:"ShAr8vcP2v"}),s.projectNoKnowledgeCantAddMessage=t.formatMessage({defaultMessage:"No reference materials added yet.",id:"2Gz7oaDTj0"}),s.projectKnowledgeDragDropMessage=t.formatMessage({defaultMessage:"Drop files here to add to reference materials",id:"hNUGHHYeEK"}),n===d.nL.Study&&(s.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop course materials like syllabi, lecture notes, or text-book excerpts so Claude can help you learn.",id:"hlIot3aXce"})),n===d.nL.Career&&(s.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop career materials like your resume, cover letters, or job descriptions to help Claude provide personalized professional advice.",id:"LXnjolwaEB"})),n===d.nL.Research&&(s.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop research materials like draft papers, source notes, or literature reviews to help Claude provide targeted academic guidance.",id:"c5oBAmpUAc"}))),s}},18409:function(e,t,r){r.d(t,{c:function(){return c},e:function(){return u}});var n=r(71817),s=r(6766),i=r(27218),a=r(87033),l=r(23098);let o={raven:{hardLimit:19e4,output:16384},pro:{hardLimit:19e4,output:8192},max:{hardLimit:19e4,output:16384},free:{hardLimit:30500,output:8192}},d={default:o},c=e=>{var t,r,n,s;let c=(0,i.Cf)(),u=(0,i.ZJ)(),h=(0,i.ue)(),x=(0,a.xQ)("hatch_token_limits",d,l.$P),f=null!==(n=null!==(r=x[e])&&void 0!==r?r:x.default)&&void 0!==n?n:o;return null!==(s=null==f?void 0:null===(t=f[c?"raven":u?"pro":h?"max":"free"])||void 0===t?void 0:t.hardLimit)&&void 0!==s?s:30500},u=(e,t)=>{let r=(0,n.wN)(e),{stickyModelPreference:i}=(0,s.M)();return c(e?r:t||i||r)}},35548:function(e,t,r){r.d(t,{Rv:function(){return a},ZJ:function(){return i},ZW:function(){return d},hn:function(){return l},y1:function(){return o}});var n=r(66557);r(87033);var s=r(7653);let i=e=>2e3*e.document_asset.page_count,a=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),l=e=>e.reduce((e,t)=>e+a(t),0),o=(e,t,r)=>{let i=(0,n.c)(e),a=(0,s.useMemo)(()=>r.map(e=>e.extracted_content).join(" "),[r]);return i+(0,n.c)(a)+l(t)},d=(e,t)=>e/t>.4},57393:function(e,t,r){r.d(t,{e:function(){return d}});var n=r(27573),s=r(32737),i=r(88146),a=r(7653),l=r(45790),o=r(23098);let d=e=>{let t,{children:r,enabledWrapperStyles:d="",disabledWrapperStyles:c=""}=e,{createProjectsDisabled:u}=(0,o.Z0)();return t=u?c:d,(0,n.jsx)(s.u,{tooltipContent:u?(0,n.jsx)(l.Z,{defaultMessage:"You have reached the maximum number of projects. <upgradeLink>Upgrade</upgradeLink> for more.",id:"8XKCSUNy79",values:{upgradeLink:e=>(0,n.jsx)(i.default,{href:"/upgrade",className:"underline",children:e})}}):null,side:"bottom",children:(0,n.jsx)("div",{className:t,children:a.cloneElement(r,{disabled:u})})})}},53545:function(e,t,r){r.d(t,{Nv:function(){return C},DU:function(){return w}});var n=r(27573),s=r(3053),i=r(27218),a=r(87033),l=r(81695),o=r(45790),d=r(41270),c=r(32559),u=r(10607),h=r(50294);r(7653);var x=r(57393);let f=e=>{let{icon:t,title:r,description:s,onClick:i,variant:a,disabled:l=!1}=e;return(0,n.jsxs)("button",{className:(0,u.Z)("flex p-4 w-full items-center h-full","projects"===a?"flex-row-reverse sm:flex-col sm:items-start lg:flex-row-reverse lg:items-center":"flex-row sm:flex-col sm:items-start"),onClick:i,disabled:l,children:[(0,n.jsx)("div",{className:(0,u.Z)("relative mb-1","projects"===a?"lg:mb-0 lg:ml-2":"mr-2"),children:(0,n.jsx)(h.default,{src:t,height:50,width:50,alt:"",style:{opacity:l?"50%":"100%"}})}),(0,n.jsxs)("div",{className:"flex flex-col items-start w-full h-full",children:[(0,n.jsx)("h3",{className:(0,u.Z)("text-md font-medium text-text-200 text-left",l&&"text-text-500"),children:r}),(0,n.jsx)("p",{className:(0,u.Z)("text-sm text-text-200 text-left",l&&"text-text-500"),children:s})]})]})},m=e=>{let{variant:t="home",...r}=e;return(0,n.jsx)("div",{className:(0,u.Z)("w-full","projects"===t?"sm:w-48 sm:grow lg:w-52":"sm:w-48 lg:w-52"),children:(0,n.jsx)(x.e,{enabledWrapperStyles:"from-bg-100 to-bg-100/30 border-0.5 border-border-300 hover:from-bg-000/70 hover:to-bg-000/50 hover:border-border-300/30 text-text-200 hover:text-text-100 relative flex cursor-pointer flex-col gap-1.5 rounded-xl bg-gradient-to-b transition-all ease-in-out hover:shadow-sm active:scale-[0.995] md:gap-2 overflow-hidden h-full",disabledWrapperStyles:"border-0.5 border-border-300 text-text-200 relative flex cursor-pointer flex-col gap-1.5 rounded-xl md:gap-2 overflow-hidden h-full",children:(0,n.jsx)(f,{...r,variant:t})})})},p=d.z.object({type:d.z.nativeEnum(c.cd),subtype:d.z.nativeEnum(c.nL),icon_type:d.z.string(),custom_instructions:d.z.string()}),g=e=>{switch(e){case"edu_lightbulb":return"/images/illustrations/edu/edu-lightbulb.svg";case"edu_paper_and_quill":return"/images/illustrations/edu/edu-paper-and-quill.svg";case"edu_paper_and_magnifying_glass":return"/images/illustrations/edu/edu-paper-and-magnifying-glass.svg";default:return""}},b=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,n.jsx)(o.Z,{defaultMessage:"Study project",id:"SDlohOAVzo"});case c.nL.Career:return(0,n.jsx)(o.Z,{defaultMessage:"Career project",id:"MsM+7biLzH"});case c.nL.Research:return(0,n.jsx)(o.Z,{defaultMessage:"Research project",id:"OR/ar3drnQ"})}},v=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,n.jsx)(o.Z,{defaultMessage:"Learn and master any subject",id:"3vYdF/hF/f"});case c.nL.Career:return(0,n.jsx)(o.Z,{defaultMessage:"Find the next step for your career",id:"v6qrZ8g/Vy"});case c.nL.Research:return(0,n.jsx)(o.Z,{defaultMessage:"Analyze and organize research",id:"R19a/TH47z"})}},j=e=>e.map(e=>({id:"".concat(e.type,"-").concat(e.subtype),type:e.type,subtype:e.subtype,icon:g(e.icon_type),title:b(e.type,e.subtype),description:v(e.type,e.subtype),customInstructions:e.custom_instructions})),y=e=>e?(0,n.jsx)(o.Z,{defaultMessage:"Set up Claude for your classes, career, and research",id:"aU/3NrmiTd"}):"",w=()=>{let e=(0,l.useSearchParams)().get("projectStarter"),t=k();return e?t.options.find(t=>t.id===e):void 0},N=d.z.array(p),_=[],k=()=>{let e=(0,i.Zd)(),t=(0,a.Zr)("claude_ai_experience","project_templates",_,N);return{sectionTitle:y(e),options:j(t)}},C=e=>{let{variant:t="home"}=e,r=(0,l.useRouter)(),i=(0,s.z$)(),a=k();if(a.options.length)return(0,n.jsxs)("div",{className:"w-full mb-6",children:[(0,n.jsx)("h2",{className:"text-sm text-text-200 font-medium leading-6 ml-1",children:a.sectionTitle}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-3 justify-center items-stretch",children:a.options.map(e=>(0,n.jsx)(m,{variant:t,icon:e.icon,title:e.title,description:e.description,onClick:()=>{i.track({event_key:"claudeai.projects.project_starter.clicked",project_type:e.type,project_subtype:e.subtype,path:window.location.pathname}),r.push("/projects/create?projectStarter="+e.id)}},e.id))})]})}},31860:function(e,t,r){r.d(t,{$:function(){return i}});var n=r(27573),s=r(10571);function i(e){let{title:t,url:r,isLoading:i,isError:a,isLink:l=!1,defaultErrorTitle:o,defaultDocumentTitle:d}=e,c=(0,n.jsx)("p",{children:d});return(a?c=(0,n.jsx)("p",{children:o}):!i||t||d?t&&(c=(0,n.jsx)("p",{children:t})):c=(0,n.jsx)(s.g,{className:"opacity-25 rounded-md",height:18}),l&&r)?(0,n.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:c}):c}},71101:function(e,t,r){r.d(t,{C:function(){return l}});var n=r(27573),s=r(2949),i=r(84344),a=r(31860);function l(e){let{uri:t,isError:r,isLink:l=!1}=e,{data:o,isLoading:d}=(0,s.Mv)({documentId:t}),c=(0,i.m)(t);return(0,n.jsx)(a.$,{title:null==o?void 0:o.title,url:c,isLoading:d,isError:r,isLink:l,defaultErrorTitle:"Google Docs"})}},8628:function(e,t,r){r.d(t,{g:function(){return P},o:function(){return V}});var n=r(27573),s=r(8571),i=r(32006),a=r(70354),l=r(60949),o=r(11607),d=r(32737),c=r(30947),u=r(6385);let h=e=>new Intl.NumberFormat().format(e);var x=r(10228),f=r(10484),m=r(35807),p=r(96346),g=r(34174),b=r(13140),v=r(39992),j=r(80151),y=r(67578),w=r(30070),N=r(76203),_=r(6092),k=r(16058),C=r(10607),M=r(8927),z=r(68425),S=r(87590),E=r.n(S),Z=r(88146),L=r(7653),F=r(45790),I=r(40950),D=r(89111),A=r(34326);let R="lastSelectedRepo";function G(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function P(e){var t,r;let{initialConfig:s,tokenLimit:i,alreadyUsedTokens:a,onSubmit:l,isSubmitting:o}=e,[d,c]=(0,L.useState)("/"),h=void 0===s,x=i*u.dS,[f,m]=(0,L.useState)(()=>{if(s)return s;let e=function(){let e=localStorage.getItem(R);if(e){var t;let r=JSON.parse(e);if(r&&"object"==typeof(t=r)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return r}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:p,repo:g,branch:b,filters:v}=f;(0,L.useEffect)(()=>{c("/")},[g]);let j=e=>{m({owner:p,repo:g,branch:b,filters:{filters:e}})},y=(0,L.useMemo)(()=>!E()(null==s?void 0:s.filters,v),[s,v]),{data:w,isFetching:N,error:_}=(0,D.Y$)({owner:p,repo:g,branch:b}),k=(0,L.useMemo)(()=>(function(e,t){if(!t||!e)return[];let r=[];for(let n of t.tree)"blob"===n.type&&(0,A.VG)(e,"/"+n.path)&&r.push(n);return r})(null==v?void 0:v.filters,w.tree),[null==v?void 0:v.filters,w.tree]),C=Math.ceil(100*k.map(e=>e.size).reduce((e,t)=>e+t,0)/x)+Math.ceil(100*a/i),M=(0,L.useMemo)(()=>w.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let r of e.tree){let e=r.path.split("/"),n=e.pop(),s=t;for(let t=0;t<e.length;t++){let n=e[t];if(!s.children.has(n)){let r="/"+e.slice(0,t+1).join("/");s.children.set(n,G(n,r))}"blob"===r.type&&(s.size+=r.size),s=s.children.get(n)}"blob"===r.type?(s.children.set(n,{name:n,path:"/"+r.path,size:r.size}),s.size+=r.size):s.children.set(n,G(n,"/"+r.path))}return t}(w.tree):null,[w.tree]);(0,L.useEffect)(()=>{(null==w?void 0:w.repo)&&(null==w?void 0:w.repo.default_branch)&&!b&&m(e=>({...e,branch:w.repo.default_branch}))},[null==w?void 0:w.repo,b,m]),(0,L.useEffect)(()=>{if(p&&g&&b){var e;e={owner:p,repo:g,branch:b},localStorage.setItem(R,JSON.stringify(e))}},[p,g,b]);let[z,S]=(0,L.useState)("");return(0,n.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,n.jsx)(B,{isCreating:h,config:f,setConfig:m,searchQuery:z,setSearchQuery:S,isSubmitting:o,percentUsed:C,onSubmit:l,areFiltersDirty:y}),N?(0,n.jsx)(O,{}):null!==_?(0,n.jsx)(U,{error:_}):g&&p&&b?z?(0,n.jsx)(q,{rootNode:M,searchQuery:z,filters:null!==(t=null==v?void 0:v.filters)&&void 0!==t?t:{},setFilters:j,sizeLimit:x,setCurrentDirectory:c,setSearchQuery:S}):(0,n.jsx)(V,{repo:g,rootNode:M,filters:null!==(r=null==v?void 0:v.filters)&&void 0!==r?r:{},setFilters:j,sizeLimit:x,currentDirectory:d,setCurrentDirectory:c}):(0,n.jsx)(T,{}),(0,n.jsx)(K,{percentUsed:C,selectedPaths:k,alreadyUsedTokens:a,tokenLimit:i})]})}function T(){return(0,n.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,n.jsx)(F.Z,{defaultMessage:"Select a repository or paste a URL above to get started",id:"aGsfPG9sTD"})})}let O=()=>(0,n.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,n.jsx)("div",{children:(0,n.jsx)(o.Loading,{size:"sm"})}),(0,n.jsx)(F.Z,{defaultMessage:"Fetching repository...",id:"hnjVW1oRt2"})]});function U(e){let{error:t}=e,{githubAppUrl:r}=(0,s.m)(),i="".concat(r,"/installations/select_target"),a=t instanceof c.Hx&&404===t.statusCode,l=t instanceof c.Hx&&"github_get_tree_api_call_limit_exceeded"===t.errorCode;return(0,n.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,n.jsx)("div",{className:"flex items-center gap-2 m-6",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Q,{size:16}),(0,n.jsx)("span",{children:(0,n.jsx)(F.Z,{defaultMessage:"Claude cannot access that resource. If you know that it exists, you may first need to grant or request access <link>here</link>.",id:"41xNOZpKM8",values:{link:e=>(0,n.jsx)(Z.default,{href:i,target:"_blank",className:"underline",children:e})}})})]}):l?(0,n.jsx)("span",{className:"text-danger-000",children:(0,n.jsx)(F.Z,{defaultMessage:"Please try a smaller repo.",id:"lvImCTHUvN"})}):(0,n.jsx)("span",{className:"text-danger-000",children:(0,n.jsx)(F.Z,{defaultMessage:"An error occurred while fetching that resource. Please try again.",id:"u8OHhkIcYv"})})})})}function B(e){var t,r;let{config:s,setConfig:l,isCreating:o,isSubmitting:d,percentUsed:c,searchQuery:u,setSearchQuery:h,onSubmit:f,areFiltersDirty:p}=e,[g,b]=(0,L.useState)(!1),[v,j]=(0,L.useState)(!1);return(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 text-sm font-styrene border-b-0.5 border-border-300",children:[(0,n.jsx)(i.j0,{size:18,type:x.Fg.GITHUB,className:"flex-shrink-0"}),!g&&(0,n.jsx)(H,{config:s,setConfig:l,isCreating:o}),(0,n.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,n.jsx)(W,{isCreating:o,isExpanded:g,setIsExpanded:b,setConfig:l,className:(0,C.Z)({"flex-1 flex-shrink":o&&g})}),s.repo&&!g&&(0,n.jsx)(Y,{isExpanded:v,setIsExpanded:j,searchQuery:u,setSearchQuery:h,className:"flex-1 flex-shrink"})]}),(0,n.jsx)(M.M,{children:!g&&s.repo&&!(0,A.xb)(null!==(r=null===(t=s.filters)||void 0===t?void 0:t.filters)&&void 0!==r?r:{})&&(o||p)&&(0,n.jsx)(z.E.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,n.jsx)(a.z,{disabled:d||c>100||!s.owner||!s.repo||!s.branch,onClick:()=>f(s),children:d?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.U,{className:"animate-spin"})}):o?(0,n.jsx)(F.Z,{defaultMessage:"Add files",id:"xrAjmQ72mN"}):(0,n.jsx)(F.Z,{defaultMessage:"Update",id:"BWpuKlRSA1"})})})})]})}function H(e){let{config:t,setConfig:r,isCreating:s,className:i}=e,{data:a=[]}=(0,D.Mr)(),l=a.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!l.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&l.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[o,d]=(0,L.useState)(void 0);return(0,L.useEffect)(()=>{t.owner&&t.repo&&t.branch?d(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):d(void 0)},[t]),(0,n.jsx)("div",{className:i,children:(0,n.jsxs)(k.fC,{value:o,onValueChange:e=>{r({...JSON.parse(e),filters:{filters:{}}}),d(e)},disabled:!s,children:[(0,n.jsxs)(k.xz,{className:(0,C.Z)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":s,"bg-bg-100":!s}),children:[(0,n.jsx)(k.B4,{placeholder:"Select a repository"}),s&&(0,n.jsx)(k.JO,{className:"pl-1",children:(0,n.jsx)(p.p,{})})]}),(0,n.jsx)(k.h_,{children:(0,n.jsx)(k.VY,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-dropdown mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,n.jsx)(k.l_,{className:"overflow-auto",children:l.map((e,t)=>(0,n.jsx)(k.ck,{value:JSON.stringify(e),className:(0,C.Z)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,n.jsx)(k.eT,{children:(0,n.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"text-text-300",children:e.owner}),"\xa0",(0,n.jsx)("span",{className:"text-text-500/50",children:"/"}),"\xa0",(0,n.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!s||s&&"master"!==e.branch&&"main"!==e.branch)&&(0,n.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,n.jsx)(g.S,{}),e.branch]})]})})},t))})})})]})})}function W(e){let{isCreating:t,isExpanded:r,setIsExpanded:s,setConfig:i,className:l}=e,o=(0,I.Z)(),[c,u]=(0,L.useState)(""),h=()=>{let{owner:e,repo:t,branch:r}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,r,n,s,...i]=t.pathname.split("/");return{owner:r,repo:n,location:s,branch:i.join("/").replace(/\/$/,"")}}(c);i({owner:e,repo:t,branch:r,filters:{filters:{}}}),s(!1),u("")};return t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,C.Z)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":r},l),children:[(0,n.jsx)(d.u,{tooltipContent:"Paste GitHub URL",children:!r&&(0,n.jsx)(a.z,{onClick:()=>s(!r),size:"icon_sm",variant:"ghost",disabled:r,children:(0,n.jsx)(b.a,{size:16})})}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:c,onChange:e=>u(e.target.value),placeholder:o.formatMessage({defaultMessage:"Paste GitHub URL",id:"RobpzbjbFb"}),autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&h()}}),c&&(0,n.jsx)(M.M,{children:(0,n.jsx)(z.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,n.jsx)(a.z,{onClick:h,size:"icon_xs",children:(0,n.jsx)(v.U,{})})})})]})]}),r&&(0,n.jsx)(a.z,{onClick:()=>{s(!1),u("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,n.jsx)(j.X,{})})]})}function Y(e){let{isExpanded:t,setIsExpanded:r,searchQuery:s,setSearchQuery:i,className:l}=e,o=(0,I.Z)();return(0,n.jsxs)("div",{className:(0,C.Z)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},l),children:[(0,n.jsx)(d.u,{tooltipContent:"Search files",children:(0,n.jsx)(a.z,{onClick:()=>r(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,n.jsx)(y.Y,{size:"16"})})}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",placeholder:o.formatMessage({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:s,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>i(e.target.value),autoFocus:!0}),(0,n.jsx)(a.z,{onClick:()=>{i(""),r(!1)},size:"icon_xs",variant:"ghost",children:(0,n.jsx)(j.X,{})})]})]})}function V(e){let{repo:t,rootNode:r,filters:s,setFilters:i,sizeLimit:a,currentDirectory:o,setCurrentDirectory:d}=e,c=function(e,t){let r=t.split("/").slice(1,-1),n=e;for(let e of r){if(!n.children)return null;n=n.children.get(e)}return n}(r,o),u=(null==c?void 0:c.children)?[...c.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],h=(0,L.useMemo)(()=>{let e=[],r=o;for(;r;){let n=r.slice(r.lastIndexOf("/",r.length-2)).slice(1,-1);e.unshift({name:n||t,path:r}),r=(0,A.Il)(r)}return e},[t,o]),x=c?X(c,s)?"partial":(0,A.VG)(s,c.path)?"checked":"unchecked":"unchecked";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[c&&(0,n.jsx)(l.g,{checkState:x,onClick:e=>{let{didCheck:t}=e;t?i((0,A.Yw)(s,c.path)):i((0,A.F8)(s,c.path))}}),(0,n.jsx)("div",{className:"flex-row gap-1 ",children:h.map((e,t)=>{let{path:r,name:s}=e;return h.length===t+1?(0,n.jsx)("span",{children:s},t):(0,n.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,n.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>d(r),children:s}),t<h.length-1&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})})]},t)})})]},"breadcrumbs")}),(0,n.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:u.map(e=>(0,n.jsx)(J,{node:e,showPath:!1,filters:s,sizeLimit:a,onUpdateFilters:i,onClick:e.children?()=>d(e.path):void 0},e.path))},"rows")]})}function q(e){let{rootNode:t,searchQuery:r,filters:s,setFilters:i,sizeLimit:a,setCurrentDirectory:l,setSearchQuery:o}=e,d=(0,L.useMemo)(()=>{let e=[],n=[t],s=r.toLowerCase();for(;n.length>0&&e.length<50;){let t=n.pop();t.children&&n.push(...t.children.values()),t.path.toLowerCase().includes(s)&&e.push(t)}return e},[r,t]);return(0,n.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:d.slice(0,100).map(e=>(0,n.jsx)(J,{node:e,showPath:!0,filters:s,sizeLimit:a,onUpdateFilters:i,onClick:e.children?()=>{l(e.path),o("")}:void 0,onNavigate:e=>{l(e),o("")}},e.path))},"rows")}function K(e){let{percentUsed:t,selectedPaths:r,alreadyUsedTokens:s,tokenLimit:i}=e,{progressBarPercentPrimary:a,progressBarPercentSecondary:l}=(0,L.useMemo)(()=>{let e=Math.min(100,Math.ceil(100*s/i));return{progressBarPercentPrimary:Math.min(100,t-e),progressBarPercentSecondary:e}},[t,s,i]),o=(0,n.jsx)(F.Z,{defaultMessage:"{percentUsed}% of capacity used",id:"1VbFlPsYRL",values:{percentUsed:Q(t)}});return(0,n.jsxs)("div",{className:(0,C.Z)("flex text-xs items-center justify-between border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":t>=100},{"text-text-300":t<100}),children:[r.length&&t<100?(0,n.jsx)("p",{children:(0,n.jsx)(F.Z,{defaultMessage:"{selected, plural, one {# file} other {# files}} selected",id:"F7Bwhc8GRB",values:{selected:r.length}})}):t<100?(0,n.jsx)("p",{children:(0,n.jsx)(F.Z,{defaultMessage:"Select files to add to chat context",id:"t6XeSPdQqI"})}):(0,n.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,n.jsx)(w.v,{className:"opacity-80",size:14}),(0,n.jsx)("p",{children:(0,n.jsx)(F.Z,{defaultMessage:"Remove some files to stay within size limits",id:"k+ns1o6klw"})})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)($,{totalPercent:t,secondaryPercent:l}),(0,n.jsx)("span",{className:"min-w-10 text-right",children:l>0?(0,n.jsx)(d.u,{tooltipContent:"".concat(Q(l),"% used by other knowledge + ").concat(Q(a),"% by this content"),children:(0,n.jsx)("span",{children:o})}):o})]})]})}function X(e,t){if(void 0===e.children)return!1;if((0,A.VG)(t,e.path)){for(let r of e.children.values())if(!(0,A.VG)(t,r.path)||X(r,t))return!0}else for(let r of e.children.values())if((0,A.VG)(t,r.path)||X(r,t))return!0;return!1}function J(e){let{node:t,showPath:r,filters:s,sizeLimit:i,onUpdateFilters:a,onClick:o,onNavigate:d}=e,c=void 0!==t.children,u=(0,A.VG)(s,t.path),h=X(t,s);return(0,n.jsxs)("div",{onClick:o,className:(0,C.Z)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":o}),children:[(0,n.jsx)(l.g,{checkState:h?"partial":u?"checked":"unchecked",onClick:e=>{let{didCheck:r}=e;r?a((0,A.Yw)(s,t.path)):a((0,A.F8)(s,t.path))}}),void 0===t.children?(0,n.jsx)(N.$,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,n.jsx)(_.g,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,n.jsx)("div",{className:(0,C.Z)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":c}),onClick:e=>{c&&o&&(e.stopPropagation(),o())},children:r?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,n.jsx)("span",{children:t.map((e,r)=>{let s="/"+t.slice(0,r+1).join("/")+"/",i=r===t.length-1,a=!i&&d?e=>{e.stopPropagation(),d(s)}:void 0;return(0,n.jsxs)("span",{children:[(0,n.jsx)(i?"span":"button",{className:(0,C.Z)(i?"text-text-000":"text-text-400",a?"hover:text-text-100 transition":""),onClick:a,children:e}),!i&&(0,n.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},r)})})})(t.path):t.name}),i&&(0,n.jsxs)("span",{className:"w-1/6 text-text-400 text-xs text-right",children:[Q(100*t.size/i),"%"]})]})}function Q(e){return 0===e?"0":e<1?"<1":h(Math.ceil(e))}function $(e){let{totalPercent:t,secondaryPercent:r=0}=e,s=t>=100,i=t-r;return(0,n.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 rounded-full overflow-hidden relative",children:(0,n.jsxs)("div",{className:"absolute inset-0",children:[r>0?(0,n.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(0,r)),"%")},className:"absolute inset-y-0 left-0 bg-border-400"}):null,i>0?(0,n.jsx)("div",{style:{width:"".concat(Math.min(100-(r||0),Math.max(i>0?4:0,i)),"%"),left:"".concat(r||0,"%")},className:(0,C.Z)("absolute inset-y-0 transition-all",{"bg-danger-100":s,"bg-text-100":!s})}):null]})})}},31275:function(e,t,r){r.d(t,{U:function(){return x}});var n=r(27573),s=r(52939),i=r(6385),a=r(10228),l=r(7653),o=r(66605),d=r(92676),c=r(23098),u=r(18409),h=r(8628);function x(e){let{isOpen:t,onClose:r,onCreated:x,projectUuid:f,location:m,syncSource:p,setIsUploadingGithubSync:g}=e,b=(0,c.mo)(),v=(0,u.e)(null),j="project"===m&&f?b:v,y=(0,c.nR)(f),w=(0,l.useMemo)(()=>{if(f&&void 0!==y){var e;return Math.max(0,y-((null==p?void 0:null===(e=p.status)||void 0===e?void 0:e.current_size_bytes)?p.type===a.Fg.GITHUB?p.status.current_size_bytes/i.dS:p.status.current_size_bytes/i.r6:0))}return 0},[f,y,p]),N=(0,l.useCallback)(e=>{null==x||x(e)},[x]),{mutate:_,isPending:k}=(0,d.gr)(f,{onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:C,isPending:M}=(0,d.l2)(f,{onSuccess:r}),{mutate:z,isPending:S}=(0,o.cE)({onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:E,isPending:Z}=(0,o.P9)({onSuccess:r}),L=(0,l.useCallback)(e=>{p?("project"===m&&f?C:E)({sync_source_uuid:p.uuid,sync_source_config:e}):(null==g||g(!0),r(),("project"===m&&f?_:z)({sync_source_type:a.Fg.GITHUB,sync_source_config:e}))},[p,m,f,_,C,z,E,r,g]);return(0,n.jsx)(s.u_,{isOpen:t,onClose:r,title:"Add content from GitHub",subtitle:"Select the files you would like to add to this ".concat(f?"project":"chat"),modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,children:(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(h.g,{initialConfig:null==p?void 0:p.config,tokenLimit:j,alreadyUsedTokens:w,isSubmitting:k||M||S||Z,onSubmit:L})})})}},90824:function(e,t,r){r.d(t,{dF:function(){return b},n4:function(){return _}});var n=r(27573),s=r(91887),i=r(67677),a=r(32006),l=r(13890),o=r(10228),d=r(7653),c=r(40950),u=r(2949),h=r(74339),x=r(85465),f=r(31275),m=r(84344);let p=e=>{let t=(0,c.Z)(),r={[o.co.UNAUTHENTICATED]:t.formatMessage({defaultMessage:"Authentication needed",id:"AYP3OHxyGn"}),[o.co.ACCESS_DENIED]:t.formatMessage({defaultMessage:"Content not accessible",id:"IPK01iLM7n"}),[o.co.DISABLED]:t.formatMessage({defaultMessage:"Feature disabled by organization",id:"0mkp6rxalw"})};return e in r?r[e]:void 0},g=e=>{var t;let{syncSourceType:r,syncStatus:i,title:a,url:d,handleClick:c,isLoading:u,actions:h,isSyncing:f,...m}=e,g=(0,l.ir)(i),b=p(i),v=(0,x.lP)(),y={};return y=i===o.co.UNAUTHENTICATED?{handleClick:()=>{v(r)}}:c?{handleClick:c}:{url:d},(0,n.jsx)(s.vQ,{actions:h,title:null!==(t=null!=b?b:a)&&void 0!==t?t:"Untitled",tag:(0,n.jsx)(j,{type:r}),isError:g,isLoading:u,isSyncing:f,...y,...m})},b=e=>{let{syncSourceType:t,syncStatus:r,url:s,...a}=e,d=(0,l.ir)(r),c=p(r),u=(0,x.lP)(),h={};return(h=r===o.co.UNAUTHENTICATED?{handleClick:()=>{u(t)}}:{url:s},d)?(0,n.jsx)(i.s,{...a,...h,isError:!0,title:c,subtitles:void 0,tag:void 0}):(0,n.jsx)(i.s,{...a,...h})},v={[o.Fg.GDRIVE]:"DOC",[o.Fg.OUTLINE]:"DOC",[o.Fg.GITHUB]:"GITHUB",[o.Fg.SALESFORCE]:"SALESFORCE",[o.Fg.GMAIL]:"EMAIL",[o.Fg.GCAL]:"CALENDAR",[o.Fg.SLACK]:"SLACK",[o.Fg.ASANA]:"ASANA"},j=e=>{let{type:t}=e;return(0,n.jsxs)(s.l1,{children:[(0,n.jsx)(a.j0,{type:t,size:12,variant:t===o.Fg.GDRIVE?a.cT.DOCS:void 0}),(0,n.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:v[t]})]})},y=e=>{let{projectUuid:t,syncSource:r,location:s,actions:i,isSyncing:a,...o}=e,[c,u]=(0,d.useState)(!1),{owner:h,repo:x}=r.config,m="".concat(h,"/").concat(x),p=r.config.branch,b=!(0,l.ir)(r.status.state),v=o.isEditable&&b,j=v||o.isInSelectionMode;return(0,n.jsxs)(n.Fragment,{children:[v&&(0,n.jsx)(f.U,{projectUuid:t,location:s,isOpen:c,onClose:()=>u(!1),syncSource:r}),(0,n.jsx)(g,{...o,syncSourceType:r.type,syncStatus:r.status.state,title:m,subtitle:p,handleClick:j?()=>{if(o.isInSelectionMode){var e;null===(e=o.handleSelect)||void 0===e||e.call(o,!0,!1)}u(!0)}:void 0,actions:i,isSyncing:a})]})},w=e=>{let{syncSource:t,actions:r,isSyncing:s,...i}=e,a=(0,m.m)(t.config.uri),{title:l,isLoading:o}=(0,u.Xv)({uri:t.config.uri}),d=i.isInSelectionMode?()=>{var e;null===(e=i.handleSelect)||void 0===e||e.call(i,!0,!1)}:void 0;return(0,n.jsx)(g,{handleClick:d,...i,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:i.isLoading||o,actions:r,isSyncing:s})},N=e=>{let{syncSource:t,actions:r,isSyncing:s,...i}=e,a=(0,m.v)(t.config.outline_uri),{title:l,isLoading:o}=(0,h.Zf)({uri:t.config.outline_uri}),d=i.isInSelectionMode?()=>{var e;null===(e=i.handleSelect)||void 0===e||e.call(i,!0,!1)}:void 0;return(0,n.jsx)(g,{handleClick:d,...i,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:i.isLoading||o,actions:r,isSyncing:s})},_=e=>{let{projectUuid:t,syncSource:r,isEditable:i=!1,location:a,actions:l,isSyncing:d,...c}=e;return(null==r?void 0:r.type)?r.type===o.Fg.GITHUB?(0,n.jsx)(y,{...c,projectUuid:t,syncSource:r,isEditable:i,location:a,actions:l,isSyncing:d}):r.type===o.Fg.GDRIVE?(0,n.jsx)(w,{...c,syncSource:r,isEditable:i,actions:l,isSyncing:d}):r.type===o.Fg.OUTLINE?(0,n.jsx)(N,{...c,syncSource:r,isEditable:i,actions:l,isSyncing:d}):void 0:(0,n.jsx)(s.fz,{})}},34326:function(e,t,r){function n(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let r=t;for(;null!==r;){let t=e[r];if("include"===t)return!0;if("exclude"===t)break;r=l(r)}return!1}function s(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return n(e=a(e,t),t)&&(e={...e,[t]:"exclude"}),e}function i(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return n(e=a(e,t),t)||(e={...e,[t]:"include"}),e}function a(e,t){let r={...e};for(let n of Object.keys(e))(t.endsWith("/")&&t===n||n.startsWith(t))&&delete r[n];return r}function l(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}function o(e){return 0===Object.keys(e).length}r.d(t,{F8:function(){return s},Il:function(){return l},VG:function(){return n},Yw:function(){return i},xb:function(){return o}})},70712:function(e,t,r){r.d(t,{g:function(){return a},k:function(){return l}});let n=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,s=/document\/d\/([a-zA-Z0-9-_]+)/i,i=/(docs\.google\.com)|(drive\.google\.com)/i;function a(e){if(!e)return null;try{let t=new URL(e),r=!!t.toString().match(n),i=t.pathname.match(s);if(r&&i&&i[1])return i[1]}catch(e){}return null}function l(e){if(!e)return!1;try{return!!new URL(e).toString().match(i)}catch(e){}return!1}},56767:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(30947);function s(e){let t="Unable to add Google Doc.";return e instanceof n.Hx&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},84344:function(e,t,r){r.d(t,{m:function(){return n},v:function(){return s}});let n=e=>"https://docs.google.com/document/d/".concat(e),s=e=>"https://outline.ant.dev/doc/".concat(e)},16282:function(e,t,r){r.d(t,{K3:function(){return E},PJ:function(){return L},TF:function(){return A},Xz:function(){return T},a9:function(){return G},ek:function(){return P},kD:function(){return O},mB:function(){return C},tK:function(){return k}});var n=r(27573),s=r(5161),i=r(96070),a=r(32737),l=r(84464),o=r(53949),d=r(30070),c=r(16963),u=r(11510),h=r(80151),x=r(48326),f=r(84773),m=r(10607),p=r(68425),g=r(7653),b=r(40950),v=r(45790),j=r(23529),y=r(26047),w=r(53186),N=r(32846),_=r(91887);let k=(0,g.forwardRef)((e,t)=>{let{size:r,onRemoveFile:s,isInteractive:i=!0,children:a,testId:l,className:o}=e;return(0,n.jsx)(p.E.div,{ref:t,"data-testid":l,className:(0,m.Z)("group/thumbnail relative inline-block p-0.5",i&&"cursor-pointer","auto"===r&&"h-full w-full",o),layout:"xxs"!==r&&"xs"!==r&&"lg"!==r&&"mdlg"!==r,...!!s&&M,children:a})});k.displayName="BaseThumbnail";let C=e=>{let{file:t,size:r,showWarnings:s,onRemoveFile:a,onClick:l,isInteractive:d=!0,isEditable:c}=e,[u,h]=(0,g.useState)(!1);if((0,i.b)())return"xxs"===r?(0,n.jsx)(_.yL,{file:t}):(0,n.jsx)(_.mB,{file:t,showWarnings:s,handleRemove:a,handleClick:l,isEditable:c});if("file_kind"in t)switch(t.file_kind){case o.Y.Image:return(0,n.jsx)(z,{isPreviewOpen:u,setIsPreviewOpen:h,file:t,size:r,showWarnings:s,onRemoveFile:a,onClick:l,isInteractive:d});case o.Y.Blob:return(0,n.jsx)(F,{file:t,size:r,onRemoveFile:a,onClick:l,isInteractive:d});case o.Y.SanitizedDocument:return(0,n.jsx)(I,{file:t,size:r,onRemoveFile:a,onClick:l,isInteractive:d})}return(0,n.jsx)(D,{isPreviewOpen:u,setIsPreviewOpen:h,file:t,size:r,onRemoveFile:a,onClick:l,isInteractive:d})},M={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:650,damping:25,mass:1,opacity:{ease:"linear",duration:.25}}},exit:{opacity:0,scale:.9,duration:.05,ease:"easeOut"}},z=e=>{let{file:t,size:r,showWarnings:s,onRemoveFile:i,onClick:d,isInteractive:c,isPreviewOpen:u,setIsPreviewOpen:h}=e,x=s&&(0,l.e)(t),f="lg"===r?t.preview_asset:t.thumbnail_asset,[b,v]=(0,g.useState)(!1),j="lg"===r?400:100,y="lg"===r?200:80,N=window.devicePixelRatio||1,_=f.image_width/N,k=f.image_height/N,C=1;return _>j&&(C=j/_),k*C>y&&(C=y/k),_*=C,k*=C,(0,n.jsxs)(p.E.div,{"data-testid":t.file_name,className:(0,m.Z)("group inline-block self-end flex-shrink-0",c&&"cursor-pointer","md"===r&&"h-20 w-28 border-border-300/20 hover:border-border-300/30 transition relative -mb-1 rounded-[0.625rem] border-2",x&&"border-warning-orange/95","lg"===r&&"rounded-lg shadow"),layout:"lg"!==r,...!!i&&M,children:[i&&(0,n.jsx)("div",{className:"absolute -top-0.5 left-0.5 z-10",children:(0,n.jsx)(A,{onRemoveFile:i})}),x&&(0,n.jsx)(S,{}),(0,n.jsx)(a.u,{tooltipContent:t.file_name,side:"bottom",children:(0,n.jsxs)("div",{className:(0,m.Z)("border-0.5 border-border-200 group-hover/thumbnail:border-border-100 relative overflow-hidden rounded-lg transition group-active/thumbnail:scale-[0.99]","md"===r&&"h-full w-full"),style:{backgroundColor:"#".concat(t.thumbnail_asset.primary_color)},children:[(0,n.jsx)(p.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:b?1:0,scale:b?1:.985,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,m.Z)("md"===r&&"h-full w-full object-cover"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",onLoad:()=>v(!0),src:f.url,width:_,height:k}),(0,n.jsx)("link",{rel:"preload",as:"image",href:t.preview_asset.url}),c&&(0,n.jsx)("button",{className:"absolute inset-0 z-[1]",onClick:d||(()=>h(!0)),"data-testid":"file-thumbnail"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]})}),t.file_kind===o.Y.Image&&(0,n.jsx)(w.e,{file:t,isOpen:u,onClose:()=>h(!1)})]})},S=()=>{let e=(0,b.Z)();return(0,n.jsx)(a.u,{tooltipContent:e.formatMessage({defaultMessage:"Attach a higher resolution image for better results",id:"VLPlC033NT"}),side:"bottom",children:(0,n.jsx)("div",{className:"bg-warning-orange/95 text-text-100 hover:text-text-000 absolute bottom-0 right-0 z-10 rounded-ee-md rounded-ss-md p-0.5 transition",children:(0,n.jsx)(d.v,{size:16})})})},E=e=>{let{size:t,isInteractive:r=!0,isError:s=!1}=e;return(0,n.jsxs)("div",{className:(0,m.Z)("group-hover/thumbnail:drop-shadow-sm pointer-events-none absolute inset-0 z-0 grid grid-rows-[auto_1fr] overflow-hidden transition transition-transform duration-100",r&&"group-active/thumbnail:scale-[0.99]"),children:[(0,n.jsxs)("div",{className:"relative z-[1] -mb-[0.5px] flex ",children:[(0,n.jsx)("div",{className:(0,m.Z)("border-border-200/30 border-l-0.5 border-t-0.5 group-hover/thumbnail:border-border-200 h-full w-full bg-always-white transition-colors duration-100","xxs"===t&&"rounded-tl","xs"===t&&"rounded-tl-md","xxs"!==t&&"xs"!==t&&"rounded-tl-lg")}),(0,n.jsxs)("svg",{viewBox:"0 0 16 16",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",className:(0,m.Z)("block flex-shrink-0 drop-shadow","xxs"===t?"h-2 w-2":"h-4 w-4"),children:[(0,n.jsx)("path",{d:"M0 0L16 16H0V0Z",className:"stroke-border-300/10 fill-always-white",strokeWidth:"0.5"}),(0,n.jsx)("path",{d:"M-1 -1L17 17",className:"group-hover/thumbnail:stroke-border-300 transition-colors duration-100",strokeWidth:"0.5"})]})]}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("div",{className:(0,m.Z)("border-l-0.5 border-b-0.5 border-r-0.5 border-border-200/30 group-hover/thumbnail:border-border-200 absolute inset-0 bg-always-white bg-gradient-to-b from-always-white from-20% transition-colors duration-100",s?"to-danger-000/20":"to-accent-secondary-200/10","xxs"===t&&"rounded-b","xs"===t&&"rounded-b-md","xxs"!==t&&"xs"!==t&&"rounded-b-lg")})})]})},Z=e=>{let{file_name:t,size:r}=e;return(0,n.jsx)(n.Fragment,{children:"xxs"!==r&&"xs"!==r&&(0,n.jsx)("div",{style:{transform:"translate3d(0,0,0)"},className:(0,m.Z)("text-accent-secondary-200 pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight",("md"===r||"auto"===r)&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","lg"===r&&"line-clamp-4 px-3 pt-6 text-sm font-semibold"),children:G(t)})})},L=e=>{let{fileExtension:t,size:r,extensionAccessory:s,className:i,externalDocument:a=!1}=e;return(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("div",{className:(0,m.Z)("inline-flex max-w-full items-center transition-all",("xxs"===r||"xs"===r)&&"relative z-[1] pt-0.5 text-accent-secondary-100","xxs"===r&&"text-[0.4rem] tracking-tighter","xs"===r&&"text-[0.5rem] tracking-normal",("md"===r||"mdlg"===r||"lg"===r)&&"group-hover/thumbnail:bg-always-white/80 transition bg-always-white/90 backdrop-blur border-border-200/30 border-0.5 shadow-sm text-always-black/70 inline-block rounded-full px-1.5 py-[0.125rem] text-[0.625rem] tracking-normal","md"===r&&"absolute left-1/2 top-full z-10 -mt-1 -translate-x-1/2 -translate-y-1/2","mdlg"===r&&"relative z-[1] mb-3","lg"===r&&"relative z-[1] mb-4",i),children:[(0,n.jsx)("div",{className:"uppercase font-bold line-clamp-1 truncate",children:t}),s,a&&(0,n.jsx)(c.G,{size:12,className:"ml-1 group-hover/thumbnail:opacity-70 opacity-0 w-0 group-hover/thumbnail:w-3 scale-50 group-hover/thumbnail:scale-100 transition-all"})]})})},F=e=>{let{file:t,size:r,onClick:s,isInteractive:i,onRemoveFile:l}=e,[o,d]=(0,g.useState)(!1),c=t.file_name.split("."),h=c.length>1?c[c.length-1]:null,x=i?t.file_name:null,f=h?(0,n.jsx)(v.Z,{defaultMessage:"Claude can analyze {fileExtension} files with the analysis tool.",id:"zk0dac6GGP",values:{fileExtension:h.toUpperCase()}}):(0,n.jsx)(v.Z,{defaultMessage:"Claude can analyze this file with the analysis tool.",id:"gbe6qXNZjr"});return(0,n.jsxs)(k,{size:r,onRemoveFile:l,isInteractive:i,testId:t.file_name,children:[l&&(0,n.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,n.jsx)(A,{onRemoveFile:l})}),(0,n.jsx)(j.y,{isOpen:o,setIsOpen:d,fileName:t.file_name,fileUuid:t.file_uuid}),(0,n.jsxs)(P,{size:r,onClick:s||(i?()=>d(!0):void 0),children:[(0,n.jsx)(E,{size:r}),(0,n.jsx)(Z,{file_name:t.file_name,size:r}),(0,n.jsx)(a.u,{tooltipContent:x,side:"bottom",children:(0,n.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-5"})}),h&&(0,n.jsx)(L,{fileExtension:h,size:r,extensionAccessory:"lg"===r||"md"===r?(0,n.jsxs)("div",{className:"inline-flex ml-1 -my-0.5 -mr-1.5 rounded-r-full",children:[(0,n.jsx)("div",{className:"inline-block w-[0.5px] bg-always-black/20 rounded-b"}),(0,n.jsx)(a.u,{tooltipContent:f,side:"bottom",children:(0,n.jsx)("span",{className:"inline-flex items-center gap-1  pl-1.5 pr-2 rounded-r-full group/large transition",children:(0,n.jsx)(u.k,{weight:"bold",className:"opacity-80",size:12})})})]}):null})]})]})},I=e=>{let{file:t,size:r,onClick:s,isInteractive:i,onRemoveFile:l}=e,[o,d]=(0,g.useState)(!1),c=t.file_name.split("."),u=c.length>1?c[c.length-1]:null,h=i?t.file_name:null;return(0,n.jsxs)(k,{size:r,onRemoveFile:l,isInteractive:i,testId:t.file_name,children:[l&&(0,n.jsx)("div",{className:"absolute left-1 top-1 z-10 group",children:(0,n.jsx)(A,{onRemoveFile:l})}),(0,n.jsx)(N.i,{isOpen:o,setIsOpen:d,documentFile:t}),(0,n.jsxs)(P,{size:r,onClick:s||(i?()=>d(!0):void 0),children:[(0,n.jsxs)("div",{className:"absolute h-full w-full rounded-[0.625rem] mt-0.5 border-2 border-border-300/20 group-hover/thumbnail:border-border-300/30 transition overflow-hidden",children:[(0,n.jsx)(p.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,m.Z)("md"===r&&"h-full w-full object-cover object-top top-0 border-0.5 border-border-200 group-hover/thumbnail:border-border-100 transition rounded-lg"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",src:t.thumbnail_asset.url,width:t.thumbnail_asset.image_width,height:t.thumbnail_asset.image_height}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]}),(0,n.jsx)("div",{className:"h-full w-full",children:" "}),(0,n.jsx)(a.u,{tooltipContent:h,side:"bottom",children:(0,n.jsx)("div",{className:"absolute top-0 left-0 right-0 -bottom-0"})}),u&&(0,n.jsx)(L,{fileExtension:u,size:r})]})]})},D=e=>{let{file:t,size:r,onClick:i,isInteractive:l,onRemoveFile:o,isPreviewOpen:d,setIsPreviewOpen:c}=e,h=R(t)?(0,n.jsx)(v.Z,{defaultMessage:"Pasted Text",id:"scniiadfth"}):t.file_name,x=t.extracted_content.split("\n").length,f=l?(0,n.jsx)(v.Z,{id:"L7ArvWNpMR",defaultMessage:"{filename} \xb7 {lineCount, plural, one {# line} other {# lines}}",values:{filename:h,lineCount:x}}):null;return(0,n.jsxs)(k,{size:r,onRemoveFile:o,isInteractive:l,testId:t.file_name,children:[o&&(0,n.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,n.jsx)(A,{onRemoveFile:o})}),(0,n.jsx)(y.J,{file:t,isOpen:d,onClose:()=>c(!1)}),(0,n.jsx)(a.u,{className:"text-center",tooltipContent:f,side:"bottom",children:(0,n.jsx)("div",{children:(0,n.jsxs)(P,{size:r,onClick:i||(l?()=>c(!0):void 0),testId:"file-thumbnail",children:[(0,n.jsx)(E,{size:r}),R(t)?(0,n.jsx)("div",{className:(0,m.Z)("fade-out-bottom text-accent-secondary-100 pointer-events-none visible relative z-[1] h-full overflow-hidden break-words text-left leading-tight tracking-tighter opacity-70",("md"===r||"auto"===r)&&"px-3.5 pt-3.5 text-[0.5rem] font-semibold","lg"===r&&"px-3 pt-5 text-[0.5rem] font-semibold"),children:t.extracted_content.substring(0,200)}):(0,n.jsx)(Z,{file_name:t.file_name,size:r}),(0,n.jsx)(L,{fileExtension:function(e){if(R(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}(t),size:r,extensionAccessory:"pdf"===t.file_type&&(0,n.jsx)(a.u,{tooltipContent:"PDF converted to text",side:"bottom",children:(0,n.jsxs)("div",{className:"inline-flex ml-1",children:[(0,n.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,n.jsx)(u.k,{className:"ml-1.5 mr-0.5",weight:"bold",size:12})]})})})]})})})]})};function A(e){let{onRemoveFile:t}=e,r=(0,b.Z)();return(0,n.jsx)("button",{className:"border-0.5 border-border-200 text-text-500 bg-bg-000 hover:bg-danger-100 hover:text-oncolor-100 -translate-x-1/2 -translate-y-1/2 rounded-full p-1 transition hover:scale-105",onClick:t,"aria-label":r.formatMessage({defaultMessage:"Remove file",id:"hgAzMVK+jq"}),children:(0,n.jsx)(h.X,{size:12,weight:"bold"})})}function R(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function G(e){let t=e.match(/\.[^/.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}function P(e){let{size:t,children:r,isInteractive:s=!0,testId:i,classname:a,...l}=e,o=(0,m.Z)("relative grid grid-rows-[1fr_auto] items-center","xxs"===t&&"h-7 w-[1.625rem]","xs"===t&&"h-10 w-10","md"===t&&"h-20 w-28","mdlg"===t&&"h-[120px] w-[120px]","lg"===t&&"h-36 w-32 drop-shadow-sm","auto"===t&&"h-full w-full",a);return l.href?(0,n.jsx)("a",{"data-testid":i,target:"_blank",className:o,href:l.href,children:r}):(0,n.jsx)("button",{"data-testid":i,disabled:!s,className:o,onClick:l.onClick,children:r})}let T=()=>(0,i.b)()?(0,n.jsx)(_.vQ,{title:"Images hidden in shared chats",isError:!0}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,n.jsx)(x.f,{size:24,className:"text-text-500"}),(0,n.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,n.jsx)(v.Z,{defaultMessage:"Images are not supported in shared chats",id:"vmTlLHPu8j"})})]}),O=()=>(0,i.b)()?(0,n.jsx)(_.vQ,{title:"Files hidden in shared chats",isError:!0}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,n.jsx)(f.h,{size:24,className:"text-text-500"}),(0,n.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,n.jsx)(v.Z,{defaultMessage:"Files are not supported in shared chats",id:"8u6r5ZY4A7"})})]})},91887:function(e,t,r){r.d(t,{fz:function(){return G},l1:function(){return O},mB:function(){return E},vQ:function(){return A},yL:function(){return R}});var n=r(41596),s=r(27573),i=r(5161),a=r(5984),l=r(9788),o=r(10571),d=r(32737),c=r(84464),u=r(1133),h=r(53949),x=r(30070),f=r(80151),m=r(10607),p=r(68425),g=r(8927),b=r(7653),v=r(45790);r(59821);var j=r(23529),y=r(26047),w=r(53186),N=r(32846);function _(){let e=(0,n._)(["\n  min-w-0\n  h-[18px] \n  flex \n  flex-row \n  items-center \n  justify-center\n  gap-0.5\n  px-1 \n  border-0.5\n  border-border-300/25\n  shadow-sm\n  rounded\n  bg-bg-000/70\n  backdrop-blur-sm\n  font-medium\n"]);return _=function(){return e},e}function k(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function C(e){if("file_kind"in e){let t=e.file_name.split(".");return t.length>1?t[t.length-1]:void 0}if(k(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,i.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}let M=e=>{let{handleClick:t,isInSelectionMode:r,handleSelect:n}=e,[s,i]=(0,b.useState)(!1);return{onClick:()=>{r&&n?n(!0,!1):t?t():i(!0)},isPreviewOpen:s,setIsPreviewOpen:i}},z={icon:{height:28,width:28},normal:{height:120,width:120},stretch:{height:120,width:"100%"}},S=e=>e&&z[e]?z[e]:z.normal,E=e=>{let{file:t,isEditable:r,showWarnings:n,...i}=e;if("file_kind"in t)switch(t.file_kind){case h.Y.Image:return(0,s.jsx)(Z,{...i,file:t,showWarnings:n,isEditable:r});case h.Y.Blob:return(0,s.jsx)(L,{...i,file:t,isEditable:r});case h.Y.SanitizedDocument:return(0,s.jsx)(I,{...i,file:t,isEditable:r})}return(0,s.jsx)(F,{...i,file:t,isEditable:r})},Z=e=>{let{disabled:t,size:r,file:n,showWarnings:i,handleRemove:a,handleClick:l,isSelected:o,handleSelect:d,isInSelectionMode:u,isEditable:h}=e,{height:x,width:f}=S(r),{onClick:p,isPreviewOpen:g,setIsPreviewOpen:b}=M({handleClick:l,isInSelectionMode:u,handleSelect:d}),v=i&&(0,c.e)(n);return(0,s.jsxs)("div",{className:"relative group/thumbnail",children:[(0,s.jsxs)("div",{"data-testid":n.file_name,style:{width:f,height:x,minWidth:f,minHeight:x},className:(0,m.Z)("rounded-lg overflow-hidden can-focus-within rounded-lg",!t&&"cursor-pointer"),children:[(0,s.jsx)(D,{"data-testid":"file-thumbnail",disabled:t,width:f,height:x,fileName:n.file_name,src:n.preview_asset.url,onClick:p}),(0,s.jsx)(U,{isAbsolute:!0,right:v?(0,s.jsx)(H,{type:"warning",tooltipText:"Attach a higher resolution image for better results"}):void 0,isSelected:o,handleSelect:d,isEditable:h}),(0,s.jsx)(w.e,{file:n,isOpen:g,onClose:()=>b(!1)}),(0,s.jsx)("div",{className:(0,m.Z)("transition-colors absolute pointer-events-none top-0 left-0 right-0 bottom-0 rounded-lg shadow-always-white/40 shadow-[inset_0_0_0_2px_var(--tw-shadow-color)]",!t&&"group-hover/thumbnail:shadow-always-white/60")})]}),(0,s.jsx)(W,{disabled:t,handleRemove:a,isEditable:h,isInSelectionMode:u})]})},L=e=>{let{file:t,handleClick:r,...n}=e,{onClick:i,isPreviewOpen:a,setIsPreviewOpen:l}=M({handleClick:r,isInSelectionMode:n.isInSelectionMode,handleSelect:n.handleSelect}),o=C(t);return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{...n,"data-testid":t.file_name,title:t.file_name,handleClick:i,tag:!!o&&(0,s.jsx)(B,{tagName:o,tooltipText:o?"Claude can analyze ".concat(o.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool."})}),(0,s.jsx)(j.y,{isOpen:a,setIsOpen:l,fileName:t.file_name,fileUuid:t.file_uuid})]})},F=e=>{let{file:t,handleClick:r,...n}=e,{onClick:i,isPreviewOpen:a,setIsPreviewOpen:l}=M({handleClick:r,isInSelectionMode:n.isInSelectionMode,handleSelect:n.handleSelect}),o=k(t),d=o?"Pasted Text":t.file_name,c=t.extracted_content.split("\n").length,u=(0,s.jsx)(v.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:c}}),h=t.extracted_content.substring(0,300),x=C(t);return(0,s.jsxs)("div",{children:[(0,s.jsx)(A,{...n,"data-testid":t.file_name,...o?{text:h}:{title:d,subtitle:u},handleClick:i,tag:!!x&&(0,s.jsx)(B,{tagName:x,tooltipText:"pdf"===t.file_type?"PDF converted to text":void 0})}),(0,s.jsx)(y.J,{file:t,isOpen:a,onClose:()=>l(!1)})]})},I=e=>{let{disabled:t,size:r,file:n,handleRemove:i,handleClick:a,isSelected:l,handleSelect:o,isInSelectionMode:d,isEditable:c}=e,{height:u,width:h}=S(r),{onClick:x,isPreviewOpen:f,setIsPreviewOpen:p}=M({handleClick:a,isInSelectionMode:d,handleSelect:o}),g=C(n);return(0,s.jsxs)("div",{className:"group/thumbnail relative",children:[(0,s.jsxs)("div",{"data-testid":n.file_name,style:{width:h,height:u,minWidth:h,minHeight:u},className:(0,m.Z)("rounded-lg overflow-hidden border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 can-focus-within rounded-lg",!t&&"cursor-pointer hover:border-border-200/50 hover:shadow-always-black/10"),children:[(0,s.jsx)(D,{disabled:t,width:"100%",height:"100%",fileName:n.file_name,src:n.thumbnail_asset.url,onClick:x}),(0,s.jsx)(U,{isSelected:l,handleSelect:o,isAbsolute:!0,left:g?(0,s.jsx)(B,{tagName:g}):void 0,isEditable:c}),(0,s.jsx)(N.i,{isOpen:f,setIsOpen:p,documentFile:n})]}),(0,s.jsx)(W,{disabled:t,handleRemove:i,isEditable:c,isInSelectionMode:d})]})},D=e=>{let{disabled:t,width:r,height:n,fileName:i,src:a,onClick:l}=e,[o,d]=(0,b.useState)(!1);return(0,s.jsx)("button",{className:"relative bg-bg-000",style:{width:r,height:n},disabled:t,onClick:l,children:(0,s.jsx)("img",{className:(0,m.Z)("w-full h-full object-cover transition duration-400",o?"opacity-1":"opacity-0 blur-sm"),onLoad:()=>d(!0),alt:i,src:a,onDragStart:e=>e.preventDefault()})})},A=e=>{let{disabled:t,size:r,url:n,handleClick:i,title:a,subtitle:l,text:o,isLoading:d=!1,tag:c,actions:u,isError:h,handleRemove:x,isEditable:f,isSyncing:g,handleSelect:b,isSelected:v,isInSelectionMode:j}=e,{height:y,width:w}=S(r),N=(0,s.jsxs)(p.E.div,{className:"group/thumbnail relative",whileHover:f?"actionsVisible":g||j?"actionsVisible":void 0,animate:j||g?"actionsVisible":"initial","data-testid":"file-thumbnail",children:[(0,s.jsxs)("div",{style:{width:w,height:y,minWidth:w},className:(0,m.Z)("font-styrene transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",h?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",!!(n||i)&&!d&&!t&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),children:[(0,s.jsxs)("div",{className:"relative flex flex-col gap-1 min-h-0",children:[o?(0,s.jsx)("div",{className:"max-w-full overflow-hidden absolute h-[112px] [mask-image:linear-gradient(to_bottom,hsl(var(--always-black)/80%)_0%,_hsl(var(--always-black)/10%)_100%)]",children:(0,s.jsx)(p.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-[8px] text-text-100 break-words",children:o})}):h||a&&!d?(0,s.jsx)(p.E.h3,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:(0,m.Z)("text-[12px] tracking-tighter break-words",h?"text-text-500":"text-text-100",l?"line-clamp-3":"line-clamp-4"),children:a}):(0,s.jsx)(P,{}),!!l&&!d&&!h&&(0,s.jsx)(p.E.p,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:"text-[10px] line-clamp-1 tracking-tighter break-words text-text-500",children:l})]}),d?(0,s.jsx)(T,{}):(0,s.jsx)(U,{isSelected:v,handleSelect:b,left:c,right:h&&(0,s.jsx)(H,{type:"error"}),actions:u,isEditable:f})]}),(0,s.jsx)(W,{disabled:t,handleRemove:x,isEditable:f,isInSelectionMode:j})]});return i?(0,s.jsx)("button",{disabled:t,style:{width:w,height:y,minWidth:w},className:(0,m.Z)("rounded-lg text-left block",!t&&"cursor-pointer"),onClick:i,children:N}):n?(0,s.jsx)("a",{style:{width:w,height:y,minWidth:w},href:t?void 0:n,target:"_blank",className:"block rounded-lg",children:N}):N},R=e=>{let{file:t}=e,r=C(t);return(0,s.jsx)("div",{className:"w-[38px] h-[38px] min-w-[38px] font-styrene rounded-lg border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 flex items-center justify-center overflow-hidden bg-bg-000",children:!!r&&(0,s.jsx)("p",{className:"font-bold uppercase font-styrene text-text-300 text-[9px] tracking-tighter pt-0.5",children:r})})},G=e=>{let{size:t,tag:r,isShown:n=!0}=e,{width:i}=S(t);return(0,s.jsx)(g.M,{children:!!n&&(0,s.jsx)(p.E.div,{initial:{opacity:0,maxWidth:0},animate:{opacity:1,maxWidth:i},children:(0,s.jsx)(A,{isLoading:!0,tag:r,size:t})})})},P=()=>(0,s.jsxs)(p.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col",children:[(0,s.jsx)(o.g,{width:"100%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"}),(0,s.jsx)(o.g,{width:"66%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})]}),T=()=>(0,s.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,s.jsx)(o.g,{width:"48px",height:"18px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})}),O=l.q.div(_()),U=e=>{let{isAbsolute:t=!1,left:r,right:n,actions:i,handleSelect:l,isSelected:o,isEditable:d}=e,c=!!r,u=!!n||!!l;return c||u?(0,s.jsx)("div",{className:(0,m.Z)(t&&"absolute bottom-2 left-0 right-0 px-2.5 overflow-x-hidden overflow-y-visible"),children:(0,s.jsxs)("div",{className:(0,m.Z)("relative flex flex-row items-center gap-1",u&&!c?"justify-end":"justify-between"),children:[c&&(0,s.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-row gap-1 shrink min-w-0",children:r}),u&&(0,s.jsxs)("div",{className:"flex flex-row gap-1 shrink-0",children:[n,!!l&&!!d&&(0,s.jsxs)(p.E.div,{variants:{actionsVisible:{opacity:1,position:"relative"},initial:{opacity:0,position:"absolute"}},className:"flex flex-row gap-1 h-[18px] right-0 top-0",onClick:e=>e.stopPropagation(),transition:{ease:"easeOut",duration:.2},children:[i,(0,s.jsx)(a.XZ,{checked:o,onChange:l,label:"Select file",hideLabel:!0,className:(0,m.Z)("!w-[18px] !h-[18px] !border-0.5 !border-border-300/25 !shadow-sm !rounded"),size:12})]})]})]})}):null},B=e=>{let{tagName:t,tooltipText:r,className:n}=e,i=(0,s.jsx)(O,{className:n,children:(0,s.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:t})});return r?(0,s.jsx)(d.u,{tooltipContent:r,children:i}):i},H=e=>{let{type:t,tooltipText:r,className:n}=e,i=(0,s.jsx)(O,{className:(0,m.Z)("shrink-0","error"===t?"text-danger-000 border-danger-200/50 bg-danger-900":"text-warning-orange border-warning-orange/50 bg-bg-000/70",n),children:(0,s.jsx)(x.v,{size:12})});return r?(0,s.jsx)(d.u,{tooltipContent:r,children:i}):i},W=e=>{let{disabled:t,handleRemove:r,isEditable:n,isInSelectionMode:i}=e;return!r||!n||i||t?null:(0,s.jsx)(d.u,{tooltipContent:(0,s.jsx)(v.Z,{defaultMessage:"Remove",id:"G/yZLul6P1"}),side:"bottom",children:(0,s.jsx)("button",{className:(0,m.Z)("transition-all hover:bg-bg-000/50 text-text-500 hover:text-text-200 group-focus-within/thumbnail:opacity-100 group-hover/thumbnail:opacity-100 opacity-0 w-5 h-5 absolute -top-2 -left-2 rounded-full border-0.5 border-border-300/25 bg-bg-000/90 backdrop-blur-sm flex items-center justify-center",(0,u.tq)()&&"!opacity-100 !bg-bg-000/50"),onClick:e=>{e.stopPropagation(),e.preventDefault(),r()},children:(0,s.jsx)(f.X,{size:12,weight:"bold"})})})}},67677:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(27573),s=r(30070),i=r(10607);let a=e=>{let{icon:t,title:r,subtitles:a,tag:l,disabled:o,url:d,isError:c,handleClick:u}=e,h=(0,i.Z)("flex flex-row gap-4 items-center justify-between rounded-md tracking-tight min-h-[1.875rem] h-[1.875rem] px-1 w-full min-w-0",!o&&(u||d)?"cursor-pointer hover:bg-bg-100":"cursor-default"),x=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(!!t||c)&&(0,n.jsx)("div",{className:"h-4 w-4 flex items-center justify-center shrink-0",children:c?(0,n.jsx)(s.v,{size:12,className:"text-danger-000"}):t}),(0,n.jsx)("p",{className:(0,i.Z)("text-[12px] whitespace-nowrap overflow-hidden text-ellipsis shrink leading-[16px]",c?"text-text-500":"text-text-000"),children:r}),!!(null==a?void 0:a.length)&&a.map((e,t)=>(0,n.jsx)("p",{className:"text-[11px] text-text-500 line-clamp-1 shrink-0 leading-[16px]",children:e},t))]}),!!l&&(0,n.jsx)("div",{className:"shrink-0 flex items-center",children:(0,n.jsx)("div",{className:"text-[9px] text-text-300 border-border-400 border-0.5 rounded px-1 h-[1.125rem] inline-flex items-center justify-center uppercase font-medium shrink-0",children:l})})]});return d?(0,n.jsx)("a",{target:"_blank",href:o?void 0:d,tabIndex:-1,children:(0,n.jsx)("button",{disabled:o,className:h,onClick:u,children:x})}):u?(0,n.jsx)("button",{disabled:o,className:h,onClick:u,children:x}):(0,n.jsx)("div",{className:h,children:x})}},23529:function(e,t,r){r.d(t,{y:function(){return m}});var n,s,i=r(27573),a=r(11607),l=r(52939),o=r(49167),d=r(88738),c=r(11510),u=r(45790),h=r(5362),x=r(27218),f=r(13262);function m(e){let{isOpen:t,setIsOpen:r,fileName:n,fileUuid:m}=e,{data:p,isLoading:g}=function(e){let{fileUuid:t,enabled:r}=e,{activeOrganization:n}=(0,x.t)(),s=null==n?void 0:n.uuid;return(0,h.WE)("/api/organizations/".concat(s,"/files/").concat(t,"/content_preview"),{queryKey:[f.Ej,{orgUuid:s,fileUuid:t}],enabled:!!n&&r})}({fileUuid:m,enabled:t}),b=null;return b=g?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(a.Loading,{size:"md"})}):p?p.file_type===s.Csv?(0,i.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,i.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,i.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,i.jsx)(d.z,{className:"mr-2",size:16}),(0,i.jsx)("div",{children:(0,i.jsx)(u.Z,{defaultMessage:"Columns",id:"SUa8mpheAG"})})]}),(0,i.jsx)(o.$,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:p.column_names.map((e,t)=>(0,i.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,i.jsx)("div",{className:"text-lg text-text-100 mb-2",children:(0,i.jsx)(u.Z,{defaultMessage:"{columnCount, plural, one {# column} other {# columns}}, {rowCount, plural, one {# row} other {# rows}}",id:"wvGBF/FvBd",values:{columnCount:p.column_count,rowCount:p.row_count}})}),(0,i.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,i.jsx)(c.k,{className:"mr-2",size:12}),(0,i.jsx)("div",{children:(0,i.jsx)(u.Z,{defaultMessage:"Claude can analyze CSVs with the Analysis tool.",id:"gtvz8LDd6q"})})]})]}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(u.Z,{defaultMessage:"File previews are not supported for this file type",id:"99ghrgx5j8"})}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(u.Z,{defaultMessage:"Could not load file preview",id:"ATy/CxAxS4"})}),(0,i.jsx)(l.u_,{isOpen:t,hasCloseButton:!0,title:n,onClose:()=>r(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:b})}(n=s||(s={})).Generic="generic",n.Csv="csv",n.Excel="excel"},82274:function(e,t,r){r.d(t,{R:function(){return i}});var n=r(27573),s=r(45790);function i(e){let{showPDFWarning:t=!1,metaData:r}=e;return(0,n.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,n.jsx)("span",{children:r}),(0,n.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:""}),t?(0,n.jsx)("span",{children:(0,n.jsx)(s.Z,{defaultMessage:"This PDF was converted to text due to its large size",id:"o/G2cAuU9n"})}):(0,n.jsx)("span",{children:(0,n.jsx)(s.Z,{defaultMessage:"Formatting may be inconsistent from source",id:"9NeTb00/cM"})})]})}},26047:function(e,t,r){r.d(t,{J:function(){return o}});var n=r(27573),s=r(2130),i=r(52939),a=r(7653),l=r(82274);let o=e=>{let{file:t,isOpen:r,onClose:o}=e,d=(0,a.useMemo)(()=>(0,s.G)(t),[t]);return(0,n.jsx)("div",{children:(0,n.jsx)(i.u_,{modalSize:"xl",isOpen:!!r,onClose:o,hasCloseButton:!0,title:d.title,subtitle:(0,n.jsx)(l.R,{showPDFWarning:"pdf"===t.file_type,metaData:d.metaData}),autoCloseOnFocusOut:!0,children:(0,n.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})}},53186:function(e,t,r){r.d(t,{e:function(){return m}});var n=r(41596),s=r(27573),i=r(9788),a=r(70354),l=r(34422),o=r(8927);let d=e=>{let{isOpen:t,children:r,initialFocus:n,className:i,onClose:a}=e;return(0,s.jsx)(o.M,{children:t&&(0,s.jsx)(l.V,{open:t,onClose:a,initialFocus:n,className:i,static:!0,children:r})})};var c=r(80151),u=r(68425),h=r(7653),x=r(40950);function f(){let e=(0,n._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_hsl(var(--always-black)/30%),_0_0_0_0.5px_hsl(var(--always-black)/25%)]\n"]);return f=function(){return e},e}let m=e=>{let{file:t,isOpen:r,onClose:n}=e,i=(0,x.Z)(),l=(0,h.useRef)(null);return(0,s.jsxs)(d,{isOpen:r,initialFocus:l,onClose:n,className:"fixed inset-0 z-modal grid place-items-center px-3 pb-14 pt-3",children:[(0,s.jsx)(u.E.div,{onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},className:"fixed inset-0 bg-always-black/70 backdrop-blur-[0px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,delay:.015}},exit:{opacity:0,transition:{opacity:{duration:.15}}}}),(0,s.jsxs)(u.E.div,{className:"relative max-w-[40rem]",initial:{opacity:0,scaleY:.925,scaleX:.95,translateY:"12px"},animate:{opacity:1,scaleX:1,scaleY:1,translateY:"0px",transition:{type:"spring",stiffness:750,damping:38,opacity:{duration:.15}}},exit:{opacity:0,scale:.95,transition:{duration:.15}},children:[(0,s.jsx)(a.z,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-always-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":i.formatMessage({defaultMessage:"Close image preview",id:"gylVBxmE7Z"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},ref:l,option:"rounded","data-testid":"close-file-preview",children:(0,s.jsx)(c.X,{size:"16"})}),(0,s.jsx)(p,{children:(0,s.jsx)("img",{loading:"eager",src:t.preview_asset.url,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},alt:i.formatMessage({defaultMessage:"Preview of {fileName}",id:"djtHiJ5aej"},{fileName:t.file_name}),onDragStart:e=>e.preventDefault(),className:"block w-full max-h-[calc(100vh-4rem)]"})}),(0,s.jsx)("div",{style:{textShadow:"0 0 8px hsl(var(--always-black)/25%)"},className:"pt-1.5 text-center text-always-white",children:t.file_name})]})]})},p=i.q.div(f())},32846:function(e,t,r){r.d(t,{i:function(){return o}});var n=r(27573),s=r(52939),i=r(78278),a=r(40950),l=r(45790);function o(e){let{isOpen:t,setIsOpen:r,documentFile:o}=e,d=(0,a.Z)();return(0,n.jsx)(s.u_,{isOpen:t,hasCloseButton:!0,title:o.file_name,onClose:()=>r(!1),children:(0,n.jsxs)("a",{className:"self-center group text-center",href:"".concat(o.document_asset.url,"/").concat(o.file_name),target:"_blank",children:[(0,n.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,n.jsx)("img",{className:"bg-always-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:d.formatMessage({defaultMessage:"{fileName} thumbnail",id:"1bEhiGnHtL"},{fileName:o.file_name}),src:o.thumbnail_asset.url,style:{width:o.thumbnail_asset.image_width/1.5,height:o.thumbnail_asset.image_height/1.5}}),(0,n.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,n.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,n.jsxs)("div",{className:"*:absolute *:w-full *:bg-always-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,n.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,n.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:o.document_asset.page_count})]}),(0,n.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,n.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,n.jsx)(l.Z,{defaultMessage:"{count, plural, one {# page} other {# pages}}",id:"RyCW0gT/7M",values:{count:o.document_asset.page_count}})}),(0,n.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,n.jsx)(i.b,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,n.jsx)("p",{children:(0,n.jsx)(l.Z,{defaultMessage:"Download",id:"5q3qC0sC3r"})})]})]})]})})}},2130:function(e,t,r){r.d(t,{G:function(){return i}});var n=r(27573),s=r(45790);function i(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?(0,n.jsx)(s.Z,{defaultMessage:"Pasted content",id:"okKwHjIO0b"}):e.file_name})(),metaData:(()=>{var t;let r=(0,n.jsx)(s.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:e.extracted_content.split("\n").length}}),i=(t=e.file_size)<1048576?(0,n.jsx)(s.Z,{defaultMessage:"{size} KB",id:"/hgypvsrtJ",description:"File size in kilobytes",values:{size:(t/1024).toFixed(2)}}):(0,n.jsx)(s.Z,{defaultMessage:"{size} MB",id:"8amcCGO7ya",description:"File size in megabytes",values:{size:(t/1048576).toFixed(2)}});if("html"===e.file_type){let t=e.file_name,s=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return s&&(t=s[0].replace("www.","")),(0,n.jsxs)("span",{children:[r,"\xa0",(0,n.jsx)("span",{className:"opacity-50 mx-1",children:""}),t]})}return(0,n.jsxs)("span",{children:[i,"\xa0",(0,n.jsx)("span",{className:"opacity-50 mx-1",children:""}),r]})})()}}},96070:function(e,t,r){r.d(t,{b:function(){return n}});let n=()=>!0},66557:function(e,t,r){r.d(t,{c:function(){return s}});var n=r(7653);function s(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[s,i]=(0,n.useState)(0),a=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!t){if(!a.current){if("undefined"==typeof Worker)return;try{let e=new Worker(r.tu(new URL(r.p+r.u(6344),r.b)));e.onmessage=e=>i(e.data),a.current=e}catch(t){var e;throw(null==t?void 0:null===(e=t.toString)||void 0===e?void 0:e.call(t).includes("Invalid URL"))&&console.error("useTokenCounter invalid URL error hit; baseUrl = ".concat("file:///app/packages/chat/utils/useTokenCounter.tsx","")),t}}return()=>{var e;null===(e=a.current)||void 0===e||e.terminate(),a.current=null}}},[t]),(0,n.useEffect)(()=>{a.current&&a.current.postMessage(e)},[e]),s}},9677:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(27573),s=r(10607);function i(e){let{className:t,variant:r,width:i=36,height:l=20,...o}=e,d="number"==typeof l?"".concat(l,"px"):l,c="calc(".concat(d," - 4px)");return(0,n.jsxs)("div",{className:(0,s.Z)("group/switch relative select-none cursor-pointer",t),children:[(0,n.jsx)("input",{type:"checkbox",className:"peer sr-only",...o}),(0,n.jsx)("div",{style:{width:i,height:d},className:(0,s.Z)("border-border-300 rounded-full peer:can-focus peer-disabled:opacity-50",a.pill[r||"default"])}),(0,n.jsx)("div",{style:{height:c,width:c},className:(0,s.Z)("absolute start-[2px] top-[2px] rounded-full transition-all peer-checked:translate-x-full rtl:peer-checked:-translate-x-full",a.circle[r||"default"])})]})}let a={pill:{default:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-accent-secondary-100\n    "},circle:{default:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    "}}},35354:function(e,t,r){r.d(t,{EO:function(){return o},h7:function(){return s},rE:function(){return d}});var n,s,i=r(27573),a=r(7653);(n=s||(s={})).IDLE="IDLE",n.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",n.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",n.DROPPED="DROPPED";let l=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},d=e=>{let{onDrop:t,children:r,className:n,disabled:s=!1}=e,[o,d]=(0,a.useState)("IDLE"),c=a.useRef(null),u=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))?d("DRAGGING_ON_TARGET"):d("DRAGGING_OFF_TARGET")},[]),h=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||d("IDLE")},[]),x=(0,a.useCallback)(e=>{var t;(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),d("IDLE"))},[]),f=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),d("DROPPED"),setTimeout(()=>{d("IDLE")},500)},[t]);return(0,a.useEffect)(()=>{if(!s)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",h),document.body.addEventListener("drop",x),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",h),document.body.removeEventListener("drop",x)};d("IDLE")},[u,h,x,f,s]),(0,i.jsx)(l.Provider,{value:{dragState:o,setDragState:d},children:(0,i.jsx)("div",{ref:c,className:n,onDrop:s?void 0:f,children:r})})}},10571:function(e,t,r){r.d(t,{g:function(){return d}});var n=r(41596),s=r(27573),i=r(9788),a=r(10607),l=r(45790);function o(){let e=(0,n._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return o=function(){return e},e}function d(e){let{className:t,height:r=24,width:n,rounded:i=!0}=e;return(0,s.jsx)(c,{className:(0,a.Z)(t,i&&"rounded-full"),style:{height:r,width:n||"100%"},children:(0,s.jsx)("span",{className:"sr-only",children:(0,s.jsx)(l.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let c=i.q.div(o())},49167:function(e,t,r){r.d(t,{$:function(){return d}});var n=r(41596),s=r(27573),i=r(47190),a=r(9788),l=r(7653);function o(){let e=(0,n._)(["",""]);return o=function(){return e},e}let d=e=>{let{hideBottomShadow:t,scrollContainerRef:r,persistedScrollToRef:n,...i}=e,a=(null==n?void 0:n.current)!==void 0,o=(0,l.useRef)(null),d=r||o,u=(0,l.useCallback)(()=>{let e=d.current;if(e&&!t){let{scrollTop:t,offsetHeight:r,scrollHeight:s}=e;t+r>=s?e.classList.remove("has-bottom-scroll"):e.classList.add("has-bottom-scroll"),a&&0!==t&&Math.abs(t-n.current)>10&&(n.current=t)}},[t,d,a,n]);return u(),(0,l.useEffect)(()=>{let e=d.current;requestAnimationFrame(()=>{a&&e&&(null==e||e.scrollTo({top:n.current,behavior:"instant"}))})},[d,a,n]),(0,l.useEffect)(()=>{let e=d.current;return null==e||e.addEventListener("scroll",u),()=>null==e?void 0:e.removeEventListener("scroll",u)},[u,d]),(0,s.jsx)(c,{ref:d,...i,children:i.children})},c=a.q.div(o(),i.X)},44512:function(e,t,r){r.d(t,{nh:function(){return o},pp:function(){return l},xK:function(){return a}});var n=r(40287),s=r(7653),i=r(77879);let a=()=>{var e,t;let r=window,n=null==r?void 0:null===(e=r.document)||void 0===e?void 0:e.hidden,[a,l]=(0,s.useState)(n),o=(0,s.useRef)(null!==(t=null==r?void 0:r.document)&&void 0!==t?t:null);return(0,i.OR)("visibilitychange",()=>l(!(null==r?void 0:r.document.hidden)),o),a},l=e=>{let{shouldFocus:t,target:r,delayMs:n=100}=e;(0,s.useEffect)(()=>{if(t&&r){let e=setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.focus()},n);return()=>clearTimeout(e)}},[t,r,n])},o=(e,t)=>{let r=(0,n.f)(),i=r.get(e),[a,l]=(0,s.useState)(void 0!==i?"true"===i:t);return[a,(0,s.useCallback)(t=>{l(n=>{let s="function"==typeof t?t(n):t;return r.set(e,s.toString()),s})},[r,e])]}},84464:function(e,t,r){r.d(t,{e:function(){return n}});let n=e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:r}=e.preview_asset;return t<200||r<200}},53949:function(e,t,r){var n,s,i,a;r.d(t,{Y:function(){return s},i:function(){return n}}),(i=n||(n={})).URLParameter="url_parameter",i.UserUpload="user_upload",i.FirstParty="first_party",(a=s||(s={})).Image="image",a.Blob="blob",a.SanitizedDocument="document"},13890:function(e,t,r){r.d(t,{X_:function(){return a},ir:function(){return s},p5:function(){return i}});var n=r(10228);let s=e=>e===n.co.ACCESS_DENIED||e===n.co.UNAUTHENTICATED||e===n.co.DISABLED,i="Your organization has turned off this integration. Please contact your administrator to re-enable.",a={[n.Fg.GDRIVE]:"Google",[n.Fg.GITHUB]:"GitHub",[n.Fg.OUTLINE]:"Outline",[n.Fg.SALESFORCE]:"Salesforce",[n.Fg.GMAIL]:"Gmail",[n.Fg.GCAL]:"Google Calendar",[n.Fg.SLACK]:"Slack",[n.Fg.ASANA]:"Asana"}}}]);