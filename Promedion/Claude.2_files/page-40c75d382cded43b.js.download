(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{27903:function(e,t,s){Promise.resolve().then(s.bind(s,31112))},31112:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(27573),i=s(28803),n=s(27218),r=s(20388),o=s(44602),l=s(45790),d=s(37199),c=s(84165),u=s(70354),h=s(82083),f=s(87033),x=s(11510),m=s(81695),p=s(7653),g=s(40950),v=s(32559),j=s(45014),y=s(74550),b=s(5492),M=s(58738),C=s(81353),N=s(84581),_=s(89100),w=s(5362),O=s(5984),Z=s(9677),I=s(52939);let U=(e,t)=>(0,w.uC)("/api/organizations/".concat(e,"/chat_snapshots/").concat(t,"/report"),"POST",{enabled:!!t&&!!e}),S={COPYRIGHT_INFRINGEMENT:"Copyright infringement",TRADEMARK_INFRINGEMENT:"Trademark infringement",CHILD_SAFETY:"Child safety",FRAUD:"Fraud",ADULT_CONTENT:"Adult content",VIOLENCE_AND_HATE:"Violence and/or hate speech",ILLEGAL_GOODS:"Illegal goods",COURT_ORDER:"Court order",PRIVATE_OR_CONFIDENTIAL_INFORMATION:"Private/confidential information",OTHER_ILLEGAL:"Other illegal or unlawful content",OTHER:"Other violation of Anthropic’s Usage Policy and/or Terms of Service"};function T(e){let{isOpen:t,onClose:s,snapshotUuid:i,organizationUuid:n}=e,[r,o]=(0,p.useState)(),[d,c]=(0,p.useState)(),[h,f]=(0,p.useState)(),[x,m]=(0,p.useState)(),[g,v]=(0,p.useState)(!1),{mutateAsync:j}=U(n,i),y=null;return"COPYRIGHT_INFRINGEMENT"===r?y=(0,a.jsx)("div",{className:"text-text-300 border-0.5 border-border-300 rounded-lg p-12 text-sm",children:(0,a.jsx)(l.Z,{defaultMessage:"Please use this <link>form</link> to report copyright infringement.",id:"6Ovg0gmxY3",values:{link:e=>(0,a.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeDGdVzv9XYm0eNaI88Aqm8fXO63UhbvFB9_4t-8CMlfUPewQ/viewform",target:"_blank",className:"underline",children:e})}})}):r&&(y=(0,a.jsxs)(a.Fragment,{children:["COURT_ORDER"===r?(0,a.jsx)("div",{className:"text-xs font-normal",children:(0,a.jsx)(l.Z,{defaultMessage:"<strong>Note:</strong> We use this form to review court orders against third parties who have posted allegedly unlawful content. We do not accept service of process here for court orders directed at Anthropic.",id:"F1dTavdHaO",values:{strong:e=>(0,a.jsx)("strong",{children:e})}})}):null,(0,a.jsx)("label",{className:"text-text-400 text-sm font-medium",children:(0,a.jsx)(l.Z,{defaultMessage:"Your name",id:"vlKhIlKczK"})}),(0,a.jsx)(O.oi,{value:x,onChange:e=>m(e.target.value),placeholder:"Optional"}),(0,a.jsxs)("label",{className:"text-text-400 text-sm font-medium",children:[(0,a.jsx)(l.Z,{defaultMessage:"Your email",id:"nONnTwYJzw"}),(0,a.jsx)("div",{className:"text-xs font-normal",children:(0,a.jsx)(l.Z,{defaultMessage:"If provided, we may contact you for additional information or updates on this report",id:"76+sVeXWuh"})})]}),(0,a.jsx)(O.oi,{value:h,onChange:e=>f(e.target.value),placeholder:"Optional"}),(0,a.jsxs)("label",{className:"text-text-400 text-sm font-medium",children:[(0,a.jsx)(l.Z,{defaultMessage:"Additional information",id:"gh/lBJ3ybG"}),(0,a.jsxs)("div",{className:"text-xs font-normal flex flex-col gap-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.Z,{defaultMessage:"Please provide any additional information to help us understand your request.",id:"iqT0iuZphp"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.Z,{defaultMessage:"If you are reporting the content as illegal/unlawful, please describe in detail why you believe the identified content is illegal/unlawful, citing specific provisions of law wherever possible.",id:"FtDimnJZ6A"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.Z,{defaultMessage:"If you are reporting the content as violating our policies (including our terms or Usage Policy), please describe in detail why you believe the identified content is in violation of our policies, with specific citations to our policies wherever possible.",id:"4XdZthEtcv"})})]})]}),(0,a.jsx)(O.Kx,{value:d,onChange:e=>c(e.target.value),placeholder:"Optional"}),(0,a.jsxs)("label",{className:"text-text-400 text-sm font-medium",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(l.Z,{defaultMessage:"Opt out of training on this report",id:"mREcB0MAuE"}),(0,a.jsx)(Z.Z,{checked:g,onChange:()=>v(!g)})]}),(0,a.jsx)("div",{className:"text-xs font-normal",children:(0,a.jsx)(l.Z,{defaultMessage:"We value user reports to uphold our platform’s integrity and improve our ability to enforce our Usage Policy. Unless you opt out, reports may be used to train models for use by our Trust & Safety team, consistent with Anthropic’s safety mission. Opt out of this use by changing the toggle above.",id:"2IiG1AGCna"})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(u.z,{variant:"secondary",onClick:()=>s(!1),children:(0,a.jsx)(l.Z,{defaultMessage:"Close",id:"rbrahOGMC3"})}),(0,a.jsx)(u.z,{onClick:async()=>{await j({notes:d,category:r,reporter_name:x,reporter_email:h,opt_out_of_training:g}),o(void 0),c(void 0),s(!0)},variant:"primary",children:(0,a.jsx)(l.Z,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]})]})),(0,a.jsx)(I.u_,{modalSize:"md",isOpen:t,onClose:s,hasCloseButton:!0,title:(0,a.jsx)("span",{className:"font-tiempos font-medium",children:(0,a.jsx)(l.Z,{defaultMessage:"Report chat",id:"SEH7AfCM+w"})}),children:(0,a.jsxs)("div",{className:"bg-bg-200 flex w-full flex-col gap-2 pt-6",children:[(0,a.jsx)("label",{className:"text-text-400 text-sm font-medium",htmlFor:"report-reason-dropdown",children:(0,a.jsx)(l.Z,{defaultMessage:"Why are you reporting this?",id:"0nCKXihfO0"})}),(0,a.jsxs)(O.Ph,{id:"report-reason-dropdown",value:null!=r?r:"select-report-reason",onChange:e=>o(e.target.value),children:[(0,a.jsx)("option",{value:"select-report-reason",disabled:!0,children:(0,a.jsx)(l.Z,{defaultMessage:"Select report reason",id:"bk8tuJl/tJ"})}),Object.entries(S).map(e=>{let[t,s]=e;return(0,a.jsx)("option",{value:t,children:s},t)})]}),y]})})}function E(e){let{snapshot:t}=e,s=(0,g.Z)(),[i,r]=(0,p.useState)(void 0),w=(0,m.useRouter)(),[O,Z]=(0,p.useState)(!1),[I,U]=(0,p.useState)(!1),{data:S}=(0,v.Yc)(t.project_uuid),{value:E}=(0,f.FL)("apps_use_turmeric"),{activeOrganization:A}=(0,n.t)(),k=null==A?void 0:A.uuid,{artifacts:R,lastArtifact:z}=(0,p.useMemo)(()=>{let e;let a={};return t.chat_messages.forEach(t=>{Object.values((0,h.HZ)(t)).forEach(i=>{var n,r,o;let{id:l,currentVersion:d,type:c,title:u,language:f}=i,x=(0,h.tE)(d,null===(o=a[l])||void 0===o?void 0:null===(r=o.versions)||void 0===r?void 0:null===(n=r.slice(-1)[0])||void 0===n?void 0:n.resultState),m={...d,resultState:x};e={messageUuid:t.uuid,versionUuid:m.uuid,artifactId:l},a[l]?a[l].versions.push(m):a[l]={id:l,type:c||"document",title:u||s.formatMessage({defaultMessage:"Untitled",id:"3kbIhS7KZS"}),language:f||void 0,versions:[m]}})}),{artifacts:a,lastArtifact:e}},[t.chat_messages,s]),F=(0,p.useCallback)(e=>(0,c.C)(e,E,k),[E,k]),D=(0,p.useMemo)(()=>t.chat_messages.flatMap(e=>e.attachments),[t.chat_messages]),G=(0,p.useMemo)(()=>t.chat_messages.flatMap(e=>e.files),[t.chat_messages]),P=(0,d.i)(D,G,k,t.project_uuid),Y=(0,p.useMemo)(()=>({claudeComplete:F,getFile:P}),[F,P]),[L,K]=(0,p.useState)(z),H=(0,p.useCallback)(e=>{let{toolUseId:s,input:i,isLastMessage:n,message:o,publishedArtifacts:l,shouldStream:d,toolName:c,toolResult:u,artifactCellType:h,isFirstBlockOfMessage:f,isLastBlockOfMessage:x}=e;return(0,a.jsx)(_.P,{toolUseId:s,toolName:c,input:i,message:o,toolResult:u,isLastMessage:n,isStreaming:d,onOpenArtifact:(e,t,s)=>{r(void 0),K({artifactId:e,messageUuid:t,versionUuid:s})},publishedArtifacts:l,artifacts:R,artifactCellType:h,isFirstBlockOfMessage:f,isLastBlockOfMessage:x,conversationUUID:t.uuid,isShared:!0})},[r,K,R,t.uuid]);return"error"in t?(0,a.jsx)(o.C,{productSurface:"claude-ai",headline:(0,a.jsx)(l.Z,{defaultMessage:"Error",id:"KN7zKn8z4F"}),subheading:(0,a.jsx)(l.Z,{defaultMessage:"There has been an error while loading the conversation. Please try again later.",id:"qC/NyiYpT1"}),button:(0,a.jsx)(u.z,{onClick:()=>w.back(),children:(0,a.jsx)(l.Z,{defaultMessage:"Go back",id:"orvpWhO3rI"})})}):I?(0,a.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center gap-4",children:[(0,a.jsx)("h1",{className:"font-copernicus text-text-100 max-w-xl text-center text-[1.75rem] tracking-tight",children:(0,a.jsx)(l.Z,{defaultMessage:"Chat reported",id:"TzYCE1hsD7"})}),(0,a.jsx)("p",{className:"text-text-300 max-w-xl text-center",children:(0,a.jsx)(l.Z,{defaultMessage:"Thank you for helping keep Claude safe and reliable. We’ll review your report as soon as possible.",id:"hrWcYUayKO"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(u.z,{variant:"primary",size:"lg",onClick:()=>U(!1),children:(0,a.jsx)(l.Z,{defaultMessage:"Return to chat",id:"urZR3I2eGQ"})})})]}):(0,a.jsx)(b.g,{mainElement:(0,a.jsxs)("div",{className:"relative mx-auto flex h-full w-full max-w-3xl flex-1 flex-col md:px-2",children:[(0,a.jsxs)(N.k,{children:[(0,a.jsxs)("div",{className:"border-0.5 border-border-400 text-text-400 flex items-center justify-between gap-2 rounded-xl px-3 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.k,{size:16,className:"shrink-0"}),(0,a.jsx)("p",{className:"text-xs leading-snug",children:t.created_by?(0,a.jsx)(l.Z,{defaultMessage:"This is a copy of a chat between Claude and {sharedBy}. Content may include unverified or unsafe content that do not represent the views of Anthropic. Shared snapshot may contain attachments and data not displayed here.",id:"6JISQP9sUJ",values:{sharedBy:t.created_by}}):(0,a.jsx)(l.Z,{defaultMessage:"This is a copy of a chat between Claude and a user. Content may include unverified or unsafe content that do not represent the views of Anthropic. Shared snapshot may contain attachments and data not displayed here.",id:"EG+hUsDlur"})})]}),t.is_public&&(0,a.jsx)(u.z,{variant:"ghost",size:"sm",onClick:()=>Z(!0),children:(0,a.jsx)(l.Z,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]}),(0,a.jsx)(C.w,{renderToolUseCell:H,children:t.chat_messages&&t.chat_messages.map(e=>{var s,i;return(0,a.jsx)(M.J,{author:t.created_by||"",message:e,conversationUUID:t.uuid,isStreaming:!1,isLastMessage:!0,isInteractive:!1,selectAttachment:r,onOpenArtifact:(e,t)=>{r(void 0),K({artifactId:e,messageUuid:t,versionUuid:void 0})},showSharedImageMissing:(null!==(s=e.image_count)&&void 0!==s?s:0)>0,showSharedFileMissing:(null!==(i=e.file_count)&&void 0!==i?i:0)>0,isShared:!0},e.index)})})]}),(0,a.jsx)("div",{className:"sticky bottom-0 mx-auto flex w-full flex-col items-center justify-center gap-3 pb-4 pt-4",children:(0,a.jsx)(u.z,{variant:"primary",href:t.project_uuid?"/project/".concat(t.project_uuid):"/new",children:(0,a.jsx)(l.Z,{defaultMessage:"Start your own conversation",id:"fyao1XCKIk"})})})]}),drawerElement:(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(y.c,{attachment:i,onClose:()=>r(void 0)}),L&&(0,a.jsx)(j.K0,{isOpen:!0,isStreaming:!1,artifact:R[L.artifactId],selectedArtifactMessageUUID:L.messageUuid,selectedArtifactVersionUUID:L.versionUuid,setSelectedArtifactVersionUUID:e=>{K(t=>t&&{...t,versionUuid:e})},onClose:()=>K(void 0),projectUuid:t.project_uuid,richSandboxCapabilities:Y,disablePublishing:!0})]}),auxilaryElement:(0,a.jsx)(T,{isOpen:O,onClose:e=>{e&&U(e),Z(!1)},snapshotUuid:t.uuid,organizationUuid:null==A?void 0:A.uuid}),isDrawerOpen:!!(L||i),headerProps:{conversationUUID:t.uuid,name:t.snapshot_name||s.formatMessage({defaultMessage:"Untitled chat",id:"lfYALmQol/"}),isInteractive:!1,project:S,isSharedChat:!0,sharedBy:t.created_by}})}function A(e){let{params:{snapshot_uuid:t}}=e,{activeOrganization:s}=(0,n.t)(),d=(0,n.Cf)(),{data:c,isError:u}=(0,i.CJ)(t);if(u){let e=d&&!!(null==s?void 0:s.name);return(0,a.jsx)(o.C,{productSurface:"claude-ai",headline:(0,a.jsx)(l.Z,{defaultMessage:"Conversation not found",id:"Gxn0f15FTj"}),subheading:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"mb-4 mt-4",children:(0,a.jsx)(l.Z,{defaultMessage:"The requested conversation either doesn’t exist or you don’t have permission to access it.",id:"5Y6Yy1lnzB"})}),(0,a.jsxs)("p",{children:[e?(0,a.jsx)(l.Z,{defaultMessage:"You’re currently within the {organizationName} organization.",id:"VFZmWiM2AU",values:{organizationName:(0,a.jsx)("span",{className:"font-medium",children:s.name})}}):(0,a.jsx)(l.Z,{defaultMessage:"You are currently viewing from your personal account.",id:"qGzyQ5ZD/s"}),"\xa0",(0,a.jsx)(l.Z,{defaultMessage:"You can try switching to a different organization.",id:"2ZUgKbbno+"})]})]})})}return c?(0,a.jsx)(k,{snapshot:c}):(0,a.jsx)(r.F,{})}function k(e){let{snapshot:t}=e;return(0,a.jsx)(E,{snapshot:t})}}},function(e){e.O(0,[703,7277,9906,2044,7611,4408,5790,3279,6340,7879,1270,6947,8183,3840,6971,7265,1211,1121,3097,2821,9505,1006,9833,294,3290,7376,4055,1919,9820,4335,4620,4512,3216,4906,4107,3083,55,7876,6465,7218,1279,3959,3858,9285,1817,1217,5725,6808,4155,3116,594,943,4555,1280,5022,4581,1293,1362,4856,1744],function(){return e(e.s=27903)}),_N_E=e.O()}]);