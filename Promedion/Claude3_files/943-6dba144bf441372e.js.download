"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[943],{1445:function(e,t,n){n.d(t,{Ad:function(){return p},Le:function(){return y},hU:function(){return v},oc:function(){return j},wH:function(){return h}});var s=n(76220),a=n(5362),l=n(27218),i=n(87033),r=n(10228),o=n(61122),c=n(2949),d=n(85465),u=n(19132),m=n(46200);let x=()=>{let{value:e}=(0,i.FL)("use_incoherent_traffic_light_noises");return e},p=()=>{let e=x(),t=(0,l.rW)(),n=g();return e&&t&&n},h=()=>{let e=(0,s.E6)();return t=>e(t,"compass")},f=()=>{let{value:e}=(0,i.FL)("use_rock_gym_taco_truck");return e},g=()=>{let e=(0,m.ou)(),t=(0,c.ez)(),n=(0,u.te)(r.Fg.GMAIL),s=(0,u.te)(r.Fg.GCAL),{servers:a}=(0,o.cH)(),l=(a||[]).length>0;return e||t||n||s||l},v=e=>{var t;let n=(0,m.qS)(e),s=(0,c.EU)(e),{isAuthenticated:a}=(0,c.oE)(),l=(0,u.j5)(r.Fg.GMAIL,e),{isAuthenticated:i}=(0,u.QD)(r.Fg.GMAIL),x=(0,u.j5)(r.Fg.GCAL,e),{isAuthenticated:p}=(0,u.QD)(r.Fg.GCAL),{servers:h}=(0,o.cH)(),f=!1,g=null!==(t=(0,d.gE)("enabled_mcp_tools"))&&void 0!==t?t:{};for(let e of(null==h?void 0:h.filter(e=>"remote"===e.type&&(e.isConnected||e.isAuthless)))||[])if(e.tools.some(t=>!1!==g[(0,o.q)(e.uuid,t.name)])){f=!0;break}return n||s&&a||l&&i||x&&p||f},j=()=>{let e=f(),t=(0,l.rW)(),n=g();return e&&t&&n},y=(e,t)=>{let{activeOrganization:n}=(0,l.t)(),s=null==n?void 0:n.uuid;return(0,a.uC)("/api/organizations/".concat(s,"/chat_conversations/").concat(e,"/task/").concat(t,"/stop"),"POST",{enabled:!!(s&&e&&t)})}},69672:function(e,t,n){n.d(t,{BF:function(){return v},FQ:function(){return f},aZ:function(){return h},wQ:function(){return g}});var s=n(71817),a=n(76220),l=n(27218),i=n(87033),r=n(30131),o=n(5068),c=n(7653),d=n(41270),u=n(91217),m=n(85465);let x=d.z.object({sticky:d.z.boolean().optional(),defaultOn:d.z.boolean().optional()}),p=()=>{var e;let{account:t}=(0,l.t)(),n=null!==(e=null==t?void 0:t.uuid)&&void 0!==e?e:"unknown",{sticky:s,defaultOn:a}=(0,i.EH)("thinking_sticky_default_on","sticky_and_default_on",{},x),r="sticky-paprika-preference|".concat(n),d=(0,o.useQuery)({queryKey:[r,n],queryFn:()=>{if(!s)return null;let e=localStorage.getItem(r);return"extended"===e?e:"normal"===e?e:null},initialData:null}),u=(0,c.useCallback)(e=>{if(!s){localStorage.removeItem(r);return}e?localStorage.setItem(r,e):localStorage.setItem(r,"normal"),d.refetch()},[s,d,r]);return{stickyThinkingPreference:d.data,setStickyThinkingPreference:u,thinkingDefaultOnEnabled:a}},h=()=>{let{allModelOptions:e}=(0,a.uL)();return t=>{var n;let s=e.find(e=>e.model===t);return!!(null==s?void 0:null===(n=s.paprika_modes)||void 0===n?void 0:n.includes("extended"))}},f=()=>{let e=(0,r.lE)(),t=(0,l.rW)();return!!(e.length&&t)},g=()=>{let e=f(),t=h(),{stickyThinkingPreference:n,thinkingDefaultOnEnabled:a}=p(),{conversation:l,model:i,pendingConversationSettings:r}=(0,u.r)(),o=(0,s.wN)((null==l?void 0:l.id)||null),c=t(null!=i?i:o),d=(0,m.gE)("paprika_mode");if(d)return d;if("paprika_mode"in(null!=r?r:{})){var x;return null!==(x=null==r?void 0:r.paprika_mode)&&void 0!==x?x:null}return e&&c?n?"extended"===n?"extended":null:a?"extended":null:null},v=()=>{let{toggleConversationSetting:e}=(0,m.M0)(),{setStickyThinkingPreference:t}=p();return{toggleExtendedThinkingSetting:function(n){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];s&&t(n),e("paprika_mode",null!=n?n:null)}}}},46200:function(e,t,n){n.d(t,{FD:function(){return c},j9:function(){return m},ou:function(){return d},qS:function(){return u},uH:function(){return o}});var s=n(76220),a=n(27218),l=n(87033),i=n(59016);let r=()=>{let{value:e}=(0,l.FL)("claudeai_web_search_default_on");return e},o=()=>{let{value:e}=(0,l.FL)("claudeai_web_search");return e},c=()=>{var e;let t=(0,a.Cf)(),{data:n}=(0,i.Kg)(),s=!!n&&!(null===(e=n.disabled_features)||void 0===e?void 0:e.includes("web_search"));return!t||s},d=()=>{let e=o(),t=c();return e&&t},u=e=>{var t,n,s;let l=c(),{account:i}=(0,a.t)(),o=r();if(!l)return!1;let d=o?(null==i?void 0:null===(t=i.settings)||void 0===t?void 0:t.enabled_web_search)!==!1:!!(null==i?void 0:null===(n=i.settings)||void 0===n?void 0:n.enabled_web_search);return e?!!(null==e?void 0:null===(s=e.conversationSettings)||void 0===s?void 0:s.enabled_web_search):d},m=e=>(0,s.E6)()(e,"web_search")},61377:function(e,t,n){n.d(t,{F4:function(){return c}});var s=n(5362),a=n(27218),l=n(13262),i=n(10228),r=n(2949);let o=e=>[i.co.CREATED,i.co.PENDING,i.co.UPDATING].includes(e),c=()=>{let e=(0,r.EU)(),t=(0,r.r7)(),n=(0,r.ez)(),{data:s}=d(i.Fg.GDRIVE),a=null==s?void 0:s.state;return!!(e&&t&&n&&a&&[i.co.CREATED,i.co.UPDATING,i.co.PENDING].includes(a))},d=e=>{let{account:t,activeOrganization:n}=(0,a.t)(),i=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid;return(0,s.WE)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.dY,{orgUuid:r,accountUuid:i,syncSourceType:e}],enabled:!!n,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},35102:function(e,t,n){n.d(t,{B4:function(){return r},i7:function(){return o},jL:function(){return i}});var s=n(87033),a=n(7653);let l=(0,a.createContext)({enabled:!1,sharedResources:{},selectedResource:null,setSelectedResource:()=>void 0,isActive:!1,orgUuid:""}),i=()=>{var e;return null!==(e=(0,a.useContext)(l).enabled)&&void 0!==e&&e},r=()=>(0,a.useContext)(l).isActive,o=()=>(0,s.FL)("claudeai_tiny_pancakes").value},21878:function(e,t,n){n.d(t,{K:function(){return i}});var s=n(19170),a=n(27218),l=n(7653);function i(){let{mutate:e,isPending:t}=(0,s.Ck)(),{account:n}=(0,a.t)();return{dismiss:(0,l.useCallback)(t=>{var s;n&&e({...n.settings,dismissed_claudeai_banners:[...(null==n?void 0:null===(s=n.settings)||void 0===s?void 0:s.dismissed_claudeai_banners)||[],{banner_id:t,dismissed_at:new Date().toISOString()}]})},[n,e]),isDismissed:(0,l.useCallback)(e=>{var t,s;return(null==n?void 0:null===(s=n.settings)||void 0===s?void 0:null===(t=s.dismissed_claudeai_banners)||void 0===t?void 0:t.some(t=>t.banner_id===e))||!1},[n]),isPending:t}}},70943:function(e,t,n){n.d(t,{x:function(){return lk}});var s,a,l,i,r,o,c=n(41596),d=n(27573),u=n(9788),m=n(69321),x=n(87033),p=n(10607),h=n(8927),f=n(68425),g=n(7653),v=n(40950),j=n(77879),y=n(66605),b=n(12099),w=n(76220),k=n(6766),N=n(27218),M=n(70354),C=n(6385),S=n(53949),E=n(10228),_=n(65683),Z=n(97695),I=n(45790),z=n(8905),A=n(92676),T=n(61377),D=n(23098),O=n(47082);function R(e){let{warning:t,placement:n,theme:s}=e;return(0,d.jsx)(h.M,{children:t&&(0,d.jsx)(f.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,d.jsx)("div",{className:(0,p.Z)("border-0.5 relative z-[5] px-3.5","bottom"===n?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===s,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===s,"bg-bg-200 border-border-300":"info"===s}),children:t})})})}var L=n(91217),F=n(58183),P=n(43290),U=n(67311),H=n(49185),G=n(27895),K=n(11607),B=n(52939),V=n(29670),Y=n(40287),W=n(33209),q=n(2723),J=n(67587),Q=n(32151),X=n(5984);function $(e){let{onReady:t,children:n,onSuccess:s}=e,a=(0,Q.useStripe)(),l=(0,Q.useElements)(),{account:i}=(0,N.t)(),[r,o]=(0,g.useState)(null),[c,u]=(0,g.useState)(!1),[m,x]=(0,g.useState)(!1),{mutateAsync:p}=(0,z.RF)(),h=async()=>{if(!c&&a&&l){u(!0);try{let e=await l.submit();if(e.error){e.error.message&&o(e.error.message);return}let t=await p(),{error:n}=await a.confirmPayment({elements:l,clientSecret:t.clientSecret,redirect:"if_required"});(null==n?void 0:n.message)&&"validation_error"!==n.type&&o(n.message),n||s()}catch(e){o(e.message)}finally{u(!1)}}};return(0,d.jsxs)(X.l0,{onSubmit:()=>{c||h()},children:[(0,d.jsx)(Q.PaymentElement,{id:"payment-element",options:{readOnly:c,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==i?void 0:i.email_address,name:null==i?void 0:i.full_name}}},onReady:()=>{x(!0),t&&t()}}),r&&(0,d.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:r}),(0,d.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[n,(0,d.jsx)(M.z,{type:"submit",loading:c,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!m,children:(0,d.jsx)(I.Z,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,d.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,d.jsx)(I.Z,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function ee(e){let{amount:t,currency:n,children:s,className:a,onSuccess:l}=e,i=(0,W.x2)(),[r,o]=(0,g.useState)(!0),{theme:c,mode:u}=(0,J.F)(),m=(0,Y.f)().get(C.cn.COLOR_MODE),x={fontSizeBase:"16px",colorBackground:(0,q.J)(c,u,m,"bg-000"),colorText:(0,q.J)(c,u,m,"text-100")},h={mode:"payment",amount:t,currency:null==n?void 0:n.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:x}};return(0,d.jsxs)("div",{className:(0,p.Z)("relative",a),children:[(0,d.jsx)("div",{className:(0,p.Z)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":r}),children:(0,d.jsx)(Q.Elements,{options:h,stripe:i,children:(0,d.jsx)($,{onReady:()=>o(!1),onSuccess:l,children:s})})}),r&&(0,d.jsx)(et,{})]})}let et=()=>(0,d.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,d.jsx)(K.Loading,{})});function en(e){var t,n;let s,{isOpen:a,onClose:l,conversationUUID:i}=e,r=(0,G.e)(),{activeOrganization:o}=(0,N.t)(),c=(0,H.n)(),u=(0,g.useCallback)(()=>{r.addSuccess((0,d.jsx)(I.Z,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==o?void 0:o.uuid)&&i&&c({type:"within_limit"},o.uuid,i),l()},[null==o?void 0:o.uuid,i,l,r,c]),{data:m,isLoading:x}=(0,z.w3)();return m&&(s=(0,V.xG)(m.price+(null!==(t=m.taxAmount)&&void 0!==t?t:0),m.currency,{preferWholeNumber:!0})),(0,d.jsx)(B.u_,{isOpen:a,onClose:l,title:(0,d.jsx)("div",{className:"text-text-200 font-copernicus text-xl font-medium tracking-tight mt-2",children:(0,d.jsx)(I.Z,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,d.jsx)("div",{className:"flex flex-col px-5 gap-2",children:x||!m?(0,d.jsx)(K.Loading,{size:"sm"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:s}),null===m.taxAmount&&(0,d.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,d.jsx)(I.Z,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,d.jsx)(I.Z,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,d.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,d.jsx)(I.Z,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,d.jsx)(ee,{amount:m?m.price+(null!==(n=m.taxAmount)&&void 0!==n?n:0):500,currency:(null==m?void 0:m.currency)||"USD",onSuccess:u})]})})}function es(e){let{messageLimit:t,placement:n,defaultWarning:s,defaultTheme:a}=e,l=(0,F.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return l&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,d.jsx)(R,{theme:"pro",placement:n,warning:(0,d.jsx)(el,{messageLimit:t})}):l&&"approaching_limit"===t.type?(0,d.jsx)(R,{theme:"info",placement:n,warning:(0,d.jsx)(ea,{messageLimit:t})}):(0,d.jsx)(R,{theme:a,warning:s,placement:n})}let ea=e=>{let{messageLimit:t}=e,[n,s]=(0,g.useState)(!1);return(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,d.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,d.jsx)("div",{children:(0,d.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,d.jsx)(I.Z,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,d.jsx)(I.Z,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,d.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,d.jsx)(M.z,{variant:"unstyled",className:(0,p.Z)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{s(!0)},children:(0,d.jsx)(I.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,d.jsx)(en,{isOpen:n,onClose:()=>s(!1),conversationUUID:t.conversationUUID})]})},el=e=>{let{messageLimit:t}=e,n=P.ou.fromSeconds(t.resetsAt),[s,a]=(0,g.useState)(!1);return(0,d.jsxs)(U.P,{minimalUi:!0,actionButton:(0,d.jsxs)(M.z,{variant:"unstyled",size:"sm",className:(0,p.Z)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-styrene transition-colors hover:bg-accent-pro-200"),onClick:()=>{a(!0)},children:[(0,d.jsx)(I.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,d.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,d.jsx)(I.Z,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,d.jsx)(I.Z,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,d.jsx)("span",{className:"inline-block",children:n.toLocaleString(P.ou.TIME_SIMPLE)})}}),(0,d.jsx)(en,{isOpen:s,onClose:()=>a(!1),conversationUUID:t.conversationUUID})]})},ei=e=>{let t=(0,D.nR)(e),n=(0,D.mo)();return void 0!==t&&t>n};var er=n(90377),eo=n(3053),ec=n(81695),ed=n(41270);let eu=ed.z.object({warningCount:ed.z.number().optional(),blockInputCount:ed.z.number().optional()}),em={};function ex(e){let{onDismiss:t}=e,n=(0,eo.z$)(),s=(0,ec.useRouter)();(0,g.useEffect)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:loaded"})},[n]);let a=(0,g.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:accepted"}),s.push("/chats")},[n,s]),l=(0,g.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:dismissed"}),t()},[n,t]);return(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-1",children:(0,d.jsx)(I.Z,{defaultMessage:"<bold>Tip:</bold> <span>Long chats cause you to reach your usage limits faster.</span>",id:"Kq9VxBpVQk",values:{bold:e=>(0,d.jsx)("b",{children:e}),span:e=>(0,d.jsx)("span",{children:e})}})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:"text-text-100 font-medium hover:underline",onClick:a,children:(0,d.jsx)(I.Z,{defaultMessage:"Start a new chat",id:"c/Hjsh8c90"})}),"\xa0",(0,d.jsx)(M.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:l,children:(0,d.jsx)(_.X,{size:12})})]})]})})}var ep=n(88146);function eh(){let e=(0,N.cs)(),t=(0,v.Z)();return(0,d.jsx)(U.P,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,d.jsx)(I.Z,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,d.jsx)(ep.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,d.jsx)(I.Z,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var ef=n(82056);let eg=()=>{let e=(0,ef.F)({allowSelfUpgrade:!1});return(0,d.jsx)(U.P,{actionButton:e,children:(0,d.jsx)(I.Z,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var ev=n(85465),ej=n(48894);let ey=e=>{let{className:t,...n}=e;return(0,d.jsx)("a",{className:(0,p.Z)("text-text-100 font-medium hover:underline",t),...n})},eb=e=>{var t;let n,{inaccessibleSyncSources:s}=e,{chatResourceState:a}=(0,O.Y)(),l=(0,ev.lP)(),{isDrawerExpanded:i,setIsDrawerExpanded:r}=(0,ej.b)(),o=s.every(e=>e.status.state===E.co.UNAUTHENTICATED)&&1===new Set(s.map(e=>e.type)).size,c=null===(t=s[0])||void 0===t?void 0:t.type,u=(0,d.jsx)("button",{onClick:()=>{r(!0)},children:(0,d.jsx)(ey,{children:(0,d.jsx)(I.Z,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:s.length}})})});return o&&null!==c?n=(0,d.jsx)("button",{onClick:()=>l(c),children:(0,d.jsx)(ey,{children:(0,d.jsx)(I.Z,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:E.hP[c]}})})}):a.conversationUUID&&!i&&(n=u),(0,d.jsx)(er.A,{children:(0,d.jsx)(I.Z,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:n}})})},ew=ed.z.array(ed.z.object({text:ed.z.string(),href:ed.z.string().optional(),button:ed.z.boolean().optional()})).nullable();function ek(e){let{messageComponents:t}=e;return(0,d.jsx)(er.A,{children:(0,d.jsx)(eN,{messageComponents:t})})}function eN(e){let{messageComponents:t}=e;return(0,d.jsx)("div",{children:t.map((e,t)=>e.button?(0,d.jsx)(M.z,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,d.jsx)(ep.default,{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,d.jsx)("span",{children:e.text},t))})}var eM=n(7418),eC=n(5161),eS=n(95899),eE=n(4746);function e_(e){let{isOpen:t,setIsOpen:n,files:s,isNewConversation:a}=e,l=(0,v.Z)();return(0,d.jsxs)(B.u_,{isOpen:t,hasCloseButton:!0,title:l.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>n(!1),children:[(0,d.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,d.jsx)("div",{children:(0,d.jsx)(I.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,d.jsx)("ul",{className:"list-disc pl-4",children:s.map(e=>(0,d.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,d.jsx)("div",{children:a?l.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):l.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,d.jsx)(B.dm,{layout:"right",children:(0,d.jsx)(B.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,d.jsx)(I.Z,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function eZ(e){let{files:t,isNewConversation:n}=e,{track:s}=(0,eo.z$)(),{openFeaturePreviewModal:a}=(0,eE.h9)(),[l,i]=(0,g.useState)(!1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e_,{isOpen:l,setIsOpen:i,isNewConversation:n,files:t}),(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,d.jsx)("div",{children:(0,d.jsx)(I.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,d.jsx)("a",{className:"underline",href:"#",onClick:()=>i(!0),children:e})}})}),(0,d.jsx)("div",{children:(0,d.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{s({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),a()},children:(0,d.jsx)(I.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var eI=n(28803);let ez=e=>{let{className:t,...n}=e;return(0,d.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...n})};function eA(){let e=(0,eI.$H)("push");return(0,d.jsx)(U.P,{actionButton:(0,d.jsx)(ez,{onClick:()=>{e()},children:(0,d.jsx)(I.Z,{defaultMessage:"Start a new chat",id:"c/Hjsh8c90"})}),children:(0,d.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,d.jsx)("div",{className:"flex items-center gap-1",children:(0,d.jsx)(I.Z,{defaultMessage:"Chat ended due to a prompt injection risk.",id:"U5gMpgNc1B"})})})})}var eT=n(2210),eD=n(71817),eO=n(18013),eR=n(80151),eL=n(48912);let eF=ed.z.object({id:ed.z.string(),bodyMd:ed.z.string(),isDismissable:ed.z.boolean(),proUpsell:ed.z.boolean(),alertForModels:ed.z.array(ed.z.string())}).nullable(),eP=e=>{let t=(0,x.Zr)("claude_ai_system_alerts","alert",null,eF),[n,s]=(0,eO.R)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),a=null==t?void 0:t.alertForModels,l=(0,eD.wN)(e);return e&&(!a||a.includes(l))&&t&&!n?{systemAlertFromConfig:{alert:t,component:(0,d.jsx)(eU,{alert:t,setHideAlert:s})}}:{}},eU=e=>{let{alert:t,setHideAlert:n}=e,s=(0,N.w7)(),a=(0,ef.F)();return(0,d.jsxs)(er.A,{children:[(0,d.jsx)(eT.J$,{children:(0,d.jsx)(eL.U,{children:t.bodyMd})}),s&&t.proUpsell&&a,t.isDismissable&&(0,d.jsx)(M.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,d.jsx)(eR.X,{size:12})})]})};var eH=n(35548);let eG=e=>{let t=(0,eH.ZW)(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,eI.$H)("push");return(0,d.jsx)(U.P,{actionButton:(0,d.jsx)(ez,{onClick:()=>n({projectUuid:e.projectUuid}),children:(0,d.jsx)(I.Z,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,d.jsx)(I.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}}):(0,d.jsx)(I.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}})})},eK=()=>(0,d.jsx)(er.A,{children:(0,d.jsx)(I.Z,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})});var eB=n(18409);let eV=e=>{let{conversationUUID:t,conversationTokensSoFar:n,conversationFiles:s,projectKnowledgebaseTokens:a,input:l,attachments:i,syncSourceUuids:r,chatInputModel:o}=e;a=null!=a?a:0;let c=s.filter(e=>e.file_kind===S.Y.Image),d=n+(0,eH.hn)(c)+s.filter(e=>e.file_kind===S.Y.SanitizedDocument).reduce((e,t)=>e+(0,eH.ZJ)(t),0)+a,u=(0,eH.y1)(l,c,i),m=d+u+(0,y.fg)(r),x=(0,eB.e)(t,o),p=null;return d>x?p="exceeded":m>x&&(p="will-exceed"),[p,{conversationTokens:d,msgTokens:u,totalTokens:m,maxConversationTokens:x}]},eY=e=>{let t;let n=(0,eI.$H)("push"),{tokenTotals:s,numAttachments:a,projectKnowledgebaseTokens:l}=e,{msgTokens:i,totalTokens:r,maxConversationTokens:o}=s,c=null!=l?l:0,u=(0,eH.ZW)(c,o),m=r/o-1;return t=a&&u?(0,d.jsx)(I.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:a}}):a?(0,d.jsx)(I.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:a}}):u?(0,d.jsx)(I.Z,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,d.jsx)(I.Z,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,d.jsx)(er.A,{children:(0,d.jsxs)("span",{children:[(0,d.jsx)(I.Z,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*m),link:e=>(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}}),"\xa0",t,"\xa0",i+c<o&&(0,d.jsx)("a",{className:"underline",href:"#",onClick:()=>n({projectUuid:e.projectUuid}),children:(0,d.jsx)(I.Z,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})};var eW=n(68571);let eq=e=>{let{switchToSonnet:t,dismissOpusHint:n,copyText:s,modelName:a}=e;return(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-1",children:s}),(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,d.jsx)(I.Z,{defaultMessage:"Switch to {modelName}",values:{modelName:a},id:"1APwtKAkCy"})}),"\xa0",n&&(0,d.jsx)(M.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:n,children:(0,d.jsx)(_.X,{size:12})})]})]})})},eJ=e=>{var t,n,s,a,l,i,r,o,c,u,m,p,h,f,v,j,y,b,M,_,F,P,U,H,G;let K,{placement:B}=e,{prompt:V,model:Y,setModel:W,attachments:q,conversation:J,projectUuid:Q,syncSourceUuids:X,files:$}=(0,L.r)(),ee=(0,D.nR)(Q),et=!function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,eI.cE)(t||""),s=null==n?void 0:null===(e=n.chat_messages)||void 0===e?void 0:e.slice(-1)[0];return!!s&&"assistant"===s.sender&&"prompt_injection_risk"===s.stop_reason}(null==J?void 0:J.id)?null:(0,d.jsx)(eA,{}),[en,ea]=eV({conversationUUID:null!==(n=null==J?void 0:J.id)&&void 0!==n?n:null,conversationTokensSoFar:null!==(s=null==J?void 0:J.tokensSoFar)&&void 0!==s?s:0,conversationFiles:(null!==(a=null==J?void 0:J.files)&&void 0!==a?a:[]).concat($),projectKnowledgebaseTokens:null!==(l=null==J?void 0:J.projectKnowledgebaseTokens)&&void 0!==l?l:ee,input:V,attachments:q,syncSourceUuids:X,chatInputModel:Y}),{exceededMessageLimitWarning:el,approachingMessageLimitWarning:eo,messageLimit:ec}=(0,eM.k)(null!==(i=null==J?void 0:J.id)&&void 0!==i?i:null),ed="exceeded"===en?(0,d.jsx)(eG,{projectKnowledgebaseTokens:null!==(r=null==J?void 0:J.projectKnowledgebaseTokens)&&void 0!==r?r:0,maxConversationTokens:ea.maxConversationTokens,projectUuid:Q}):null,{isRavenCanceled:ep}=(0,z.pV)(),ef=ep?(0,d.jsx)(eh,{}):void 0,ev=(0,N.uh)()?(0,d.jsx)(eg,{}):void 0,ej=(()=>{let{chatResourceState:e}=(0,O.Y)();return[...e.syncSources||[],...(0,A.yg)(Q).data||[]].filter(e=>{var t;return E.qC.includes(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.state)})})(),ey=ej.length?(0,d.jsx)(eb,{inaccessibleSyncSources:ej}):void 0,{value:eN}=(0,x.FL)("sonnet_3_7_500k"),{allModelOptions:eE}=(0,w.uL)();K=eN?"claude-3-7-sonnet-20250219":"claude-3-5-sonnet-20241022";let e_=null!==(o=null===(t=eE.find(e=>e.model===K))||void 0===t?void 0:t.name)&&void 0!==o?o:"Sonnet",{setStickyModelPreference:ez}=(0,k.M)(),eT=(0,eB.c)(K),eD=(null==Y?void 0:Y.toLowerCase())!==K.toLowerCase()&&("exceeded"===en||"will-exceed"===en)&&ea.totalTokens<eT,eO=(0,g.useCallback)(()=>{W(K),ez(K)},[W,ez,K]),eR=eD?(0,d.jsx)(eq,{switchToSonnet:eO,modelName:e_,copyText:(0,d.jsx)("span",{children:(0,d.jsx)(I.Z,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,d.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}})})}):void 0,eL="will-exceed"===en?(0,d.jsx)(eY,{tokenTotals:ea,numAttachments:q.length,projectKnowledgebaseTokens:null==J?void 0:J.projectKnowledgebaseTokens,projectUuid:Q}):null,eF=ea.msgTokens<1e5?null:(0,d.jsx)(eK,{}),eU=(0,T.F4)(),eH=(0,N.Cf)(),eJ=eU&&!eH?(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,d.jsx)(Z.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,d.jsx)("span",{children:(0,d.jsx)(I.Z,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,eQ=ei(Q)?(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,d.jsx)(Z.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,d.jsx)("span",{children:(0,d.jsx)(I.Z,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,[eX,e$]=(0,g.useState)(!1),e0=function(e){let{warningCount:t,blockInputCount:n}=(0,x.xQ)("prompt_new_conversation_count",em,eu);return void 0!==e&&void 0!==t&&void 0!==n&&e>=t&&e<n}(null==J?void 0:J.messagesSoFar)&&!eX,e1=e0?(0,d.jsx)(ex,{onDismiss:()=>e$(!0)}):null,{systemAlertFromConfig:e2}=eP(null!==(c=null==J?void 0:J.id)&&void 0!==c?c:null),e5=e2?e2.component:null,e3=function(e,t,n){let{data:s=[]}=(0,eS.pK)(n),a=(0,eC.eh)(),l=[...e,...t?t.files:[],...s].filter(e=>e.file_kind===S.Y.Blob);return!a&&l.length?(0,d.jsx)(eZ,{files:l,isNewConversation:!t}):null}($,J,Q),e7=function(){let e=(0,x.Zr)("claudeai_warning_message","components",null,ew);return e?(0,d.jsx)(ek,{messageComponents:e}):null}(),e4=q.some(e=>e.origin===S.i.URLParameter)?(0,d.jsx)(er.A,{children:(0,d.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,d.jsx)(Z.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,d.jsx)("span",{children:(0,d.jsx)(I.Z,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,e6=null!==(u=null!=et?et:e4)&&void 0!==u?u:null,e8=null!=eQ?eQ:null,e9=null!==(G=null!==(H=null!==(U=null!==(P=null!==(F=null!==(_=null!==(M=null!==(b=null!==(y=null!==(j=null!==(v=null!==(f=null!==(h=null!==(p=null!==(m=null!=e6?e6:e8)&&void 0!==m?m:el)&&void 0!==p?p:eR)&&void 0!==h?h:ed)&&void 0!==f?f:ef)&&void 0!==v?v:ev)&&void 0!==j?j:ey)&&void 0!==y?y:eL)&&void 0!==b?b:e3)&&void 0!==M?M:eF)&&void 0!==_?_:e1)&&void 0!==F?F:e5)&&void 0!==P?P:eJ)&&void 0!==U?U:e7)&&void 0!==H?H:eo)&&void 0!==G?G:null,te=e2&&e2.alert.proUpsell||e0,tt=!!(el||e3||eJ||eo),tn=te?"pro":tt?"info":"danger",ts=(0,N.ZJ)(),ta=(0,N.ue)();return!e8&&ec&&(ts||ta)&&(eo||el)&&!eW.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,d.jsx)(es,{messageLimit:ec,defaultWarning:e9,defaultTheme:tn,placement:B}):(0,d.jsx)(R,{warning:e9,placement:B,theme:tn})};var eQ=n(16282),eX=n(91887),e$=n(96070),e0=n(95606),e1=n(98279);let e2=e=>{let{attachments:t,files:n,syncSourceResults:s,onRemoveAttachment:a,onRemoveFile:l,onRemoveSyncSource:i,isUploadingFile:r,isUploadingSync:o}=e,c=(0,e$.b)();return(0,d.jsxs)("div",{className:(0,p.Z)(c?"flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1":"flex pb-3 pt-2.5 items-end flex-wrap gap-x-1 gap-y-2 px-4","border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0"),children:[t.map((e,t)=>(0,d.jsx)(eQ.mB,{file:e,size:"md",onRemoveFile:()=>a(t),isEditable:!0},t)),n.map((e,t)=>(0,d.jsx)(eQ.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>l(t),isEditable:!0},e.file_uuid)),c?(0,d.jsx)(eX.fz,{isShown:r}):(0,d.jsx)(e0.e,{isShown:r,className:"p-0.5"}),s.map(e=>{let{syncSource:t,uuid:n}=e;return(0,d.jsx)(e1.Q,{uuid:n,syncSource:t,size:"md",onRemove:()=>i(n),isEditable:!0},n)}),c?(0,d.jsx)(eX.fz,{isShown:o}):(0,d.jsx)(e0.e,{isShown:o,className:"p-0.5"})]})},e5=(0,g.createContext)({setOverrideSubmit:()=>!1});var e3=n(1133),e7=n(17845),e4=n(81631),e6=n(10761),e8=n(93785),e9=n(51716),te=n(81165),tt=n(96633),tn=n(19021),ts=n(29860),ta=n.n(ts);let tl=new e6.H$("inputAutocomplete"),ti=()=>({decoration:null,completion:null}),tr=(e,t)=>e6.Y1.atEnd(e).$anchor.pos===t.$anchor.pos,to=e=>{let{editor:t}=e;if(!tr(t.state.doc,t.state.selection))return!1;let n=tl.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},tc=(e,t,n,s)=>{let a=e.getMeta(tl);if(a&&a.prompt===s.doc.textContent&&(t.completion=a),!tr(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let l=document.createElement("span");l.className="text-text-500",l.textContent=t.completion.content;let i=document.createElement("span");i.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",i.textContent="Tab";let r=s.selection.$head.pos,o=tn.p.widget(r,l),c=tn.p.widget(r,i),d=tn.EH.create(s.doc,[o,c]);return t.decoration=d,t},td=e8.hj.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=ta()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,s=await n(t);s&&e.dispatch(e.state.tr.setMeta(tl,{prompt:t,content:s}))}catch(e){}},300);return[new e6.Sy({key:tl,state:{init:ti,apply:tc},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var s;let{state:a}=t,{doc:l}=a;!n.doc.eq(l)&&(null===(s=tl.getState(a).completion)||void 0===s?void 0:s.prompt)!==l.textContent&&l.textContent.length>=3&&e(t,l.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:to})});var tu=n(64295);let tm=e=>0===e.state.selection.$from.parentOffset,tx=e=>"codeBlock"===e.state.selection.$from.parent.type.name,tp=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),th=e=>"heading"===e.state.selection.$from.parent.type.name,tf=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),tg=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),tv=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),tj=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},ty=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},tb=e=>!(e.state.selection.$from.before()>0)&&(ty(e),!0),tw=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(ty(e),!0),tk=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),tN=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),tM=e8.hj.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(tx(t)&&tm(t))&&tk(t)}})}),tC=e8.hj.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(tp(t)&&tm(t))&&tk(t)},ArrowDown:e=>{let{editor:t}=e;return!!(tp(t)&&tj(t))&&tN(t)},ArrowRight:e=>{let{editor:t}=e;return!!(tp(t)&&tj(t))&&tw(t)},ArrowLeft:e=>{let{editor:t}=e;return!!(tp(t)&&tm(t))&&tb(t)}})}),tS=e8.hj.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(th(t)&&tm(t))&&tk(t)},ArrowDown:e=>{let{editor:t}=e;return!!(th(t)&&tj(t))&&tN(t)}})}),tE=e8.hj.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tf(t)&&tj(t))&&tw(t)}})}),t_=e8.hj.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tg(t)&&tj(t))&&tw(t)}})}),tZ=e8.hj.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tv(t)&&tj(t))&&tw(t)}})}),tI=e8.hj.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),tz=e8.hj.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new e6.Sy({key:new e6.H$("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let a=t.clipboardData.getData("text/plain"),l=s.text(a);return e.dispatch(e.state.tr.replaceSelectionWith(l)),!0}}})]}),tA=()=>(0,d.jsx)(e9.T5,{className:"code-block",children:(0,d.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,d.jsx)(e9.ms,{as:"code"})})}),tT=e=>{let{tipTapEditorState:t,setTipTapEditorState:n,onReady:s,placeholder:a,extraEditorAttributes:l={},fetchInputAutocompletion:i}=e,r=[te.Z.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),e7.Z.extend({addNodeView:()=>(0,e9.fW)(tA)}).configure({lowlight:tt.$}),tE,tM,tS,tC,t_,tZ,tz,tI,e4.Z.configure({placeholder:a,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),td.configure({fetchInputAutocompletion:i})];return{editor:(0,e9.jE)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...l}},onCreate:()=>{null==s||s()},autofocus:!(0,e3.tq)()&&"end",extensions:r,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,a=t.getJSON();n((0,tu._B)(a)),s&&t.commands.focus("end")}})}},tD=(0,g.forwardRef)((e,t)=>{let{disabled:n,prompt:s,tipTapEditorState:a,setTipTapEditorState:l,placeholder:i,onSubmit:r,onReady:o,onFocus:c,onBlur:u,placement:m,fetchInputAutocompletion:x}=e,h=(0,v.Z)(),{editor:f}=tT({tipTapEditorState:a,setTipTapEditorState:l,onReady:o,placeholder:i,fetchInputAutocompletion:x}),[j,y]=(0,g.useState)(!1);return(0,g.useImperativeHandle)(t,()=>({setContent(e){e!==s&&(null==f||f.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){f.setOptions({editable:e})},focus(){null==f||f.commands.focus()},getPosition:()=>null==f?void 0:f.state.selection.$anchor,getEditor:()=>f,getIsAtEnd(){if(!f)return;let e=f.state.selection.$anchor.pos;return e6.Y1.atEnd(f.state.doc).$anchor.pos===e}}),[f,s]),(0,g.useEffect)(()=>{null==f||f.setOptions({editable:!n})},[f,n]),(0,g.useEffect)(()=>{if(null!==f&&""!==i){let e=f.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=i,f.view.dispatch(f.state.tr))}},[f,i]),(0,d.jsx)(e5.Provider,{value:{setOverrideSubmit:y},children:(0,d.jsx)(e9.kg,{"aria-label":h.formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),className:(0,p.Z)("max-h-96 w-full overflow-y-auto break-words","bottom"===m?"min-h-[1.5rem]":"min-h-[3rem]"),editor:f,onKeyDownCapture:e=>{"Enter"===e.key&&(!r||j||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,e3.tq)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),r(e)))},onFocus:c,onBlur:u})})});tD.displayName="PromptInput";var tO=n(26525),tR=n(2949),tL=n(70712),tF=n(56767);let tP=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n,prompt:s}=(0,L.r)(),a=(0,tR.Aj)(),{addError:l}=(0,G.e)(),i=(0,v.Z)(),{mutate:r}=(0,y.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),l((0,tF.A)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:o,initDriveAuth:c}=(0,tR.nC)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of s.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,tL.g)(e);t&&u(t,!0)}}}),u=(0,g.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a||n){if(!o&&!n){l((0,d.jsx)("span",{children:(0,d.jsx)(I.Z,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,d.jsx)("button",{className:"underline",onClick:c,children:e})}})}));return}if(t){l(i.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:tO.Qe}));return}r({sync_source_type:E.Fg.GDRIVE,sync_source_config:{uri:e}})}},[a,o,t,r,c,l,i]);return u};var tU=n(87683),tH=n(5362),tG=n(45144);let tK=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,L.r)(),{failedStreamRetryData:s,setFailedStreamRetryData:a}=(0,eD.Qk)();(0,g.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),n(s.files),a(null))},[s,t,a,n,e])};var tB=n(35919),tV=n.n(tB);function tY(){let e=(0,c._)(["\n  flex\n  flex-row\n  gap-2\n  justify-between\n  items-center\n  p-6\n  -mx-1\n  sm:mx-0\n  transition-all\n  focus-within:border-border-200\n  relative\n  z-[5]\n"]);return tY=function(){return e},e}function tW(e){let{onDismiss:t,projectUuid:n}=e,s=(0,eo.z$)(),a=(0,ec.useRouter)();(0,g.useEffect)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:loaded"})},[s]);let l=(0,g.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:accepted"}),n?a.push("/project/".concat(n)):a.push("/chats")},[s,a,n]),i=(0,g.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:dismissed"}),t()},[s,t]),r=(0,g.useRef)(null),{width:o=0}=(0,j.yU)({ref:r}),c=o<400,u=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("p",{className:"text-sm font-medium",children:(0,d.jsx)(I.Z,{defaultMessage:"The chat is getting long.",id:"bkaK5uVbky"})}),(0,d.jsx)("p",{className:"text-xs",children:(0,d.jsx)(I.Z,{defaultMessage:"Long chats cause you to reach your usage limits faster.",id:"QsXKYzHfxO"})})]}),(0,d.jsxs)("div",{className:(0,p.Z)("flex justify-center",{"text-sm flex-col gap-2 mt-2 w-full":c,"gap-4":!c}),children:[(0,d.jsx)(M.z,{onClick:i,variant:"secondary",children:(0,d.jsx)(I.Z,{defaultMessage:"Continue chat",id:"/XpmIDW6G2"})}),(0,d.jsx)(M.z,{onClick:l,children:(0,d.jsx)(I.Z,{defaultMessage:"Start new chat",id:"KcA+xo4hhh"})})]})]});return(0,d.jsx)(tq,{ref:r,className:(0,p.Z)({"flex-col":c,"mt-6":!c}),children:u})}let tq=u.q.div(tY());var tJ=n(35102);let tQ=e=>{var t,n;let{model:s,projectUuid:a}=e,{allModelOptions:l}=(0,w.uL)(),i=(0,D.nR)(a),r=(null!=i?i:0)>(null!==(n=null===(t=l.find(e=>e.model===s))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==n?n:155e3)?(0,d.jsx)("div",{className:"max-md:hidden",children:(0,d.jsx)(I.Z,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,d.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=r?r:void 0})};var tX=n(45033),t$=n(32737),t0=n(85689),t1=n(96346),t2=n(37141),t5=n(1445),t3=n(69672),t7=n(52165),t4=n(22235);function t6(){let e=(0,c._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  font-medium\n  max-md:absolute\n  max-md:top-1.5\n  max-md:left-2\n  max-md:mt-px\n"]);return t6=function(){return e},e}function t8(){let e=(0,c._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return t8=function(){return e},e}let t9=u.q.div(t6()),ne=u.q.div(t8()),nt=(0,d.jsx)(I.Z,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),nn={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},ns=e=>{var t;let{model:n,currentModelOption:s,opensInNewChat:a,onSelect:l,hasMultiModalContent:i,tag:r,tooltip:o}=e,c=function(){let e=(0,v.Z)();return(0,g.useMemo)(()=>({"claude-3-5-haiku-20241022":e.formatMessage({defaultMessage:"Fastest model for daily tasks",description:"A description of the AI model",id:"75wJbzj8Tm"}),"claude-3-7-sonnet-20250219":e.formatMessage({defaultMessage:"Our most intelligent model yet",description:"A description of the AI model",id:"WW0Apyq96E"})}),[e])}(),u=n.model===(null==s?void 0:s.model),m=(0,t4.g)(n.name,n.model,i);return(0,d.jsx)(t$.u,{tooltipContent:o,children:(0,d.jsxs)(tX.hP,{onClick:()=>{u||l(n)},className:(0,p.Z)("group pr-1 py-1.5"),children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"flex-1 text-sm",children:(0,d.jsx)("div",{className:"flex items-center gap-1.5",children:(0,d.jsx)("div",{children:m})})}),r&&!u&&(0,d.jsx)(t9,{children:r}),!u&&a&&!r&&(0,d.jsx)(ne,{children:(0,d.jsx)(I.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,d.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:null!==(t=c[n.model])&&void 0!==t?t:n.description})]}),u&&(0,d.jsx)(t0.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},na=e=>{let{models:t,currentModelOption:n,opensInNewChat:s,redirectToUpgradePro:a,handleModelSelect:l,hasMultiModalContent:i,upsellMode:r}=e;return(0,d.jsx)(d.Fragment,{children:t.map(e=>(0,d.jsx)(ns,{model:e,currentModelOption:n,opensInNewChat:s,onSelect:r?a:l,hasMultiModalContent:i,tag:r&&e.model!==(null==n?void 0:n.model)?"PRO":void 0,tooltip:r&&e.model!==(null==n?void 0:n.model)?nt:void 0},e.model))})},nl=e=>{let{selectedModel:t,conversationUUID:n,onSelect:s,placement:a,hasMultiModalContent:l,open:i,onOpenChange:r,isNewConversation:o,hideModelNameLogo:c}=e,u=!o,m=(0,ec.useRouter)(),{allModelOptions:h,mainModels:f,overflowModels:v}=(0,w.uL)(),j=(0,eD.wN)(n||null),y=null!=t?t:j,b=(0,g.useRef)(null),C=(0,t3.wQ)(),S=(0,t3.aZ)(),{toggleExtendedThinkingSetting:E}=(0,t3.BF)(),_=(0,t5.wH)(),{toggleConversationSetting:Z}=(0,ev.M0)(),z=h.find(e=>e.model===y);z||(z=nn);let{value:A}=(0,x.FL)("model_selector_enabled"),T=(0,N.rW)(),D=!A&&!T,{setStickyModelPreference:O}=(0,k.M)(),[R,L]=(0,g.useState)(!1),F=()=>{m.push("/upgrade/pro")},P=e=>{A&&(C&&!S(e.model)&&E(null,!1),_(e.model)||Z("compass_mode",null),O(e.model),s(e))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(tX.Lt,{className:(0,p.Z)("!min-w-[17rem] relative"),..."bottom"===a?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:i,onOpenChange:e=>{r&&r(e),e||L(!1)},trigger:(0,d.jsx)("div",{className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,d.jsxs)(M.z,{ref:b,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,p.Z)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1 sm:pl-1.5 sm:pr-1 sm:pt-1 hover:bg-bg-100 hover:border-border-400"),children:[(0,d.jsx)(t7.u,{model:z,hasMultiModalContent:l,hideModelNameLogo:c}),(0,d.jsx)(t1.p,{size:12,className:"text-text-500 shrink-0"})]})}),children:[(0,d.jsx)(na,{models:f,currentModelOption:z,opensInNewChat:u,redirectToUpgradePro:F,handleModelSelect:P,hasMultiModalContent:l,upsellMode:D}),v.length>0&&((0,e3.tq)()?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tX.u2,{}),(0,d.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,d.jsx)(I.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,d.jsx)(na,{models:v,currentModelOption:z,opensInNewChat:u,redirectToUpgradePro:F,handleModelSelect:P,hasMultiModalContent:l,upsellMode:D})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tX.u2,{}),(0,d.jsxs)(tX.Vy,{children:[(0,d.jsxs)(tX.WR,{className:"pl-2 py-1.5 gap-2",children:[(0,d.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,d.jsx)(I.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,d.jsx)(t2.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,d.jsx)(tX.nI,{children:(0,d.jsx)(tX.A2,{sideOffset:4,children:(0,d.jsx)("div",{className:"overflow-y-scroll max-h-80",children:(0,d.jsx)(na,{models:v,currentModelOption:z,opensInNewChat:u,redirectToUpgradePro:F,handleModelSelect:P,hasMultiModalContent:l,upsellMode:D})})})})]})]}))]})})};var ni=n(94872),nr=n(15595),no=n(25075),nc=n(12403);let nd=e=>{let{isOpen:t,onClose:n,onConfirm:s,isLoading:a=!1}=e,l=(0,g.useCallback)(e=>{"Enter"!==e.key||a||s()},[s,a]);return(0,g.useEffect)(()=>(t&&window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[t,l]),(0,d.jsxs)(B.u_,{isOpen:t,onClose:n,title:(0,d.jsx)(I.Z,{defaultMessage:"Want to stop researching?",id:"H+/TRHeeuc"}),children:[(0,d.jsx)("div",{className:"mt-4 mb-6",children:(0,d.jsx)(I.Z,{defaultMessage:"This can’t be undone. If you want to research this topic again, you can ask in this chat or start a new session.",id:"RuV1dagwp6"})}),(0,d.jsxs)(B.dm,{children:[(0,d.jsx)(M.z,{variant:"danger",onClick:s,disabled:a,autoFocus:!0,children:(0,d.jsx)(I.Z,{defaultMessage:"Stop research",id:"l3tljn/kXe"})}),(0,d.jsx)(M.z,{variant:"secondary",onClick:n,children:(0,d.jsx)(I.Z,{defaultMessage:"Keep researching",id:"ODR/0L48DC"})})]})]})},nu=e=>{let{prompt:t,files:n,attachments:s,syncSourceUuids:a,conversation:l,onSend:i,onStop:r,isSending:o,isDisabled:c,disabledReason:u,currentCompassTask:m}=e,x=(()=>{if(m)return"researching";if(l){let{isSampling:e,isStoppingSampling:t}=l;if(e)return t?"stopping":"sampling"}return t.length>0||n.length>0||s.length>0||a.length>0?"drafting":"empty"})();return(0,d.jsx)(h.M,{children:"sampling"===x||"stopping"===x?(0,d.jsx)(nx,{onStop:r,isLoading:"stopping"===x},"stop"):"researching"===x?(0,d.jsx)(nm,{conversationId:null==l?void 0:l.id,taskId:m},"stop_research"):(0,d.jsx)(np,{isSending:o,isDisabled:c,disabledReason:u,onSend:i},"send")})},nm=e=>{let{conversationId:t,taskId:n}=e,s=(0,v.Z)(),[a,l]=(0,g.useState)(!1),{mutate:i,isPending:r}=(0,t5.Le)(t,null!=n?n:""),o=(0,g.useCallback)(()=>{t&&n&&(i(),l(!1))},[t,n,i]),c=(0,g.useCallback)(()=>{l(!0)},[]);return(0,g.useEffect)(()=>{let e=e=>{"Escape"!==e.key||r||l(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t$.u,{tooltipContent:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,d.jsx)(I.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,d.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,d.jsx)(I.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,d.jsx)(M.z,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:c,"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:r?(0,d.jsx)(nr.U,{className:"animate-spin",size:18}):(0,d.jsx)(no.P,{weight:"bold",size:16})})}),(0,d.jsx)(nd,{isOpen:a,onClose:()=>l(!1),onConfirm:o,isLoading:r})]})},nx=e=>{let{onStop:t,isLoading:n}=e,s=(0,v.Z)();return(0,g.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,d.jsx)(t$.u,{tooltipContent:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,d.jsx)(I.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,d.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,d.jsx)(I.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,d.jsx)(M.z,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:n?(0,d.jsx)(nr.U,{className:"animate-spin",size:18}):(0,d.jsx)(no.P,{weight:"bold",size:16})})})},np=e=>{let{isSending:t,isDisabled:n,disabledReason:s,onSend:a}=e,l=(0,v.Z)(),i=(0,g.useCallback)(()=>{(0,ni.bq)("event","msg_sent",{location:"chat_input"}),a()},[a]);return(0,d.jsx)(f.E.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,d.jsx)(t$.u,{tooltipContent:s,children:(0,d.jsx)("div",{children:(0,d.jsx)(M.z,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:n,onClick:()=>i(),"aria-label":l.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,d.jsx)(nr.U,{className:"animate-spin",weight:"bold",size:16}):(0,d.jsx)(nc.a,{weight:"bold",size:16})})})})})};var nh=n(4801),nf=n(98649),ng=n(87801),nv=n(61122),nj=n(9677),ny=n(7992),nb=n(39727);let nw=e=>{let{count:t}=e;return(0,d.jsx)("span",{className:"w-[1.125rem] h-[1.125rem] border-border-300 border-0.5 flex items-center justify-center text-[0.625rem] font-medium bg-accent-secondary-100/[8%] text-accent-secondary-100 rounded-full",children:t})};function nk(){let e=(0,c._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-28\n"]);return nk=function(){return e},e}function nN(){let e=(0,c._)(["\n  flex \n  flex-col  \n  flex-1 \n  min-w-0\n"]);return nN=function(){return e},e}function nM(){let e=(0,c._)(["\n  text-[0.75rem]\n  text-text-500\n  text-ellipsis \n  break-words \n  whitespace-nowrap \n  min-w-0\n  overflow-hidden\n"]);return nM=function(){return e},e}let nC=e=>{let{item:t,onClick:n,isHighlighted:s,onMouseOver:a}=e,l=s&&!(0,e3.r3)(),i={disabled:t.isDisabled,onClick:t.isDisabled?void 0:()=>{null==n||n()},onMouseOver:a},r=t.isDisabled||"pro"===t.tag||"new chat"===t.tag;return"subheader"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsx)(nE,{...i,children:(0,d.jsx)(nz,{children:t.label})})}):"button"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{className:(0,p.Z)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&l&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:l,...i,children:[(0,d.jsx)(n_,{appearsDisabled:r,isHighlighted:l,itemKey:t.key,children:t.icon}),(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{isHighlighted:l,appearsDisabled:r,children:t.label}),(0,d.jsx)(nO,{tag:t.tag})]}),(0,d.jsx)(nD,{className:"!text-text-500 opacity-70",children:t.secondaryText}),t.isExternal&&(0,d.jsx)(ny.O,{size:16,className:"text-text-500 opacity-70"})]})}):"buttonGroup"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{...i,isHighlighted:l,children:[(0,d.jsx)(n_,{appearsDisabled:r,isHighlighted:l,itemKey:t.key,children:t.icon}),(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{isHighlighted:l,appearsDisabled:r,children:t.label}),(0,d.jsx)(nO,{tag:t.tag})]}),(0,d.jsx)(t2.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{...i,isHighlighted:l,children:[(0,d.jsx)(n_,{appearsDisabled:r,isHighlighted:l,itemKey:t.key,children:t.icon}),(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{isHighlighted:l,appearsDisabled:r,children:t.label}),(0,d.jsx)(nO,{tag:t.tag})]}),t.enabledCount>0&&(0,d.jsx)(nw,{count:t.enabledCount}),(0,d.jsx)(t2.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{...i,isHighlighted:l,children:[(0,d.jsx)(n_,{appearsDisabled:r,isHighlighted:l,itemKey:t.key,children:t.icon}),(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{isHighlighted:l,appearsDisabled:r,children:t.label}),(0,d.jsx)(nO,{tag:t.tag})]}),(0,d.jsx)(nD,{children:t.secondaryText}),(0,d.jsx)(t2.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleAll"===t.type||"toggle"===t.type||"switch"===t.type||"option"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{...i,hasSubtitle:!!t.subtitle,className:(0,p.Z)("active:!scale-100",t.isChecked&&"text-primary-500"),isHighlighted:l,children:[(0,d.jsx)(n_,{appearsDisabled:r,isHighlighted:l,itemKey:t.key,children:t.icon}),(0,d.jsxs)(nI,{children:[(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{isHighlighted:l,appearsDisabled:r,children:t.label}),(0,d.jsx)(nR,{tag:t.timeTag}),(0,d.jsx)(nO,{tag:t.tag})]}),(0,d.jsx)(nT,{children:t.subtitle})]}),"toggleAll"===t.type&&(0,d.jsx)(X.XZ,{variant:"minus",disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,p.Z)(r?"!cursor-default":"!opacity-100 !cursor-pointer")}),"toggle"===t.type&&(0,d.jsx)(X.XZ,{disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,p.Z)(r?"!cursor-default":"!opacity-100 !cursor-pointer")}),"switch"===t.type&&(0,d.jsx)(nj.Z,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,p.Z)(!t.isDisabled&&"!cursor-pointer",r&&"opacity-50")}),"option"===t.type&&t.isChecked&&(0,d.jsx)(t0.J,{weight:"bold",size:16,className:"text-accent-secondary-100 shrink-0"})]})}):"divider"===t.type?(0,d.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,d.jsx)(nS,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,d.jsxs)(nE,{...i,isHighlighted:l,children:[(0,d.jsx)(n_,{itemKey:t.key,children:(0,d.jsx)(nb.X,{size:16,className:(0,p.Z)("h-4 w-4 text-text-500 group-hover:!text-text-400",l&&"!text-text-400")})}),(0,d.jsx)("span",{className:"relative",children:(0,d.jsxs)(nZ,{children:[(0,d.jsx)(nA,{className:(0,p.Z)("opacity-100 transition-opacity text-text-500 group-hover:!text-text-400",l&&"!text-text-400"),children:t.label}),(0,d.jsx)(nO,{tag:t.tag})]})})]})}):null},nS=e=>{let{tooltip:t,tooltipImage:n,children:s}=e;n&&(new Image().src=n);let a=(0,d.jsx)("div",{className:"",children:s});return t?(0,d.jsx)(t$.u,{sideOffset:10,contentStyle:n?"sampleImage":"inputMenu",tooltipContent:(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[!!n&&(0,d.jsx)("img",{src:n,alt:"",className:"rounded-[6px] overflow-hidden w-[12.5rem]"}),(0,d.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:a}):a},nE=e=>{let{isHighlighted:t,className:n,hasSubtitle:s,...a}=e;return(0,d.jsx)("button",{...a,className:(0,p.Z)("group flex w-full items-center text-left gap-2.5 py-auto px-1.5 text-[0.875rem] text-text-200 rounded-md transition-colors select-none",t&&!a.disabled&&"!bg-bg-200/50 !text-text-000",n,!a.disabled&&"active:scale-[0.995] hover:bg-bg-200/50 hover:text-text-000",s?"h-[3rem]":"h-[2rem]")})},n_=e=>{let{appearsDisabled:t,isHighlighted:n,itemKey:s,children:a,...l}=e;return(0,d.jsx)("div",{className:(0,p.Z)("group/icon min-w-4 min-h-4 flex items-center justify-center text-text-300 shrink-0",t&&"opacity-50",n&&!t&&"!text-text-100",!t&&"group-hover:text-text-100"),...l,children:a})},nZ=u.q.div(nk()),nI=u.q.div(nN()),nz=e=>{let{className:t,...n}=e;return(0,d.jsx)("p",{...n,className:(0,p.Z)("text-[0.8125rem] text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},nA=e=>{let{appearsDisabled:t,isHighlighted:n,className:s,...a}=e;return(0,d.jsx)("p",{...a,className:(0,p.Z)("text-[0.9375rem] text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",n&&!t&&"!text-text-100",s,t&&"opacity-50",!t&&"group-hover:text-text-100")})},nT=u.q.p(nM()),nD=e=>{let{className:t,...n}=e;return n.children?(0,d.jsx)("p",{...n,className:(0,p.Z)("flex-initial text-right shrink text-[0.875rem] text-accent-secondary-100 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)}):null},nO=e=>{let{tag:t,className:n}=e;return t?(0,d.jsx)("div",{className:(0,p.Z)("uppercase inline-flex items-center text-[0.5625rem] font-medium h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0 will-change-transform",("pro"===t||"new chat"===t)&&"text-text-300 bg-bg-300/60","beta"===t&&"text-accent-secondary-100 bg-accent-secondary-100/[8%]",n),children:t}):null},nR=e=>{let{tag:t,className:n}=e;return t?(0,d.jsx)("div",{className:(0,p.Z)("text-text-500 bg-bg-100 inline-flex items-center text-[0.5625rem] h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",n),children:t}):null},nL=g.forwardRef(e=>{let{indicatorActive:t,disabled:n,text:s,tag:a,buttonClassName:l,tooltip:i,hideIndicatorText:r,icon:o,showRemoveIcon:c,showCaretIcon:u,...m}=e,x=(0,d.jsx)(f.E.div,{layout:!0,className:(0,p.Z)("flex",s?"shrink min-w-8":"shrink-0"),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,d.jsxs)(M.z,{variant:"unstyled",size:"unset",className:(0,p.Z)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto",t?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!n&&(t?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),l),disabled:n,...m,children:[o,!!s&&!r&&(0,d.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,d.jsx)("p",{className:"min-w-0 pl-1 text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:s}),!!a&&(0,d.jsx)(nO,{tag:a,className:"!top-0 !ml-1"})]}),u&&(0,d.jsx)(t1.p,{size:12,className:"ml-1 opacity-70"}),!n&&c&&(0,d.jsx)("div",{className:"duration-100 w-0 group-hover:w-3 opacity-0 group-hover:opacity-70 transition-all ml-0 group-hover:ml-1",children:(0,d.jsx)(eR.X,{size:12})})]})});return(0,d.jsx)(d.Fragment,{children:i?(0,d.jsx)(t$.u,{tooltipContent:i,disableHoverableContent:!0,side:"bottom",align:"center",children:x}):x})});nL.displayName="InputMenuButton";var nF=n(53392),nP=n(32006),nU=n(80156),nH=n(20253),nG=n(19132),nK=n(46200),nB=n(40051);let nV=()=>{let{servers:e}=(0,nv.cH)();return!!(null==e?void 0:e.length)},nY=()=>{let e=(0,N.rW)(),t=(0,nK.uH)(),n=nV();return!e&&!t&&!n},nW=()=>{let e=(0,N.rW)(),t=nV();return e||t},nq="inputMenu",nJ=()=>({isDisabled:!0,tooltip:(0,v.Z)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),nQ=e=>{let{actions:t}=e,{conversation:n,model:s}=(0,L.r)(),a=(0,eD.wN)((null==n?void 0:n.id)||null),l=null!=s?s:a,i=nX({actions:t,currentModel:l}),r=n4(),o=n5({actions:t}),c=n3({actions:t}),d=n7({currentModel:l});if(nY())return o;let u=[...c?[c]:[],...d?[d]:[]];return i.length&&(u=u.concat([...u.length?[{key:"divider1",type:"divider",label:""}]:[],...i])),r.length&&(u=u.concat([...u.length?[{key:"divider2",type:"divider",label:""}]:[],...r])),u},nX=e=>{let{actions:t,currentModel:n}=e,s=n$({currentModel:n}),a=n0({currentModel:n}),l=n2({actions:t,currentModel:n}),i=n1({currentModel:n});return[...s?[s]:[],...a?[a]:[],...l?[l]:[],...i?[i]:[]]},n$=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,L.r)(),a=(0,nK.j9)(t),l=(0,nK.uH)(),i=(0,nK.FD)(),r=(0,nK.qS)(s),{toggleConversationSetting:o}=(0,ev.M0)(),c=nJ(),u=n6("web_search");if(!l)return null;let m=r&&a;return{key:"webSearch",type:"switch",label:n.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,d.jsx)(nh.TH,{size:18,className:"-m-[1px]"}),isChecked:m,onClick:()=>o("enabled_web_search",!m),tag:u,...i?a?null:c:{isDisabled:!0,tooltip:n.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}}},n0=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,L.r)(),{toggleConversationSetting:a}=(0,ev.M0)(),l=(0,tR.ez)(),i=(0,w.E6)()(t,"gsuite_tools"),r=(0,tR.EU)(s),{isDriveAuthenticated:o,initDriveAuth:c}=(0,tR.nC)({callerIdentifier:nq,handleAuthSuccess:()=>{a("enabled_bananagrams",!0)}}),u=nJ(),m=n6("drive_search");if(!l)return null;let x={key:"driveSearch",icon:(0,d.jsx)(nP.k6,{size:16}),label:n.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"}),...i?null:u};if(!o)return{...x,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:c};let p=o&&r;return{...x,type:"switch",isChecked:p,onClick:()=>{a("enabled_bananagrams",!p)},tag:m}},n1=e=>{let{currentModel:t}=e,n=(0,v.Z)(),{conversation:s}=(0,L.r)(),{toggleConversationSetting:a}=(0,ev.M0)(),l=(0,nG.te)(E.Fg.GCAL),i=(0,w.E6)()(t,"gsuite_tools"),r=(0,nG.j5)(E.Fg.GCAL,s),{isAuthenticated:o,startAuth:c}=(0,nG.QD)(E.Fg.GCAL,{callerIdentifier:nq,handleAuthSuccess:()=>{a("enabled_foccacia",!0)}}),u=nJ(),m=n6("calendar_search");if(!l)return null;let x={key:"gcal",label:n.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,d.jsx)(nP.tB,{size:16}),...i?null:u};if(!o)return{...x,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:c};let p=o&&r;return{...x,type:"switch",isChecked:p,onClick:()=>{a("enabled_foccacia",!p)},tag:m}},n2=e=>{let{actions:t,currentModel:n}=e,s=(0,v.Z)(),{conversation:a}=(0,L.r)(),{toggleConversationSetting:l}=(0,ev.M0)(),i=(0,nG.te)(E.Fg.GMAIL),r=(0,w.E6)()(n,"gsuite_tools"),o=(0,nG.j5)(E.Fg.GMAIL,a),c=nJ(),u=n6("gmail_search"),{isAuthenticated:m}=(0,nG.QD)(E.Fg.GMAIL,{callerIdentifier:nq,handleAuthSuccess:()=>{l("enabled_sourdough",!0)}});if(!i)return null;let x={key:"gmail",label:s.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,d.jsx)(nP.W9,{size:16}),...r?null:c};if(!m)return{...x,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()}};let p=m&&o;return{...x,type:"switch",isChecked:p,onClick:()=>{l("enabled_sourdough",!p)},tag:u}},n5=e=>{let{actions:t}=e,n=(0,v.Z)(),{personalizedStyle:s}=(0,L.r)(),{personalizedStyleOptions:a}=(0,nB.O)();return[...a.map(e=>{let n=(null==s?void 0:s.key)===e.key;return{key:e.key,type:"option",label:e.name,icon:(0,d.jsx)(nh.z0,{size:18,className:"-m-[1px]"}),onClick:()=>{n?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:n}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,d.jsx)(nh.v3,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},n3=e=>{let{actions:t}=e,n=(0,v.Z)(),s=nW(),{personalizedStyle:a}=(0,L.r)(),l=n5({actions:t}),i=n.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:nf.Mm.STYLES,type:"optionGroup",icon:(0,d.jsx)(nh.z0,{size:18,className:"-m-[1px]"}),label:i,secondaryText:(null==a?void 0:a.isDefault)?void 0:null==a?void 0:a.name,children:[...s?[]:[{type:"back",key:"styles-back",label:i}],...l],indicatorActive:a&&"Default"!==a.key}},n7=e=>{let{currentModel:t}=e,n=(0,v.Z)(),s=(0,t3.wQ)(),a=(0,t3.FQ)(),l=(0,t3.aZ)()(t),{toggleExtendedThinkingSetting:i}=(0,t3.BF)(),{value:r}=(0,x.FL)("model_selector_enabled"),o=nJ();if(!a||!r)return null;let c=n.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),u={key:nf.Mm.EXTENDED_THINKING,type:"switch",label:n.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),icon:(0,d.jsx)(nh.U,{size:18,className:"-m-[1px]"}),isChecked:!!s,indicatorActive:!!s};return l?{...u,onClick:()=>{i(s?null:"extended")},tooltip:c,tooltipImage:"/images/feature-preview/extended-thinking.png"}:{...u,...o}},n4=()=>{var e;let t=(0,v.Z)(),{servers:n}=(0,nv.cH)(),s=null!==(e=(0,ev.gE)("enabled_mcp_tools"))&&void 0!==e?e:{},{toggleMcpToolEnabled:a}=(0,nv.$Y)(),l=(0,nv.si)();return n?n.map(e=>{let n={key:e.uuid,label:e.name,icon:(0,d.jsx)(nF._,{letter:e.name,size:16})};if(!e.isConnected&&!e.isAuthless&&!e.isLoading)return{...n,type:"button",isExternal:!0,secondaryText:t.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>l(e.uuid)};let i=e.tools.map(t=>{let n=(0,nv.q)(e.uuid,t.name),l=!1!==s[n];return{key:n,type:"switch",label:t.name,icon:(0,d.jsx)(nU.v,{size:16}),isChecked:l,onClick:()=>{a(n,!l)}}}),r=i.filter(e=>"switch"===e.type&&e.isChecked).length,o=r>0;return i.length>1?i.unshift({key:"select-all",type:"button",label:o?t.formatMessage({defaultMessage:"Unselect all",id:"ZifbBWYHnJ"}):t.formatMessage({defaultMessage:"Select all",id:"94Fg25VD0N"}),onClick:()=>{a(e.tools.map(t=>(0,nv.q)(e.uuid,t.name)),!o)},skipCloseOnClick:!0}):0===i.length&&i.push({key:"empty",type:"button",label:t.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,d.jsx)(nH.V,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...n,type:"toggleGroup",enabledCount:r,children:i}}):[]},n6=e=>(0,F.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0;var n8=n(88755),n9=n(43311),se=n(76203),st=n(32559),sn=n(89111),ss=n(95586),sa=n(38622);let sl=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,v.Z)(),a=si({actions:t}),l=sc({actions:t}),i=so({actions:t,inputMenuIsOpen:n}),r=sr({actions:t,inputMenuIsOpen:n}),o=sd({actions:t});return[{key:nf.Mm.UPLOAD,type:"button",icon:(0,d.jsx)(nh.Pg,{size:18,className:"-m-[1px]"}),label:s.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:t.onUpload},...a?[a]:[],...l?[l]:[],...i?[i]:[],...o,...r?[{key:"divider1",type:"divider",label:""},r]:[]]},si=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,n8.Q)()||(0,e3.r3)()?null:{key:nf.Mm.ADD_SCREENSHOT,type:"button",icon:(0,d.jsx)(nh.V1,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}},sr=e=>{let{inputMenuIsOpen:t,actions:n}=e,s=(0,v.Z)(),a=nW(),{projectUuid:l,isProjectLocked:i}=(0,L.r)(),r=(0,ss.U)(),{data:o}=(0,st.O3)({enabled:t&&r}),c=(null==o?void 0:o.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>n.onSelectProject(e.uuid),icon:(0,d.jsx)(nh.pj,{size:18,className:"-m-[1px]"}),isChecked:e.uuid===l})))||[],u=null==o?void 0:o.find(e=>e.uuid===l);if(i||!r)return null;let m=s.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:nf.Mm.PROJECTS,type:"optionGroup",icon:(0,d.jsx)(nh.pj,{size:18,className:"-m-[1px]"}),label:m,secondaryText:null==u?void 0:u.name,children:[...a?[]:[{type:"back",key:"projects-back",label:m}],...c,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,d.jsx)(nh.v3,{size:18,className:"-m-[1px]"}),label:s.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>n.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!u}},so=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,v.Z)(),a=nW(),l=(0,tR.Aj)(),{isDriveAuthenticated:i,initDriveAuth:r}=(0,tR.nC)(),{recentDriveDocs:o,isLoading:c}=(0,tR.td)(n);if(!l)return null;let u=s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),m={key:nf.Mm.DRIVE,icon:(0,d.jsx)(nP.j0,{type:E.Fg.GDRIVE,size:16}),label:u};if(!i)return{...m,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:r};let x=c?[{key:"drive-loading",type:"button",label:s.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:o.length?o.slice(0,8).map(e=>{var n;return{key:e.uri,type:"button",label:null!==(n=e.title)&&void 0!==n?n:"Untitled",icon:(0,d.jsx)(nP.j0,{type:E.Fg.GDRIVE,variant:nP.cT.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:s.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...m,type:"buttonGroup",children:[...a?[]:[{type:"back",key:"drive-back",label:u}],...x]}},sc=e=>{let{actions:t}=e,n=(0,v.Z)();return(0,sn.H7)()?{key:nf.Mm.GITHUB,type:"button",icon:(0,d.jsx)(nP.j0,{type:E.Fg.GITHUB,size:16}),label:n.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null},sd=e=>{let{actions:t}=e,n=(0,v.Z)(),{servers:s}=(0,nv.cH)(),a=(0,sa.ff)(),l=(0,sa.Vr)(),i=null==s?void 0:s.filter(e=>e.client&&(e.prompts.length>0||e.resources.length>0));return i?i.map(e=>{let s=e.prompts.map(n=>({key:"prompt-".concat(e.name,"-").concat(n.name),type:"button",icon:(0,d.jsx)(n9.N,{size:16}),label:n.name,onClick:()=>{var s;return(null===(s=n.arguments)||void 0===s?void 0:s.length)?t.onEnterPromptArguments(e.client,n):void l(e.client,n,{})}})),i=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,d.jsx)(se.$,{size:16}),label:t.name,onClick:()=>void a(e.client,t)}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:n.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,d.jsx)(nF._,{letter:e.name,size:16}),children:[...s,...i]}}):[]};async function su(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let a=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));a.width=s.videoWidth*t,a.height=s.videoHeight*t}else a.width=s.videoWidth,a.height=s.videoHeight;let l=a.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,a.width,a.height);let i=a.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}function sm(e){return"default"===e.type?e.key:e.uuid}(s=i||(i={})).CREATE="create",s.CREATE_MANUALLY="create_manually",s.LIST="list",s.EDIT="edit";let sx=e=>{let{setStyleModalOpenWithScreen:t,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:s,setGmailAuthModalIsOpen:a,setCreatePromptArgumentModalIsOpen:l}=e,r=sg(),o=sv(),c=sf(),{openFeaturePreviewModal:d}=(0,eE.h9)(),{checkIsGithubAuthenticated:u,initGithubAuth:m}=(0,sn.Yn)(),{initDriveAuth:x}=(0,tR.nC)();return{onUpload:sh,onAddScreenshot:()=>{r()},openGithubModal:()=>{u().then(e=>{if(!e){m();return}s(!0)})},openGmailAuthModal:()=>{a(!0)},initDriveAuth:x,createDriveSyncSource:sp(),onStyleChange:e=>{o(e)},openStyleModal:()=>{t(i.LIST)},onSelectProject:c,onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:d,onEnterPromptArguments:(e,t)=>{l({isOpen:!0,client:e,prompt:t})}}},sp=()=>{let{addError:e}=(0,G.e)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:n}=(0,L.r)(),{mutate:s}=(0,y.cE)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),n(t=>[...t,e.uuid])},onError:n=>{t(!1),e((0,tF.A)(n))},meta:{noToast:!0}});return e=>s({sync_source_type:E.Fg.GDRIVE,sync_source_config:{uri:e}})},sh=()=>{var e;null===(e=document.getElementById("chat-input-file-upload"))||void 0===e||e.click()},sf=()=>{let{projectUuid:e,setProjectUuid:t}=(0,L.r)();return n=>{e===n?t(void 0):t(n)}},sg=()=>{let{addError:e}=(0,G.e)(),t=(0,v.Z)(),{handleUpload:n}=(0,L.r)();return async()=>{let s=null;try{s=await su({width:1568,height:1568})}catch(n){(0,tG.Tb)(n),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!s)return;let a=new File([await fetch(s.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await n([a])}},sv=()=>{let{setPersonalizedStyle:e}=(0,L.r)(),t=(0,eo.z$)(),{personalizedStyleOptions:n,setStoredStyle:s}=(0,nB.O)();return a=>{let l=n.find(e=>e.key===a);if(!l)return;e(l);let i=sm(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}},sj="chat-input-menu-search-input",sy=()=>{if((0,e3.r3)())return;let e=document.getElementById(sj);e&&e.focus()},sb=e=>{let{currentItems:t,inputMenuIsOpen:n,setInputMenuIsOpen:s,inputMenuSearchQuery:a,setInputMenuSearchQuery:l,path:i,handleUpdatePath:r,highlightedItemKey:o,setHighlightedItemKey:c}=e,d=(0,ec.useRouter)(),u=(0,g.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),r(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null===(t=e.onClick)||void 0===t||t.call(e)}},[s,r]),m=(0,g.useCallback)(e=>{i&&(null==e||e.preventDefault(),r(null),c(i),sy())},[i,c,r]),x=(0,g.useCallback)(e=>{let n;let s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),a=s.findIndex(e=>{let{key:t}=e;return t===o});n="ArrowUp"===e?a>0?a-1:s.length-1:a<s.length-1?a+1:0,c(s[n].key)},[t,o,c]),p=(0,g.useCallback)(e=>{var t,a,i;if(!n){u(e);return}if(!e.isDisabled){if("pro"===e.tag){d.push("/upgrade/pro");return}if(l(""),"back"===e.type){m();return}if("button"===e.type){null===(t=e.onClick)||void 0===t||t.call(e),e.skipCloseOnClick||s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){r(e.key),c(null),sy();return}"option"!==e.type||(null===(a=e.onClick)||void 0===a||a.call(e),e.skipCloseOnClick||s(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null===(i=e.onClick)||void 0===i||i.call(e),sy())}},[m,u,r,n,l,d,s,c]),h=(0,g.useCallback)((e,n)=>{if(!o)return;let s=t.find(e=>{let{key:t}=e;return t===o});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(n.preventDefault(),p(s))},[o,t,p]);return(0,g.useEffect)(()=>{if(!n)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?h(e.key,e):"ArrowLeft"!==e.key||a||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,s,a,x,h,m]),{handleClickItem:p,handleBack:m}};var sw=n(67578),sk=n(86973);let sN={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},sM=e=>{let{actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,pathItems:a,path:l,menuType:i}=e,r=(0,v.Z)(),o=(0,g.useRef)(n),{handleSearchDrive:c,searchedDriveItems:u}=sE({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:i}),{handleSearchProjects:m,searchedProjectItems:x}=sS({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:i,pathItems:a}),{handleFilterMenuItems:p,filteredMenuItems:h}=sC({path:l,inputMenuSearchQuery:n,pathItems:a}),f=(0,g.useCallback)(()=>{p(),m(),c()},[p,m,c]),j=(0,g.useMemo)(()=>ta()(()=>{f()},100),[f]);return((0,g.useEffect)(()=>{if(n&&s&&n!==o.current)return o.current=n,j(),()=>{j.cancel()}},[s,n,j]),h.length||x.length||u.length)?[h,x,u].reduce((e,t,n)=>[...e,...e.length&&t.length?[{key:"divider".concat(n+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:r.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,d.jsx)(sw.Y,{size:18}),onClick:()=>void 0,isDisabled:!0}]},sC=e=>{let{path:t,inputMenuSearchQuery:n,pathItems:s}=e,a=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,g.useState)([]);return"projects"!==t&&"drive"!==t?{handleFilterMenuItems:()=>{let e=n.toLowerCase();if(!e)return a;let t=[];for(let e of a)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}:{handleFilterMenuItems:()=>[],filteredMenuItems:[]}},sS=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:a,menuType:l,pathItems:i}=e,r="projects",o=(0,ss.U)(),c=(i.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t)&&(t===r||!t)&&a&&o&&"plus"===l,[u,m]=(0,g.useState)([]),{data:x}=(0,st.O3)({enabled:c}),p=(0,g.useMemo)(()=>new sk.Z(x||[],{...sN,keys:["name","description"]}),[x]);return c?{handleSearchProjects:()=>{let e=s.toLowerCase();if(!e||!x)return[];m(p.search(e,{limit:t===r?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,d.jsx)(nh.pj,{size:18}),onClick:()=>n.onSelectProject(e.item.uuid)})))},searchedProjectItems:u}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},sE=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:a,menuType:l}=e,i="drive",r=(t===i||!t)&&a&&"plus"===l,o=(0,tR.Aj)(),[c,u]=(0,g.useState)([]),{recentDriveDocs:m}=(0,tR.td)(r),x=(0,g.useMemo)(()=>new sk.Z(m,{...sN,keys:["title"]}),[m]);return o&&r?{handleSearchDrive:()=>{let e=s.toLowerCase();if(!e||!m)return[];u(x.search(e,{limit:t===i?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,d.jsx)(nP.j0,{type:E.Fg.GDRIVE,variant:nP.cT.DOCS,size:16}),onClick:()=>{n.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:c}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},s_={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:tV(),inputMenuIsOpen:!1,setInputMenuIsOpen:tV(),menuView:{rootItems:[],currentItems:[]},handleClickItem:tV(),handleBack:tV(),highlightedItemKey:null,setHighlightedItemKey:tV(),animationDirection:"none"},sZ={...s_,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:tV(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:tV(),githubModalIsOpen:!1,setGithubModalIsOpen:tV(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:tV(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:tV()},sI=(0,g.createContext)(sZ),sz=(0,g.createContext)(s_),sA=e=>{let{actions:t,rootItems:n,menuType:s,inputMenuIsOpen:a,setInputMenuIsOpen:l}=e,i=(0,g.useRef)(null),[r,o]=(0,g.useState)(null),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(""),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a&&e){l(!0);return}if(a&&!e){m("");let e=()=>{var e;p(null,!0),d(null),l(!1),null===(e=document.getElementById("input-".concat(s,"-menu-trigger")))||void 0===e||e.focus()};t.withDelay?setTimeout(e,200):e()}},p=(e,t)=>{t?i.current=e:i.current=r,o(e)},h=(()=>{if(r){let e=n.find(e=>e.key===r);if(e&&"children"in e)return e.children}return n})(),f=sM({actions:t,inputMenuSearchQuery:u,inputMenuIsOpen:a,pathItems:h,path:r,menuType:s}),v=u.trim().length?f:h,{handleClickItem:j,handleBack:y}=sb({currentItems:v,inputMenuIsOpen:a,setInputMenuIsOpen:x,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,path:r,handleUpdatePath:p,highlightedItemKey:c,setHighlightedItemKey:d}),b=i.current&&!r?"back":!i.current&&r?"forward":"none";return{path:r,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,inputMenuIsOpen:a,setInputMenuIsOpen:x,menuView:{rootItems:n,currentItems:v},handleClickItem:j,handleBack:y,highlightedItemKey:c,setHighlightedItemKey:d,animationDirection:b}};function sT(e){let{children:t}=e,[n,s]=(0,g.useState)(!1),[a,l]=(0,g.useState)(!1),[i,r]=(0,g.useState)(null),[o,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),[x,p]=(0,g.useState)(null),[h,f]=(0,g.useState)(null),v=sx({setStyleModalOpenWithScreen:p,setCreateProjectModalIsOpen:r,setGithubModalIsOpen:c,setGmailAuthModalIsOpen:m,setCreatePromptArgumentModalIsOpen:f}),j=sl({actions:v,inputMenuIsOpen:n}),y=sA({actions:v,rootItems:j,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:s}),b=nQ({actions:v}),w=sA({actions:v,rootItems:b,menuType:"tools",inputMenuIsOpen:a,setInputMenuIsOpen:l});return(0,d.jsx)(sI.Provider,{value:{...y,styleModalOpenWithScreen:x,setStyleModalOpenWithScreen:p,createProjectModalIsOpen:i,setCreateProjectModalIsOpen:r,githubModalIsOpen:o,setGithubModalIsOpen:c,gmailAuthModalIsOpen:u,setGmailAuthModalIsOpen:m,createPromptArgumentModalIsOpen:h,setCreatePromptArgumentModalIsOpen:f},children:(0,d.jsx)(sz.Provider,{value:w,children:t})})}function sD(){return(0,g.useContext)(sI)}function sO(){return(0,g.useContext)(sz)}var sR=n(49167),sL=n(88e3),sF=n(16058),sP=n(30976),sU=n.n(sP),sH=n(34236);function sG(e){var t,n;let{isOpen:s,onClose:a,client:l,prompt:i}=e,r=(0,v.Z)(),o=(0,g.useCallback)(()=>{m({}),a()},[a]),c=(0,sa.Vr)(o),[u,m]=(0,g.useState)({}),x=null==i?void 0:null===(t=i.arguments)||void 0===t?void 0:t.some(e=>e.required&&!u[e.name]);return i&&l?(0,d.jsxs)(B.u_,{title:r.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,d.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[i.name,(0,d.jsx)(sH.D,{text:i.description})]}),isOpen:s,onClose:o,modalSize:"lg",children:[(0,d.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null===(n=i.arguments)||void 0===n?void 0:n.map(e=>(0,d.jsx)("div",{className:"flex flex-col gap-1",children:(0,d.jsx)(X.oi,{required:e.required,label:"".concat(sU()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>m(n=>({...n,[e.name]:null!=t?t:""})),onBlur:()=>{m(t=>{var n;return{...t,[e.name]:(null!==(n=t[e.name])&&void 0!==n?n:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,d.jsxs)(B.dm,{children:[(0,d.jsx)(M.z,{disabled:x,onClick:()=>void c(l,i,u),children:(0,d.jsx)(I.Z,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,d.jsx)(M.z,{variant:"secondary",onClick:o,children:(0,d.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}let sK="https://modelcontextprotocol.io";function sB(e,t){if(!Array.isArray(e))return[];let n=e=>e.split(/(\d+)/).map((e,t)=>{if(t%2==1){let t=parseInt(e,10);return isNaN(t)?e.toLowerCase():t}return e.toLowerCase()}),s=(e,t)=>{if(null===e)return null===t?0:-1;if(null===t)return 1;if("number"==typeof e&&"number"==typeof t)return e-t;let s=String(e),a=String(t),l=n(s),i=n(a);for(let e=0;e<Math.min(l.length,i.length);e++){let t=l[e],n=i[e];if(t!==n){if("number"==typeof t&&"number"==typeof n)return t-n;return String(t).localeCompare(String(n))}}return l.length-i.length};return[...e].sort((e,n)=>{for(let a of t){let t=s(e[a],n[a]);if(0!==t)return t}return 0})}let sV=e=>{let{icon:t,name:n,onClick:s}=e;return(0,d.jsxs)("div",{className:"cursor-pointer p-1.5 transition-colors duration-200 hover:bg-bg-100 flex items-center gap-1.5 text-sm",onClick:s,children:[(0,d.jsx)(t,{size:20,weight:"light"}),"\xa0",(0,d.jsx)("div",{className:"flex-1",children:n})]})},sY=e=>{let{mcpClients:t}=e,{prompts:n,resources:s}=(0,sa.Tz)(t),[a,l]=(0,g.useState)(!1),[i,r]=(0,g.useState)(null),{addError:o}=(0,G.e)(),c=(0,v.Z)(),u=(0,sa.Vr)(()=>{l(!1),r(null)}),m=(0,sa.ff)(),x=(e,t)=>{l(!1),t.arguments&&t.arguments.length>0?r({serverName:e,prompt:t}):f(e,t,{})},h=(e,n)=>{var a;let i=null===(a=s[e])||void 0===a?void 0:a.find(e=>e.uri===n);if(!i){o(c.formatMessage({defaultMessage:"Resource not found: {uri}",id:"JVjYOkR48+"},{uri:n}));return}let r=t[e];if(!r){o(c.formatMessage({defaultMessage:"MCP server not known: {serverName}",id:"lULEBllYjg"},{serverName:e}));return}l(!1),m(r,i)},f=(e,n,s)=>{let a=t[e];if(!a){o("MCP server not known: ".concat(e));return}u(a,n,s)},j=(0,g.useMemo)(()=>[...new Set([...Object.keys(s),...Object.keys(n)])].sort(),[s,n]),y=(0,g.useMemo)(()=>Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e,s=n.getServerVersion();return s?[t,s]:null}).filter(e=>null!==e).sort((e,t)=>{let[n]=e,[s]=t;return n.localeCompare(s)})),[t]);return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(t$.u,{className:"text-center",side:"bottom",tooltipContent:(0,d.jsx)(I.Z,{defaultMessage:"Attach from MCP",id:"CSjaHqajqj"}),children:(0,d.jsx)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>l(!0),children:(0,d.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,d.jsx)(sL.F,{size:16})})})}),(0,d.jsxs)(B.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:(0,d.jsx)(I.Z,{defaultMessage:"Share context with Claude",id:"mtl+vwNNdP"})}),isOpen:a,onClose:()=>l(!1),modalSize:"lg",children:[(0,d.jsx)("p",{className:"text-sm mb-2",children:(0,d.jsx)(I.Z,{defaultMessage:"Claude can receive information like prompts and attachments from specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"X+GLMSGJyU",values:{link:e=>(0,d.jsx)("a",{className:"underline",href:sK,target:"_blank",children:e})}})}),Object.keys(t).length>0?(0,d.jsxs)(d.Fragment,{children:[j.length>0&&(0,d.jsxs)(sF.fC,{children:[(0,d.jsxs)(sF.xz,{className:"bg-bg-300 rounded px-2 py-1 w-fit",children:[(0,d.jsx)(sF.B4,{className:"text-text-000",placeholder:c.formatMessage({defaultMessage:"Choose an integration",id:"5HKIiHkEpc"})}),(0,d.jsx)(sF.JO,{className:"text-text-400 icon",children:(0,d.jsx)(t1.p,{size:16,className:"inline-block ml-2"})})]}),(0,d.jsx)(sF.h_,{children:(0,d.jsx)(sF.VY,{className:"border-0.5 border-border-300 bg-bg-200 min-w-72 rounded-lg p-1 shadow-sm z-dropdown cursor-pointer",position:"popper",side:"bottom",align:"start",sideOffset:4,alignOffset:0,avoidCollisions:!0,collisionPadding:8,children:(0,d.jsx)(sF.l_,{className:"p-2 ",children:(0,d.jsx)(sR.$,{className:"max-h-[40vh] pr-4",children:j.map((e,t)=>{var a,l;return(0,d.jsxs)(sF.ZA,{children:[(0,d.jsx)(sF.__,{className:(0,p.Z)(0===t?"mb-1":"my-1"),children:e}),null===(a=sB(n[e],["name"]))||void 0===a?void 0:a.map(t=>(0,d.jsx)(sV,{icon:n9.N,name:t.name,onClick:()=>x(e,t)},t.name)),null===(l=sB(s[e],["name","uri"]))||void 0===l?void 0:l.map(t=>(0,d.jsx)(sV,{icon:se.$,name:t.name||t.uri,onClick:()=>h(e,t.uri)},t.uri))]},e)})})})})})]}),(0,d.jsx)("div",{className:"mt-4 text-text-400",children:(0,d.jsxs)("details",{children:[(0,d.jsx)("summary",{className:"font-medium mb-2 text-sm cursor-pointer",children:(0,d.jsx)(I.Z,{defaultMessage:"Installed MCP servers",id:"POjUW4Quau"})}),(0,d.jsx)("ul",{children:Object.entries(y).map(e=>{let[t,n]=e;return(0,d.jsxs)("li",{className:"text-xs flex",children:[(0,d.jsx)("div",{className:"flex-1",children:n.name}),(0,d.jsx)("div",{className:"font-extralight",children:n.version})]},t)})})]})})]}):(0,d.jsx)("p",{children:(0,d.jsx)(I.Z,{defaultMessage:"No servers are installed.",id:"ahF6M7bcp3"})})]}),i&&(0,d.jsx)(sG,{isOpen:!!i,onClose:()=>r(null),prompt:i.prompt,client:t[i.serverName]})]})};function sW(e){let{isOpen:t,onClose:n,tools:s}=e;return(0,d.jsxs)(B.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:(0,d.jsx)(I.Z,{defaultMessage:"Available MCP tools",id:"ffDXC8Ezvz"})}),isOpen:t,onClose:n,modalSize:"lg",children:[(0,d.jsx)("p",{className:"text-sm mb-2",children:(0,d.jsx)(I.Z,{defaultMessage:"Claude can use tools provided by specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"Pmlvrp23XB",values:{link:e=>(0,d.jsx)("a",{className:"underline",href:sK,target:"_blank",children:e})}})}),(0,d.jsx)(sR.$,{className:"max-h-[60vh] pr-4",children:s.map(e=>(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,d.jsx)("p",{className:"text-sm text-text-400",children:e.description}),(0,d.jsx)("p",{className:"text-xs text-text-300 mt-1 italic",children:(0,d.jsx)(I.Z,{defaultMessage:"From server: {serverName}",id:"h7f9eQRSUE",values:{serverName:e.serverName}})})]},e.name))})]})}function sq(){let[e,t]=(0,g.useState)(!1),{mcpTools:n}=(0,nv.cH)(),s=(0,g.useMemo)(()=>[...n].sort((e,t)=>e.name.localeCompare(t.name)),[n]);return 0===n.length?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t$.u,{side:"bottom",tooltipContent:(0,d.jsx)("p",{children:(0,d.jsx)(I.Z,{defaultMessage:"{numTools} MCP {numTools, plural, one {tool} other {tools}} available",id:"pw7qRsBAsH",values:{numTools:n.length}})}),children:(0,d.jsxs)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>t(!0),children:[(0,d.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,d.jsx)(nU.v,{size:16})}),(0,d.jsx)("p",{className:"text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden min-w-0",children:n.length})]})}),(0,d.jsx)(sW,{isOpen:e,onClose:()=>t(!1),tools:s})]})}function sJ(){let{mcpClients:e,isEnabled:t}=(0,nv.cH)();return t?(0,d.jsx)(sY,{mcpClients:e}):null}function sQ(){let[e,t]=(0,eO.R)("mcp-enabled-tools",{}),n=(0,g.useCallback)((e,n)=>{Array.isArray(e)?t(t=>({...t,...e.reduce((e,t)=>({...e,[t]:n}),{})})):t(t=>({...t,[e]:n}))},[t]),s=(0,g.useCallback)(t=>!!e[t],[e]),a=(0,g.useCallback)(()=>{let t=Object.entries(e).filter(e=>{let[t,n]=e;return n}).map(e=>{let[t]=e;return t});return 0===t.length?[]:t.map(e=>({type:"remote_mcp_v0",name:e.split(":").slice(-1)[0]}))},[e]);return{enabledTools:e,setEnabledTools:t,toggleTool:n,isToolEnabled:s,getRemoteMcpTools:a}}var sX=n(69500),s$=n(94449);let s0=e=>{let{isOpen:t,onClose:n,mcpEnabled:s}=e,{activeOrganization:a}=(0,N.t)(),{data:l}=(0,s$.j6)(null==a?void 0:a.uuid,s),{enabledTools:i,toggleTool:r,isToolEnabled:o,setEnabledTools:c}=sQ(),u=Object.values(i).filter(Boolean).length;(0,g.useEffect)(()=>{if(!l)return;let e=new Set;l.forEach(t=>{t.tools.forEach(t=>{e.add(t.tool_key)})});let t=Object.keys(i).filter(t=>i[t]&&!e.has(t));if(t.length>0){let e={...i};t.forEach(t=>{delete e[t]}),c(e)}},[l,i,c,t]);let m=(e,t)=>{r(e,t)};return(0,d.jsx)(B.u_,{title:(0,d.jsx)("div",{className:"font-medium mb-4",children:(0,d.jsx)(I.Z,{defaultMessage:"Servers & tools",id:"LSGdc7r+j3"})}),subtitle:(0,d.jsx)("div",{className:"text-sm mb-4",children:(0,d.jsx)(I.Z,{defaultMessage:"{enabledcount} enabled",id:"j2czpHz6uO",values:{enabledcount:u}})}),isOpen:t,onClose:n,modalSize:"xl",children:(0,d.jsx)(sR.$,{className:"max-h-[60vh] pr-4",children:l&&l.length>0?l.map(e=>(0,d.jsx)(s1,{server:e,activeOrganizationUuid:null==a?void 0:a.uuid,isToolEnabled:o,onToggleTool:m},e.server_id)):(0,d.jsx)("p",{className:"text-text-400 text-sm",children:(0,d.jsx)(I.Z,{defaultMessage:"No remote MCP servers found.",id:"mmjarUui7Y"})})})})},s1=e=>{let{server:t,activeOrganizationUuid:n,isToolEnabled:s,onToggleTool:a}=e,l=(0,v.Z)(),{addSuccess:i,addError:r}=(0,G.e)(),{mutate:o,isPending:c}=(0,s$.Us)(n||"",t.server_id,{onSuccess:()=>{i(l.formatMessage({defaultMessage:"Disconnected from server successfully",id:"XMQp6sbYzu"}))},onError:()=>{r(l.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}))}});return(0,d.jsxs)("div",{className:"mb-5 border-b border-border-200 pb-5 last:border-0 last:mb-0 last:pb-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"font-medium",children:t.server_name}),(0,d.jsx)(M.z,{size:"sm",variant:t.is_authenticated?"secondary":"primary",loading:c,className:"text-xs",onClick:()=>{t.is_authenticated?o():window.location.href="".concat(window.location.origin,"/api/organizations/").concat(n,"/mcp/start-auth/").concat(t.server_id)},children:t.is_authenticated?(0,d.jsx)(I.Z,{defaultMessage:"Disconnect",id:"qj1uhzynub"}):(0,d.jsx)(I.Z,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})})]}),(0,d.jsx)("div",{className:"mt-2 space-y-2.5",children:t.tools&&t.tools.map(e=>{let t=e.tool_key;return(0,d.jsxs)("div",{className:"flex items-start gap-2.5 cursor-pointer hover:bg-bg-100/50 py-1.5 px-1.5 -mx-1.5 rounded-md transition-colors",onClick:()=>{a(t,!s(t))},children:[(0,d.jsx)("div",{className:"flex-shrink-0 flex items-center h-full pt-0.5",children:(0,d.jsx)(nj.Z,{checked:s(t),onChange:e=>{a(t,e.target.checked)}})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,d.jsx)("p",{className:"text-xs text-text-400 mt-0.5 break-words",children:e.description})]})]},t)})})]})},s2=()=>{let{activeOrganization:e}=(0,N.t)(),[t,n]=(0,g.useState)(!1),s=(0,nv.ij)(),{data:a}=(0,s$.j6)(null==e?void 0:e.uuid,s),{enabledTools:l}=sQ(),i=(null==a?void 0:a.reduce((e,t)=>e+t.tools.length,0))||0,r=Object.values(l).filter(Boolean).length;return s&&a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t$.u,{side:"bottom",align:"center",tooltipContent:(0,d.jsx)("p",{children:(0,d.jsx)(I.Z,{defaultMessage:"Tools",id:"nUT0LvZVOx"})}),children:(0,d.jsxs)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>n(!0),"data-testid":"mcp-servers-indicator",children:[(0,d.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,d.jsx)(sX.v,{size:16})}),(0,d.jsx)("p",{className:"text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden min-w-0",children:(0,d.jsx)(I.Z,{defaultMessage:"{numEnabledTools} / {numTools}",id:"9mSAgod1ga",values:{numTools:i,numEnabledTools:r}})})]})}),(0,d.jsx)(s0,{isOpen:t,onClose:()=>n(!1),mcpEnabled:s})]}):null},s5=e=>{let{hideIndicatorText:t,hideIndicators:n}=e,s=(0,v.Z)(),{servers:a}=(0,nv.cH)();return n?null:(0,d.jsx)(ng.S,{children:(0,d.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,d.jsx)(s3,{}),(0,d.jsx)(s7,{itemKey:nf.Mm.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),!a&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s2,{}),(0,d.jsx)(sq,{}),(0,d.jsx)(sJ,{})]}),(0,d.jsx)(s4,{hideIndicatorText:t}),(0,d.jsx)(s6,{hideIndicatorText:t})]})})},s3=()=>{let e=(0,v.Z)(),{menuView:{rootItems:t}}=sO(),n=t.find(e=>e.key===nf.Mm.EXTENDED_THINKING),s=(0,x.EH)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,x.gw);return!n||s?null:(0,d.jsx)(s8,{hideIndicatorText:!0,menuItem:n,icon:n.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"})})},s7=e=>{let{itemKey:t,tooltip:n}=e,{menuView:{rootItems:s}}=sD(),{menuView:{rootItems:a}}=sO(),l=[...s,...a].find(e=>e.key===t);return l?(0,d.jsx)(s8,{hideIndicatorText:!0,menuItem:l,icon:l.icon,tooltip:n}):null},s4=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=sO(),s=sv(),a=n.find(e=>"styles"===e.key);return a&&"optionGroup"===a.type?(0,d.jsx)(s8,{hideIndicatorText:t,menuItem:a,icon:(0,d.jsx)(nh.z0,{size:18,className:"-m-[1px]"}),text:a.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},s6=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=sD(),s=sf(),a=n.find(e=>e.key===nf.Mm.PROJECTS);return a&&"optionGroup"===a.type?(0,d.jsx)(s8,{hideIndicatorText:t,menuItem:a,icon:(0,d.jsx)(nh.pj,{size:18,className:"-m-[1px]"}),text:a.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},s8=e=>{let{menuItem:t,handleClick:n,...s}=e,{handleClickItem:a}=sD();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:l}=t,i=!!t.menuItemHidden;return(0,d.jsx)(nL,{onClick:null!=n?n:()=>a(t),indicatorActive:l,disabled:i,showRemoveIcon:!0,...s})},s9=e=>{let{style:t,children:n,duration:s=200,delay:a=0,easing:l="ease-in-out",className:i="",onTransitionEnd:r=()=>void 0}=e,o=(0,g.useRef)(null),[c,u]=(0,g.useState)("auto"),m=(0,g.useRef)(null);return(0,g.useEffect)(()=>{if(o.current)return m.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;u("".concat(e,"px"))}}),m.current.observe(o.current),()=>{m.current&&m.current.disconnect()}},[]),(0,d.jsx)("div",{style:{height:c,transitionDelay:"".concat(a,"ms"),transitionTimingFunction:l,transitionDuration:"".concat(s,"ms"),transitionProperty:"height",...t},className:i,onTransitionEnd:()=>{r()},children:(0,d.jsx)("div",{className:"w-full",ref:o,children:n})})};var ae=n(28386);let at={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},an=e=>{let{anchorRef:t,children:n,side:s,align:a="center",accentColor:l="default",onClose:i,className:r,introDelay:o=0,spacing:c={},buttonText:u,onClickButton:m}=e,x={...at,...c},h=(0,g.useRef)(null),[v,j]=(0,g.useState)(s),[y,b]=(0,g.useState)(a);(0,g.useEffect)(()=>{if(!h.current||!t.current)return;let e=()=>{let{current:e}=h,{current:n}=t;if(!e||!n)return;let s=n.getBoundingClientRect(),a=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=v,o=y,c=0,d=0,u=()=>{c="top"===r?s.top-a.height-x.FROM_ANCHOR:"bottom"===r?s.bottom+x.FROM_ANCHOR:s.top-x.POINTER_OFFSET+.5*s.height-.5*x.POINTER_HEIGHT},m=()=>{if("left"===r)d=s.left-a.width-x.FROM_ANCHOR;else if("right"===r)d=s.right+x.FROM_ANCHOR;else switch(o){case"start":d=s.left-x.FROM_ANCHOR;break;case"center":d=s.left+(s.width-a.width)/2;break;case"end":d=s.right-a.width+x.FROM_ANCHOR}};u(),m(),d<0?"top"===r||"bottom"===r?o="start":r="bottom":d+a.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),c<0?r="bottom":c+a.height>i&&(r="top"),u(),m(),e.style.top="".concat(c,"px"),e.style.left="".concat(d,"px"),r!==v&&j(r),o!==y&&b(o)};e();let n=new ResizeObserver(e);t.current&&(n.observe(t.current),t.current.parentElement&&n.observe(t.current.parentElement));let s=e=>{if(i){var t;(null===(t=h.current)||void 0===t?void 0:t.contains(e.target))||i()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s,{capture:!0}),()=>{n.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s,{capture:!0})}},[v,y,t,i,x.FROM_ANCHOR,x.POINTER_HEIGHT,x.POINTER_OFFSET]);let w={};switch(v){case"right":w={translateX:-x.FROM_ANCHOR,opacity:0};break;case"left":w={translateX:x.FROM_ANCHOR,opacity:0};break;case"bottom":w={translateY:-x.FROM_ANCHOR,opacity:0};break;case"top":w={translateY:x.FROM_ANCHOR,opacity:0}}return(0,d.jsxs)(f.E.div,{ref:h,initial:w,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:o,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,p.Z)("font-styrene text-sm fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===l&&"bg-bg-200 border-border-300","secondary"===l&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",r),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,d.jsx)(as,{side:v,align:y,accentColor:l,spacing:x}),(0,d.jsxs)("div",{className:"flex flex-col gap-4",children:[n,!!u&&!!m&&(0,d.jsx)(M.z,{variant:"outline",className:(0,p.Z)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===l&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{m(),null==i||i()},size:"sm",children:(0,d.jsx)("p",{className:"inline",children:u})})]})]})},as=e=>{let{accentColor:t,side:n,align:s,spacing:a=at}=e,l="fill-bg-200",i="fill-border-300";"secondary"===t&&(l="fill-accent-secondary-900",i="fill-accent-secondary-100/50");let r={};switch(n){case"top":r={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":r={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":r={top:a.POINTER_OFFSET};break;case"left":r={top:a.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===n||"bottom"===n)switch(s){case"start":r.left=a.POINTER_OFFSET;break;case"end":r.left="auto",r.right=a.POINTER_OFFSET}return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:a.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,p.Z)("absolute origin-center pointer-events-none","right"===n&&"right-full"),style:r,children:[(0,d.jsx)("path",{className:l,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,d.jsx)("path",{className:i,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};var aa=n(13473),al=n(21878),ai=n(1399);let ar=e=>{let{anchorRef:t,canShowNux:n,text:s,id:a,nuxItem:l,side:i}=e,{shouldShow:r,dismiss:o}=function(e,t){let{dateAdded:n,priority:s,showAfterOthersDismiss:a}=t,l=(0,g.useContext)(ai.s),{dismiss:i,isDismissed:r}=(0,al.K)();if(!l)throw Error("useNux must be used within a NuxProvider");let{registerNux:o,unregisterNux:c,currentlyShowing:d}=l;return(0,g.useEffect)(()=>{if(!r(e))return o(e,{dateAdded:n,priority:s,showAfterOthersDismiss:a}),()=>c(e)},[e,n,s,a,r,o,c]),{shouldShow:d===e&&!r(e),dismiss:()=>{i(e),c(e)}}}(a,l);return r&&n?(0,d.jsx)(an,{side:i,anchorRef:t,onClose:o,accentColor:"secondary",introDelay:.5,children:(0,d.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,d.jsx)(aa.v,{size:16,className:"text-accent-secondary-200"}),(0,d.jsx)("p",{className:"-my-[2px]",children:s})]})}):null};(a=r||(r={}))[a.HIGH=30]="HIGH",a[a.MEDIUM=20]="MEDIUM",a[a.LOW=10]="LOW",a[a.NONE=0]="NONE";var ao=n(11510);let ac=e=>{let{path:t}=e,n={drive:(0,v.Z)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in n?n[t]:null;return s?(0,d.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,d.jsx)(ao.k,{size:14}),s]}):null};var ad=n(47666),au=n(19186);let am=e=>{let{path:t,inputMenuSearchQuery:n,setInputMenuSearchQuery:s,handleBack:a,className:l}=e,i=(0,v.Z)(),r=(0,e3.r3)(),o={[nf.Mm.DRIVE]:i.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[nf.Mm.PROJECTS]:i.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[nf.Mm.STYLES]:i.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},c=t&&t in o?o[t]:i.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),u=null===t||!!n.trim().length;return(0,d.jsxs)("div",{className:(0,p.Z)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",l),children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(au.Y,{size:18,className:(0,p.Z)("-m-[1px] text-text-500/50 transition-opacity",u?"opacity-100":"opacity-0")}),(0,d.jsx)("button",{onClick:a,className:(0,p.Z)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",u?"opacity-0":"opacity-100"),disabled:u,children:(0,d.jsx)(ad.X,{size:16})})]}),(0,d.jsx)("input",{autoFocus:!r,id:sj,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:c,value:n,onChange:e=>s(e.target.value)})]})};var ax=n(89755),ap=n(60105);let ah=e=>{let{tooltip:t,text:n,tag:s,showCaretIcon:a,indicatorActive:l=!1,hideIndicatorText:i,canShowDot:r,onDoubleClick:o,menuType:c,menuView:u,inputMenuIsOpen:m,setInputMenuIsOpen:x}=e,p=(0,v.Z)(),h=(0,g.useRef)(null),{rootItems:j}=u,y={indicatorActive:l,text:n||"",tooltip:t},b=nY(),w="tools"===c&&b;if(w){y.tooltip=p.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=j.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(y.indicatorActive=!0,y.text=e.label)}let k=j.filter(e=>{let{indicatorActive:t}=e;return t}).length,N=(0,d.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,d.jsx)(f.E.div,{animate:{rotate:m?45:0},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,d.jsx)(ax.v,{size:16})}):"research"===c?(0,d.jsx)(nh.A9,{size:16}):w?(0,d.jsx)(nh.z0,{size:16}):(0,d.jsx)(ap.j,{size:16}),(0,d.jsx)(af,{isShown:r&&k>0})]});return(0,d.jsx)("div",{className:"flex items-center",children:(0,d.jsx)(nL,{tag:s,showCaretIcon:a,hideIndicatorText:!!i,icon:N,id:"input-".concat(c,"-menu-trigger"),ref:h,onClick:()=>{x(!m)},onKeyDown:e=>{m||"Space"!==e.code&&"ArrowDown"!==e.code||x(!0)},onDoubleClick:o?e=>{m||(e.preventDefault(),null==o||o())}:void 0,"aria-expanded":m,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),...y})})},af=e=>{let{isShown:t}=e;return!!t&&(0,d.jsx)(f.E.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,d.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})},ag={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},av=e=>{let{placement:t,canShowDot:n}=e,s=(0,g.useRef)(null),a=(0,v.Z)(),l=sO(),i=(0,nv.tF)();return(0,d.jsxs)("div",{ref:s,children:[(0,d.jsx)(ab,{canShowDot:n,placement:t,menuType:"tools",...l,tooltip:a.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,d.jsx)(ar,{canShowNux:i,anchorRef:s,side:"bottom",text:a.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:r.HIGH,showAfterOthersDismiss:!0}})]})},aj=e=>{let{placement:t,canShowDot:n}=e,s=sD();return(0,d.jsx)(ab,{placement:t,menuType:"plus",canShowDot:n,...s})},ay=e=>{let{hideIndicatorText:t}=e,n=(0,v.Z)(),{conversation:s,model:a,setModel:l}=(0,L.r)(),i=(0,ev.gE)("compass_mode"),{toggleConversationSetting:r}=(0,ev.M0)(),o=(0,t5.Ad)(),c=(0,t5.oc)(),u=(0,t5.hU)(s),x=(0,eD.wN)((null==s?void 0:s.id)||null),p=(0,t5.wH)()(null!=a?a:x),h=(0,t5.wH)()(x),f=c&&!o,g=!s&&!p&&h;return c||o?(p||g)&&u?(0,d.jsx)(nL,{hideIndicatorText:!!t,icon:(0,d.jsx)(nh.A9,{size:18,className:"-m-[1px]"}),onClick:()=>{let e=f?"light":"advanced";g&&e&&l(x),r("compass_mode",i===e?null:e)},indicatorActive:i===(f?"light":"advanced"),text:(0,m.lF)({id:"pig_airpod_pond",intl:n}),tag:"beta"}):(0,d.jsx)(nL,{disabled:!0,tooltip:p?(0,m.lF)({id:"candid_cantaloupe",intl:n}):n.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),hideIndicatorText:!!t,icon:(0,d.jsx)(nh.A9,{size:18,className:"-m-[1px]"}),onClick:tV(),indicatorActive:!1,text:(0,m.lF)({id:"pig_airpod_pond",intl:n}),tag:"beta"}):null},ab=e=>{let{text:t,tag:n,showCaretIcon:s,indicatorActive:a,canShowDot:l,hideIndicatorText:i,tooltip:r,placement:o,menuType:c,path:u,menuView:m,highlightedItemKey:x,setHighlightedItemKey:v,handleClickItem:y,inputMenuIsOpen:b,setInputMenuIsOpen:w,inputMenuSearchQuery:k,setInputMenuSearchQuery:N,handleBack:M,animationDirection:C}=e,{currentItems:S}=m,E=(0,g.useRef)(null),_=(0,g.useRef)(null),Z=(0,g.useRef)(null),[I,z]=(0,g.useState)(void 0),[A,T]=(0,g.useState)("bottom"===o?"top":"bottom"),[D,O]=(0,g.useState)(0);(0,g.useEffect)(()=>{if(!_.current||!Z.current)return;let e=_.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:n}=aw({placement:o,triggerRectTop:e.top,triggerRectBottom:e.bottom});z(Math.min(448,t)),T(n);let s=Z.current.getBoundingClientRect();O(Math.min(0,window.innerWidth-s.right-8))},[o,b]),(0,j.t$)(E,()=>{w(!1)},"mouseup"),(0,j.t$)(E,()=>{w(!1)},"touchend");let R=nW(),L=("plus"===c||"tools"===c)&&R?(0,d.jsx)(am,{path:u,inputMenuSearchQuery:k,setInputMenuSearchQuery:N,handleBack:M}):null;return(0,d.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:E,children:[(0,d.jsx)("div",{ref:_,children:(0,d.jsx)(ah,{tag:n,tooltip:r,text:t,showCaretIcon:s,indicatorActive:a,hideIndicatorText:i,canShowDot:l,menuType:c,menuView:m,inputMenuIsOpen:b,setInputMenuIsOpen:w,onDoubleClick:"plus"===c?()=>sh:void 0})}),(0,d.jsx)("div",{ref:Z,className:(0,p.Z)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===A?"bottom-10":"top-10",b?"block":"hidden"),children:(0,d.jsx)(h.M,{children:b&&(0,d.jsx)(f.E.div,{initial:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===A?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,p.Z)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===A?"flex-col-reverse":"flex-col"),onMouseEnter:()=>v(null),style:{maxHeight:I?"".concat(I,"px"):void 0,left:D},onClick:e=>{e.stopPropagation(),sy()},children:(0,d.jsxs)(s9,{duration:100,className:(0,p.Z)("flex flex-col min-h-0 w-full !ease-out","top"===A?"justify-end":"justify-start"),children:[(0,d.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===A&&L,(0,d.jsx)(f.E.div,{variants:ag[C],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:ae.J.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:S.filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>(0,d.jsx)(nC,{item:e,onClick:()=>y(e),isHighlighted:x===e.key},e.key))},null!=u?u:"root"),"top"===A&&L]}),(0,d.jsx)(ac,{path:u})]})})})})]})},aw=e=>{let{placement:t,triggerRectTop:n,triggerRectBottom:s}=e,a=window.innerHeight-s-8-8;if("bottom"===t){let e=n-76-8;return e<160&&a>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:a}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=n-8-8;return a<160&&e>a?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:a}}},ak=e=>{let{placement:t,isDisabled:n}=e,s=(0,g.useRef)(null),a=(0,v.Z)(),{projectUuid:l,prompt:i,model:r,setModel:o,attachments:c,files:u,syncSourceUuids:m,sendMessage:x,stopSampling:p,conversation:h,isSending:f,isChatSyncing:y,isProjectSyncing:b,isModelSelectorOpen:w,setIsModelSelectorOpen:k,isNewConversation:N,currentCompassTask:M}=(0,L.r)(),C=y||b?a.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,E=(0,g.useMemo)(()=>{var e;return[...u,...null!==(e=null==h?void 0:h.files)&&void 0!==e?e:[]].some(e=>e.file_kind===S.Y.Image||e.file_kind===S.Y.SanitizedDocument)},[u,h]),_=(0,g.useCallback)(e=>o(e.model),[o]),{width:Z=null}=(0,j.yU)({ref:s,box:"border-box"}),I=null===Z||Z<480,z=null===Z||Z<396,A=null!==Z&&Z<440&&!z,T=(0,tJ.jL)();return(0,d.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:s,children:[T?(0,d.jsx)("div",{className:"w-full"}):(0,d.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,d.jsx)(aj,{placement:t,canShowDot:null!==Z&&z}),(0,d.jsx)(av,{placement:t,canShowDot:null!==Z&&z}),(0,d.jsx)(ay,{hideIndicatorText:I}),null!==Z&&(0,d.jsx)(s5,{hideIndicatorText:I,hideIndicators:z}),(0,d.jsx)(tQ,{model:r,projectUuid:l})]}),!T&&(0,d.jsx)(nl,{selectedModel:r,onSelect:_,hasMultiModalContent:E,placement:t,open:w,onOpenChange:k,isNewConversation:N,hideModelNameLogo:A}),(0,d.jsx)(nu,{isSending:f,isDisabled:n,disabledReason:C,prompt:i,files:u,attachments:c,syncSourceUuids:m,conversation:h,currentCompassTask:M,onSend:()=>x(),onStop:()=>p()})]})};var aN=n(35354),aM=n(75502);let aC=()=>{let{onDrop:e}=(0,L.r)();return(0,d.jsx)(aN.rE,{onDrop:e,children:(0,d.jsx)(aS,{})})},aS=()=>{let{dragState:e}=(0,aN.EO)(),t=e===aN.h7.DRAGGING_ON_TARGET;return e===aN.h7.DRAGGING_OFF_TARGET||e===aN.h7.DRAGGING_ON_TARGET?(0,d.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,d.jsx)("div",{className:(0,p.Z)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,d.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,d.jsx)(aM.E,{size:20,className:"opacity-50"}),(0,d.jsx)(I.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})}):null};var aE=n(6688),a_=n(63731);let aZ=e=>{let{moveAttachments:t=!1,handleProjectCreated:n,isOpen:s,handleClose:a,syncSources:l=[],attachments:i=[],setSyncSourceUuids:r,setAttachments:o}=e,[c,u]=(0,g.useState)(null),{addError:m}=(0,G.e)(),x=(0,aE.G)();return aI({project:c,syncSources:l,attachments:i,setSyncSourceUuids:r,setAttachments:o}),(0,d.jsxs)(B.u_,{isOpen:s,onClose:a,modalSize:"xl",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:t?(0,d.jsx)(I.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,d.jsx)(I.Z,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,d.jsx)(M.z,{onClick:a,size:"icon",variant:"ghost",children:(0,d.jsx)(eR.X,{size:16})})]}),s&&(0,d.jsx)(a_.hK,{syncSources:t?l:void 0,onProjectCreated:e=>{t&&u(e),n(e)},onError:m,onCancel:a,strings:x})]})},aI=e=>{let{project:t,syncSources:n,attachments:s,setSyncSourceUuids:a,setAttachments:l}=e,i=(0,g.useRef)(!1),{addSuccess:r}=(0,G.e)(),o=(0,v.Z)(),{mutate:c}=(0,eS.u3)(null==t?void 0:t.uuid),{mutate:d}=(0,A.gr)(null==t?void 0:t.uuid),u=(0,g.useCallback)(()=>{t&&(s.length||n.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:n}=e;c({file_name:t,content:n})}),t.is_private&&(n.forEach(e=>{let t=(0,nG.hJ)(e);t&&d(t)}),a([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,c,l,d,a,n,o]);(0,g.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var az=n(80022),aA=n(42814),aT=n(73107),aD=n(42755),aO=n(34505),aR=n(32598),aL=n(30729),aF=n(64070),aP=n(30947);let aU=()=>{let{addError:e}=(0,G.e)();return{handleRateLimitError:(t,n)=>{t instanceof aP.Hx&&429===t.statusCode?e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}},aH=(0,aF.default)(()=>n.e(8446).then(n.bind(n,38446)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[38446]},ssr:!1}),aG={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},aK=(0,g.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s,animateBoolRef:a}=e,l=(0,v.Z)(),r=(0,eo.z$)(),[o,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)(""),{handleRateLimitError:x}=aU(),{mutateAsync:p}=(0,aA.GB)(),j=(0,g.useRef)(null),y=(0,g.useRef)(null);(0,g.useEffect)(()=>{o&&setTimeout(()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},50)},[o]);let[b,w]=(0,g.useState)(!1),[k,C]=(0,g.useState)(!1),S=(0,g.useRef)(null),E=(0,g.useRef)(null),_=4e3,{handleFileUpload:Z,handleTextUpload:z}=function(e){let[t,n]=(0,g.useState)(!1),{activeOrganization:s}=(0,N.t)(),{addError:a}=(0,G.e)(),l=(0,tH.OJ)();return{handleFileUpload:async i=>{if(t||!s)return;if(n(!0),!(0,eC.dF)(i))try{let t=await (0,eC.CL)(i);await e(t),n(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){a(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async a=>{!t&&s&&0!==a.trim().length&&(n(!0),await e(a),n(!1))},isUploading:t}}(async e=>{try{let t=await p({content_example:e});S.current=t}catch(e){x(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),w(!1)}}),A=()=>{S.current?s(S.current,!0):(_=1e3,E.current=setTimeout(A,_))},T=async()=>{R(),await z(u)},D=async e=>{let t=Array.from(e.dataTransfer.files);t&&(C(!0),setTimeout(R,20),await Z(t[0]))},O=async e=>{let t=e.target.files;t&&(R(),await Z(Array.from(t)[0])),e.target.value=""},R=()=>{w(!0),E.current=setTimeout(A,_)};return(0,d.jsx)(f.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:a.current?aG:{duration:0},children:(0,d.jsxs)(h.M,{mode:"popLayout",children:[b&&(0,d.jsx)(f.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:aG,children:(0,d.jsx)(aV,{})},"CreateStyleAnalyzingContentScreen"),!b&&(0,d.jsxs)(f.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,d.jsxs)(f.E.div,{exit:{opacity:0,y:40,transition:aG},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,d.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,d.jsx)(aH,{})}),(0,d.jsx)("p",{className:"text-text-300 font-tiempos sm:text-lg",children:(0,d.jsx)(I.Z,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,d.jsx)(f.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:aG}},children:o?(0,d.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,d.jsx)("textarea",{ref:y,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:u,onChange:e=>m(e.target.value),required:!0}),(0,d.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,d.jsx)(M.z,{variant:"secondary",onClick:()=>c(!1),children:(0,d.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,d.jsx)(M.z,{onClick:T,children:(0,d.jsx)(I.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,d.jsxs)(aN.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:D,children:[(0,d.jsx)(aB,{showDropCover:k},"DropZoneOverlay"),(0,d.jsx)("input",{ref:j,type:"file",className:"hidden",accept:(0,eC.tB)({imagesEnabled:!1}).join(","),onChange:O,multiple:!0}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(tX.Lt,{trigger:(0,d.jsx)(M.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,d.jsx)(aT.$,{weight:"bold"}),children:(0,d.jsx)(I.Z,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,d.jsx)(tX.hP,{children:(0,d.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{j.current&&j.current.click()},children:[(0,d.jsx)(aD.p,{size:16}),(0,d.jsx)(I.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,d.jsx)(tX.hP,{onClick:()=>c(!0),children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(aO.P,{size:16}),(0,d.jsx)(I.Z,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,d.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,d.jsx)("p",{children:window.innerWidth<=640?(0,d.jsx)(I.Z,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,d.jsx)(I.Z,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,d.jsx)("p",{children:(0,d.jsx)(I.Z,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,d.jsx)("div",{className:"absolute w-full bottom-6",children:(0,d.jsx)(M.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,d.jsx)(aR.x,{}),onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),n(i.CREATE_MANUALLY)},children:(0,d.jsx)(I.Z,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});aK.displayName="CreateStyle";let aB=e=>{let{showDropCover:t}=e,{dragState:n}=(0,aN.EO)(),s=n===aN.h7.DRAGGING_OFF_TARGET||n===aN.h7.DRAGGING_ON_TARGET||t;return(0,d.jsx)(h.M,{children:s&&(0,d.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,p.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===aN.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,d.jsxs)("div",{className:"py-1.5 text-center",children:[(0,d.jsx)("div",{className:"relative inline-block opacity-60",children:(0,d.jsx)(aL.y,{size:36,weight:"thin"})}),(0,d.jsx)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:(0,d.jsx)(I.Z,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},aV=()=>(0,d.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,d.jsx)(aH,{animate:!0}),(0,d.jsx)(f.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,d.jsx)(I.Z,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var aY=n(30028),aW=n(17764),aq=n(99851),aJ=n(24038);let aQ={objective:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aY.V,{})," ",(0,d.jsx)(I.Z,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aJ.E,{})," ",(0,d.jsx)(I.Z,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aW.i,{})," ",(0,d.jsx)(I.Z,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aR.x,{})," ",(0,d.jsx)(I.Z,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,d.jsx)(I.Z,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},aX=(0,g.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s}=e,a=(0,v.Z)(),l=(0,eo.z$)(),[r,o]=(0,g.useState)(!1),[c,u]=(0,g.useState)(""),[m,x]=(0,g.useState)(Object.keys(aQ)[0]),{handleRateLimitError:j}=aU(),{mutateAsync:y}=(0,aA.GB)(),b=(0,g.useRef)(null);(0,g.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.focus()},50)},[m]);let w=c.replace(/\s/g,"").length>24,k=async()=>{if(!r&&w){o(!0);try{let e="custom"===m?{prompt:c}:{input_text:aQ[m].promptPrepend+"\n"+c},t=await y(e);s(t,!1)}catch(e){j(e,a.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},N=e=>{l.track({event_key:"styles.custom.describe_selected",key:e}),x(e)};return(0,d.jsxs)(f.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,d.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,d.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,d.jsx)(I.Z,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,d.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(aQ).map(e=>(0,d.jsx)("li",{children:(0,d.jsxs)("button",{className:(0,p.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",m===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>N(e),children:[(0,d.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:m===e&&(0,d.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),aQ[e].label]})},e))}),(0,d.jsx)("div",{className:"sm:hidden",children:(0,d.jsx)(tX.Lt,{trigger:(0,d.jsx)(M.z,{variant:"ghost",append:(0,d.jsx)(t1.p,{}),className:"w-full !border !border-border-300",children:(0,d.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:aQ[m].label})}),children:Object.keys(aQ).map(e=>(0,d.jsx)(tX.hP,{onSelect:()=>N(e),children:(0,d.jsx)("div",{className:"flex items-center gap-1",children:aQ[e].label})},e))})})]}),(0,d.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,d.jsx)(M.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(i.CREATE),prepend:(0,d.jsx)(aq.D,{}),children:(0,d.jsx)(I.Z,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,d.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),k()},children:[(0,d.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:aQ[m].description}),(0,d.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,d.jsx)("textarea",{ref:b,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:aQ[m].placeholder,value:c,required:!0,onChange:e=>u(e.target.value)}),(0,d.jsx)(h.M,{children:c.length>0&&!w&&(0,d.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,d.jsx)(I.Z,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,d.jsx)(t$.u,{tooltipContent:w?"":a.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,d.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,d.jsx)(M.z,{className:"w-full",type:"submit",loading:r,disabled:!w,children:"custom"===m?(0,d.jsx)(I.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,d.jsx)(I.Z,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});aX.displayName="CreateStyleManually";var a$=n(72538),a0=n(42253),a1=n(7778),a2=n(87896),a5=n(34141),a3=n(26608),a7=n(52681),a4=n(38459);function a6(){let[e,t]=(0,eO.R)("userHiddenStyles",[]),n=(0,g.useCallback)(e=>{let n=sm(e);t(e=>[...e,n])},[t]),s=(0,g.useCallback)(()=>{t([])},[t]),a=(0,g.useCallback)(t=>t.filter(t=>{let n=sm(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:n,resetHiddenPresetStyles:s,filterHiddenStyles:a}}(l=o||(o={})).VIEW="view",l.EDIT="edit",l.EDIT_MANUALLY="edit_manually";let a8=ed.z.array(ed.z.object({key:ed.z.string(),name:ed.z.string(),nameKey:ed.z.string().optional(),text:ed.z.string(),textKey:ed.z.string().optional()})),a9=[],le=()=>(0,x.Zr)("claude_style_previews","previewExamples",a9,a8),lt=e=>{let{isSaveButton:t,children:n}=e;return(0,d.jsx)("div",{className:(0,p.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},ln=(0,g.forwardRef)((e,t)=>{let{animateBoolRef:n,style:s,setCurrentStyle:a,returnToListScreen:l,setChatStyle:i,setIsEditing:r,setIsEditingName:o}=e,c=(0,v.Z)(),u=sm(s),m="default"===s.type,[x,p]=(0,g.useState)("view"),{mutateAsync:h}=(0,aA.fq)(u,m),{handleRateLimitError:j}=aU(),y=async e=>{let{prompt:t,editInput:n}=e;try{let e=await h({prompt:t,edit_instructions:n});e&&a(e)}catch(e){throw j(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{r("edit"===e||"edit_manually"===e),p(e)};return(0,d.jsxs)(f.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===x&&(0,d.jsxs)(lt,{children:[(0,d.jsx)(M.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>i(s),children:(0,d.jsx)(I.Z,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,d.jsx)(lr,{style:s,returnToListScreen:l,onRename:()=>o(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,d.jsxs)(f.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===x&&(0,d.jsx)(ll,{style:s,onClick:()=>b("edit")}),"edit"===x&&(0,d.jsx)(ls,{style:s,updateStyle:y,onClose:()=>b("view")}),"edit_manually"===x&&(0,d.jsx)(la,{style:s,updateStyle:y,onClose:()=>b("view")})]}),(0,d.jsx)(li,{style:s,animateBoolRef:n})]})});ln.displayName="EditStyle";let ls=e=>{let{style:t,updateStyle:n,onClose:s}=e,a=(0,v.Z)(),l=(0,g.useRef)(t.prompt),i=(0,g.useRef)(null),[r,o]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,x]=(0,g.useState)([]),[j,y]=(0,g.useState)(""),b=async e=>{if(e.preventDefault(),r||c)return!1;await w(j)},w=async e=>{y(""),o(!0),x([...m,e]);try{await n({editInput:e})}catch(e){y(j),x(e=>e.slice(0,-1))}o(!1)},k=async()=>{m.length&&(u(!0),await n({prompt:l.current}),u(!1)),s()},N=(0,g.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return[a.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),a.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[n].name.toLowerCase()})]},[t.attributes,a]);return(0,g.useEffect)(()=>{if(m.length>0){var e;null===(e=i.current)||void 0===e||e.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})}},[m,t.summary]),(0,d.jsxs)("div",{className:"h-full flex flex-col",children:[(0,d.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,d.jsxs)("div",{className:(0,p.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",r?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,d.jsx)("div",{className:(0,p.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",r?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,d.jsx)(h.M,{children:r&&(0,d.jsx)(f.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,d.jsx)(a$.p,{state:"thinking"})})})]}),(0,d.jsx)("ul",{ref:i,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:m.map(e=>(0,d.jsx)("li",{children:(0,d.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),m.length>0?(0,d.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,d.jsx)(I.Z,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,d.jsx)(I.Z,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,d.jsx)("ul",{className:"flex flex-col gap-2",children:N.map((e,t)=>(0,d.jsx)("li",{children:(0,d.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,d.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,d.jsx)(X.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:a.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:j,onChange:e=>y(e.target.value),append:(0,d.jsx)(h.M,{children:j.length>0&&(0,d.jsx)(f.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,d.jsx)(M.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:r||c,children:(0,d.jsx)(a0.a,{})})})})})})]}),(0,d.jsxs)(lt,{isSaveButton:!0,children:[(0,d.jsx)(M.z,{onClick:s,disabled:r||c||j.length>0||0===m.length,children:(0,d.jsx)(I.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,d.jsx)(M.z,{onClick:k,disabled:r,loading:c,variant:"secondary",children:m.length>0?(0,d.jsx)(I.Z,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,d.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},la=e=>{let{style:t,updateStyle:n,onClose:s}=e,[a,l]=(0,g.useState)(!1),[i,r]=(0,g.useState)(t.prompt),o=(0,v.Z)(),c=async e=>{e.preventDefault(),l(!0),await n({prompt:i}),l(!1),s()};return(0,d.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,d.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,d.jsx)(I.Z,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,d.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:o.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:i,disabled:a,onChange:e=>r(e.target.value),autoFocus:!0}),(0,d.jsxs)(lt,{isSaveButton:!0,children:[(0,d.jsx)(M.z,{type:"submit",loading:a,children:(0,d.jsx)(I.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,d.jsx)(M.z,{onClick:()=>{r(t.prompt),s()},disabled:a,variant:"secondary",children:(0,d.jsx)(I.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ll=e=>{let{style:t,onClick:n}=e,s="default"===t.type;return(0,d.jsxs)("div",{className:(0,p.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)("div",{className:(0,p.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,d.jsx)(I.Z,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,d.jsx)(I.Z,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,d.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,d.jsx)(t$.u,{className:"text-center",tooltipContent:(0,d.jsx)(I.Z,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,d.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:(0,d.jsx)(I.Z,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,d.jsx)(ao.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,d.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,d.jsx)(m.d7,{id:t.summaryKey}):t.summary})]}),(0,d.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,d.jsx)(I.Z,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,d.jsx)(M.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,d.jsx)(a7.A,{weight:"bold"}),children:(0,d.jsx)(I.Z,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},li=e=>{let{style:t,animateBoolRef:n}=e,s=(0,v.Z)(),[a,l]=(0,g.useState)(""),[i,r]=(0,g.useState)(),o=(0,g.useRef)(t.prompt),c=(0,g.useRef)(i),u=le(),{handleRateLimitError:j}=aU(),{isPending:y,mutateAsync:b}=(0,aA.HK)(),w=(0,g.useCallback)(async()=>{if(i)try{let e=await b({style_prompt:t.prompt,example_key:i.key,example_text:i.textKey?(0,m.Gc)({id:i.textKey,intl:s}):i.text});l(e)}catch(e){j(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[j,b,i,t.prompt,s]);(0,g.useEffect)(()=>{var e;(o.current!==t.prompt||(null===(e=c.current)||void 0===e?void 0:e.key)!==(null==i?void 0:i.key))&&(o.current=t.prompt,c.current=i,w())},[w,i,t.prompt]);let{value:k}=(0,x.FL)("use_in_house_latex_transformer");return(0,d.jsx)(f.E.div,{className:(0,p.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",i?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:i?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,d.jsx)(I.Z,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,d.jsx)(tX.Lt,{align:"center",trigger:(0,d.jsx)(M.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,d.jsx)(a4.p,{className:"translate-y-px"}),children:i?i.nameKey?(0,d.jsx)(m.d7,{id:i.nameKey}):i.name:(0,d.jsx)(I.Z,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:u.map(e=>(0,d.jsx)(tX.hP,{disabled:y,onClick:()=>r(e),children:e.nameKey?(0,d.jsx)(m.d7,{id:e.nameKey}):e.name},e.key))})]}),(0,d.jsxs)(sR.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,d.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:i.textKey?(0,d.jsx)(m.d7,{id:i.textKey}):i.text}),(0,d.jsx)(h.M,{children:y?(0,d.jsx)("div",{className:"pt-2",children:(0,d.jsx)(a$.p,{state:"writing"})}):(0,d.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,d.jsx)(eT.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:a,useInHouseLatexPlugin:k})})})]})]}):(0,d.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,d.jsxs)("div",{className:"w-full",children:[(0,d.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,d.jsx)(I.Z,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,d.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:u.map(e=>(0,d.jsx)("button",{onClick:()=>r(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,d.jsx)(m.d7,{id:e.nameKey}):e.name},e.key))})]})})})},lr=e=>{let{style:t,returnToListScreen:n,onRename:s,setStateToManualEdit:a}=e,l=sm(t),i="default"===t.type,{isPending:r,mutateAsync:o}=(0,aA.KM)(l),{addHiddenPresetStyle:c}=a6(),{clearStoredStyle:u,storedStyle:m}=(0,nB.O)(),{addError:x}=(0,G.e)(),p=(0,v.Z)(),h=async()=>{if(i)c(t),setTimeout(()=>{n()},500);else try{await o(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),n()}catch(e){x(p.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,d.jsxs)(tX.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,d.jsxs)(M.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,d.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,d.jsx)(I.Z,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,d.jsx)(a4.p,{})]}),(0,d.jsx)("span",{className:"sm:hidden",children:(0,d.jsx)(a1.F,{weight:"bold",size:20})})]}),children:[!i&&(0,d.jsx)(tX.hP,{disabled:r,onClick:()=>{s()},children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(a2.z,{className:"mr-2"}),(0,d.jsx)(I.Z,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===l?(0,d.jsx)(tX.AZ,{className:"text-sm",children:(0,d.jsx)(I.Z,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,d.jsx)(tX.hP,{className:"pr-0 !text-danger-000",disabled:r,onClick:h,children:i?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(a5.M,{}),(0,d.jsx)(I.Z,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(a3.r,{}),(0,d.jsx)(I.Z,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tX.u2,{}),(0,d.jsx)(tX.hP,{onClick:a,children:(0,d.jsx)(I.Z,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},lo=e=>{let{size:t=16,className:n}=e;return(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,d.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,d.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var lc=n(32411),ld=n(92655),lu=n(13344),lm=n(16804);let lx=(0,g.forwardRef)((e,t)=>{let{setScreen:n,styles:s,onStyleChange:a}=e,{hiddenPresetStyles:l,resetHiddenPresetStyles:r}=a6(),{sortStyles:o,setOrder:c}=function(){let[e,t]=(0,eO.R)("userStylesOrder",[]);return{sortStyles:(0,g.useCallback)(t=>[...t].sort((t,n)=>{let s=sm(t),a=sm(n);if("Default"===s)return -1;if("Default"===a)return 1;let l=e.indexOf(s),i=e.indexOf(a);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,g.useCallback)(e=>{t(e.map(e=>sm(e)))},[t])}}(),[u,m]=(0,g.useState)([]),x=(0,g.useCallback)(e=>{let t=[...l,"Default"];return o(e.filter(e=>!t.includes(sm(e))))},[l,o]);(0,g.useEffect)(()=>{m(x(s))},[s,x]);let p=(0,g.useCallback)(e=>{Array.isArray(e)&&(m(e),c(e))},[c]),h=(0,g.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,d.jsxs)(f.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,d.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,d.jsx)(lu.t.Group,{as:"ul",axis:"y",values:u,onReorder:p,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:u.map(e=>(0,d.jsx)(lp,{style:e,onClick:()=>a(e,!1)},sm(e)))}),!h&&(0,d.jsxs)(f.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,d.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,d.jsx)(I.Z,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,d.jsx)("p",{children:(0,d.jsx)(I.Z,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,d.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,d.jsx)(M.z,{onClick:()=>n(i.CREATE),prepend:(0,d.jsx)(lo,{}),children:(0,d.jsx)(I.Z,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),l.length>0&&(0,d.jsx)(M.z,{variant:"underline",onClick:r,children:(0,d.jsx)(I.Z,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});lx.displayName="ListStyles";let lp=e=>{let{style:t,onClick:n}=e,s="default"===t.type,a=(0,lm.o)(),[l,i]=(0,g.useState)(!1);return(0,d.jsxs)(lu.t.Item,{value:t,dragListener:!1,dragControls:a,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>i(!0),onDragEnd:()=>i(!1),className:"relative my-2 min-w-0",children:[(0,d.jsxs)("button",{className:(0,p.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",l?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,d.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,d.jsx)(m.d7,{id:t.nameKey}):t.name}),s&&(0,d.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,d.jsx)(I.Z,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,d.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,d.jsx)(lc.o,{}):(0,d.jsx)(a2.z,{})})]}),(0,d.jsx)("div",{onPointerDown:e=>a.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,d.jsx)(ld.f,{size:16,weight:"bold"})})]})},lh=e=>{let{openWithScreen:t,onClose:n,styles:s,setChatStyle:a}=e,l=(0,v.Z)(),r=!!t,o=(0,eo.z$)(),[c,u]=(0,g.useState)(t||i.LIST),[x,p]=(0,g.useState)(),[f,j]=(0,g.useState)(!1),[y,b]=(0,g.useState)(!1),w=(0,g.useRef)(!1);(0,g.useEffect)(()=>{t&&u(t)},[t]);let k=()=>{w.current=!1,u(i.LIST),j(!1),b(!1)},N=()=>{(!f||window.confirm(l.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(o.track({event_key:"styles.modal",open:!1}),k(),n())},C=(e,t)=>{w.current=t,p(e),u(i.EDIT),j(!1),b(!1)};return(0,d.jsx)(B.u_,{modalSize:"xl",title:(e=>{switch(e){case i.CREATE:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:(0,d.jsx)(I.Z,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case i.CREATE_MANUALLY:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:(0,d.jsx)(I.Z,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case i.LIST:return(0,d.jsx)("div",{className:"font-copernicus font-normal",children:(0,d.jsx)(I.Z,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case i.EDIT:return(0,d.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:y?(0,d.jsx)(lf,{style:x,onClose:e=>{e&&p(e),b(!1)}}):(0,d.jsx)("button",{title:x.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!f&&b(!0),children:f?(0,d.jsx)(I.Z,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:x.name}}):"default"===x.type&&x.nameKey?(0,d.jsx)(m.d7,{id:x.nameKey}):x.name})})}})(c),icon:(e=>{switch(e){case i.CREATE:case i.EDIT:return(0,d.jsx)(M.z,{variant:"ghost",size:"icon_sm",disabled:f,onClick:()=>k(),children:(0,d.jsx)(ad.X,{})});case i.CREATE_MANUALLY:return(0,d.jsx)(M.z,{variant:"ghost",size:"icon_sm",onClick:()=>u(i.CREATE),children:(0,d.jsx)(ad.X,{})});case i.LIST:return null}})(c),isOpen:r,onClose:N,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,d.jsx)(d.Fragment,{children:c===i.LIST&&(0,d.jsx)(t$.u,{tooltipContent:l.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,d.jsx)("div",{className:"mr-1",children:(0,d.jsx)(M.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,d.jsx)(az.H,{size:18})})})})}),hasCloseButton:!0,children:(0,d.jsxs)(h.M,{mode:"popLayout",children:[c===i.CREATE&&(0,d.jsx)(aK,{onStyleChange:C,setScreen:u,animateBoolRef:w},"CreateStyleScreen"),c===i.CREATE_MANUALLY&&(0,d.jsx)(aX,{onStyleChange:C,setScreen:u},"CreateStyleManuallyScreen"),c===i.LIST&&(0,d.jsx)(lx,{setScreen:u,styles:s,onStyleChange:C},"ListStylesScreen"),c===i.EDIT&&x&&(0,d.jsx)(ln,{animateBoolRef:w,style:x,returnToListScreen:k,setIsEditingName:b,setCurrentStyle:p,setIsEditing:j,setChatStyle:e=>{a(e),N()}},"EditStyleScreen")]})})},lf=e=>{let{style:t,onClose:n}=e,s=sm(t),a="default"===t.type,l=(0,v.Z)(),[i,r]=(0,g.useState)("default"===t.type&&t.nameKey?(0,m.Gc)({id:t.nameKey,intl:l}):t.name),{isPending:o,mutateAsync:c}=(0,aA.fq)(s,a),u=async()=>{n(await c({name:i}))};return(0,d.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await u()},children:(0,d.jsx)(X.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:i,maxLength:64,onChange:e=>r(e.target.value),error:0===i.length,append:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:o,children:(0,d.jsx)(eR.X,{})}),(0,d.jsx)(M.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:o,children:(0,d.jsx)(t0.J,{weight:"bold"})})]})})})};var lg=n(31275),lv=n(14593);let lj=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:n,setIsUploadingGithubSync:s,syncSourceUuids:a,attachments:l,setAttachments:i}=(0,L.r)(),{styleModalOpenWithScreen:r,setStyleModalOpenWithScreen:o,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:x,gmailAuthModalIsOpen:p,setGmailAuthModalIsOpen:h,createPromptArgumentModalIsOpen:f,setCreatePromptArgumentModalIsOpen:v}=sD(),{personalizedStyleOptions:j}=(0,nB.O)(),b=sv(),w=(0,g.useCallback)(e=>{n(t=>[...t,e.uuid]),s(!1)},[n,s]),k=(0,y.aP)(a),N=(0,tH.F9)(k);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(lh,{openWithScreen:r,onClose:()=>o(null),styles:j,setChatStyle:e=>b(e.key)}),(0,d.jsx)(lv.m,{isOpen:!!p,onClose:()=>h(!1),callerIdentifier:"inputMenu"}),(0,d.jsx)(aZ,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:N,attachments:l,setSyncSourceUuids:n,setAttachments:i}),(0,d.jsx)(lg.U,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>x(!1),onCreated:w,setIsUploadingGithubSync:s}),f&&(0,d.jsx)(sG,{isOpen:f.isOpen,onClose:()=>v(null),client:f.client,prompt:f.prompt})]})};function ly(){let e=(0,c._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return ly=function(){return e},e}function lb(){let e=(0,c._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return lb=function(){return e},e}function lw(){let e=(0,c._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return lw=function(){return e},e}let lk=(0,g.forwardRef)((e,t)=>{var n,s,a,l;let{disabled:i,placement:r,placeholder:o,onSubmit:c}=e,u=(0,v.Z)(),{prompt:w,tipTapEditorState:k,projectUuid:M,setPrompt:C,setTipTapEditorState:S,setAttachments:E,setFiles:_,attachments:Z,files:z,syncSourceUuids:A,isUploadingDriveSync:T,isUploadingGithubSync:D,sendMessage:O,conversation:R,isChatSyncing:F,isProjectSyncing:P,setSyncSourceUuids:U,isSending:H,focusInput:K,isFocused:B,setIsFocused:V,promptInputRef:Y,willRedirectOnSubmit:W,hasBlockingWarning:q,isUploadingFile:J,setIsUploadingFile:Q,validateMaxUploadLimit:X,onPasteFiles:$,uploadInputProps:ee,hasAttachments:et,isNewConversation:en}=(0,L.r)();(0,g.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{C(e,{forceUpdateTiptap:!0}),E("function"==typeof t?t(Z):t),_("function"==typeof n?n(z):n)},sendMessage:O,setAttachments:e=>{E("function"==typeof e?e(Z):e)},getAttachments:()=>Z})),tK();let{showNewConversationPrompt:es,dismissConversationLengthPrompt:ea}=function(e,t){let[n]=(0,g.useState)(null!=e?e:0),s=(0,x.Zr)("prompt_new_conversation_count","blockInputCount",null,x.we),[a,l]=(0,eO.R)("disissed-prompt-length-warnings",{});return void 0===e||void 0===t||t in a?{showNewConversationPrompt:!1,dismissConversationLengthPrompt:tV()}:{showNewConversationPrompt:null!==s&&n>=s,dismissConversationLengthPrompt:()=>{l(e=>({...e,[t]:!0}))}}}(null==R?void 0:R.messagesSoFar,null==R?void 0:R.id),{fetchInputAutocompletion:el}=(0,b.Vl)(null==R?void 0:R.id),er=function(e,t,n,s,a,l){let i=function(e,t,n,s){let{addError:a}=(0,G.e)(),l=(0,g.useCallback)(e=>{n(!1),e&&a(e)},[a,n]),{activeOrganization:i}=(0,N.t)(),r=null==i?void 0:i.uuid,o=(0,tH.OJ)(),c=(0,g.useCallback)(async e=>{let t;if(!r)return l((0,d.jsx)(I.Z,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(r,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await o("/api/organizations/".concat(r,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,tG.Tb)(e),l((0,d.jsx)(I.Z,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return l("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?l():l((0,d.jsx)(I.Z,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:l((0,d.jsx)(I.Z,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[o,r,l]),{value:u}=(0,x.FL)("hatch_use_web_fetcher");return(0,g.useCallback)(async a=>{if(!u)return;let l=[],i=(0,tU.Yl)(a);if(0!==i.length&&s({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let s=i[t];if(e.some(e=>s.endsWith(e.file_name)))continue;n(!0);let a=await c(s);if(!a)return;l.push(a)}l.forEach(e=>(0,tO.Ch)(e)),l.length>0&&t(e=>[...e,...l]),n(!1)}},[u,s,c,n,t,e])}(e,t,n,s),[r,o]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{let e=e=>{"Shift"===e.key&&o(!0)},t=e=>{"Shift"===e.key&&o(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,g.useCallback)(e=>{var n,o,c;let d=null===(o=e.clipboardData)||void 0===o?void 0:null===(n=o.files)||void 0===n?void 0:n.length,u=null===(c=e.clipboardData)||void 0===c?void 0:c.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!d){let e=(0,tL.g)(u);e&&l(e)}if(d&&!m){s({newUploads:Array.from(e.clipboardData.files)})&&a(e.clipboardData.files),e.preventDefault();return}if(s({numNewPotentialAttachments:1,showError:!1})){if(i(u).catch(console.error),!m||u.length<4e3||r)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})}},[s,t,i,a,l,r])}(Z,E,Q,X,$,tP()),eo=null!==(n=null==R?void 0:R.projectKnowledgebaseTokens)&&void 0!==n?n:0,[ec]=eV({conversationUUID:null!==(s=null==R?void 0:R.id)&&void 0!==s?s:null,conversationTokensSoFar:null!==(a=null==R?void 0:R.tokensSoFar)&&void 0!==a?a:0,conversationFiles:null!==(l=null==R?void 0:R.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:eo,input:w,attachments:Z,syncSourceUuids:A}),ed=ei(M),{value:eu}=(0,x.FL)("test_gated_strings"),em=(0,j.O_)(),ex=i||0===w.length&&0===Z.length&&0===z.length&&0===A.length||J||T||D||F||P||q||"will-exceed"===ec||ed||(null==R?void 0:R.isSampling)===!0,ep=(0,g.useCallback)(async()=>{!ex&&(await O(),c&&c())},[ex,c,O]),eh=(0,g.useCallback)(()=>{V(!0)},[V]),ef=(0,g.useCallback)(()=>{V(!1)},[V]),eg=(0,g.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||K()},[K]),ev=(0,g.useRef)(null),ej=(0,y.aP)(A).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:A[t]}}),ey=(0,d.jsx)(h.M,{initial:!1,children:et&&(0,d.jsx)(f.E.div,{className:"overflow-hidden",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,d.jsx)(e2,{isUploadingFile:J,isUploadingSync:T||D,attachments:Z,files:z,syncSourceResults:ej,onRemoveAttachment:e=>{E(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{_(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{U(t=>t.filter(t=>t!==e))}})},"attachments")});if(!em)return(0,d.jsxs)(lC,{children:[(0,d.jsx)(lN,{className:"bottom"===r?"h-[99px]":"h-[123px]"}),"bottom"===r&&(0,d.jsx)(lM,{})]});let eb=null;return eb=es?(0,d.jsx)(tW,{onDismiss:ea,projectUuid:M}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,d.jsx)("div",{className:"relative",children:(0,d.jsx)(tD,{ref:Y,prompt:w,setPrompt:C,tipTapEditorState:k,setTipTapEditorState:S,onSubmit:ep,onFocus:eh,onBlur:ef,placement:r,placeholder:null!=o?o:en?eu?(0,m.lF)({id:"spread_attempt_mind",intl:u}):u.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):eu?(0,m.lF)({id:"window_edge_kiwi",intl:u}):u.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:el})}),(0,d.jsx)(ak,{placement:r,isDisabled:ex})]}),(0,d.jsx)(aC,{}),ey]}),(0,d.jsxs)(sT,{children:[(0,d.jsxs)(lC,{onPasteCapture:e=>{B&&er(e)},children:[(0,d.jsx)("input",{ref:ev,id:"chat-input-file-upload","data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...ee}),(0,d.jsx)("div",{className:"px-3 md:px-2",children:(0,d.jsx)(eJ,{placement:"bottom"})}),(0,d.jsx)(lN,{onClick:eg,className:(0,p.Z)(W&&H&&"animated-loading-background"),children:eb}),"bottom"===r&&(0,d.jsx)(lM,{})]}),(0,d.jsx)(lj,{})]})});lk.displayName="ChatInput";let lN=u.q.div(ly()),lM=u.q.div(lb()),lC=u.q.fieldset(lw())},95606:function(e,t,n){n.d(t,{e:function(){return r}});var s=n(27573),a=n(11607),l=n(10607),i=n(68425);let r=e=>{let{isShown:t,className:n}=e;return t?(0,s.jsx)(i.E.div,{className:(0,l.Z)("bg-bg-500/10 -mb-1 grid h-20 w-28 place-items-center rounded-lg flex-shrink-0",n),initial:{opacity:0,scale:.3},animate:{opacity:1,scale:1},children:(0,s.jsx)(a.Loading,{size:"sm"})}):null}},52165:function(e,t,n){n.d(t,{u:function(){return i}});var s=n(27573),a=n(11579),l=n(22235);let i=e=>{let{model:t,hasMultiModalContent:n,hideModelNameLogo:i}=e,r=t.name.replace("Claude",""),o=(0,l.g)(r,t.model,n);return(0,s.jsxs)("div",{className:"font-tiempos inline-flex items-center gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!i&&(0,s.jsx)(a.l,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,s.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,s.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:o})})]})}},90377:function(e,t,n){n.d(t,{A:function(){return l}});var s=n(41596);function a(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return a=function(){return e},e}let l=n(9788).q.div(a())},67311:function(e,t,n){n.d(t,{P:function(){return o}});var s=n(27573),a=n(30070),l=n(10607),i=n(7653),r=n(91217);let o=e=>{let{children:t,actionButton:n,title:o,minimalUi:c}=e,{hasBlockingWarning:d,setHasBlockingWarning:u}=(0,r.r)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[d,u]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,l.Z)("flex flex-row items-center gap-2 md:w-full",c?null:"text-danger-000"),children:[c?null:(0,s.jsx)(a.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},82056:function(e,t,n){n.d(t,{F:function(){return o}});var s=n(27573),a=n(8571),l=n(27218),i=n(70354);n(7653);var r=n(45790);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.w7)(),n=(0,l.z6)(),s=(0,l.D)(),i=(0,l.H1)();return(0,a.Z)()?(i||t)&&e?n||s||i?!t&&s?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,s.jsx)(c,{});case"subscribe":return(0,s.jsx)(d,{});case"subscribe-pro-only":return(0,s.jsx)(u,{});case"subscribe-max":return(0,s.jsx)(m,{});case"subscribe-max-20x":return(0,s.jsx)(x,{});case"none":return null}}function c(){let{websiteBaseUrl:e}=(0,a.m)();return(0,s.jsx)(i.z,{href:"".concat(e,"/contact-sales"),children:(0,s.jsx)(r.Z,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function d(){return(0,s.jsx)(i.z,{href:"/upgrade?hide_free=true",children:(0,s.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,s.jsx)(i.z,{href:"/upgrade/pro",children:(0,s.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,s.jsx)(i.z,{href:"/upgrade?hide_pro=true",children:(0,s.jsx)(r.Z,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function x(){return(0,s.jsx)(i.z,{href:"/upgrade",children:(0,s.jsx)(r.Z,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},7418:function(e,t,n){n.d(t,{j:function(){return w},k:function(){return v}});var s=n(27573),a=n(71817),l=n(49185),i=n(27218),r=n(48410),o=n(70354),c=n(6385),d=n(87033),u=n(80151),m=n(43290),x=n(7653),p=n(45790),h=n(90377),f=n(67311),g=n(82056);let v=e=>{let{messageLimit:t}=(0,i.t)(),{isTierSelectorEnabled:n}=(0,r.i)(),[l,o]=(0,x.useState)(!0),c=(null==t?void 0:t.type)==="within_limit",d=(0,a.wN)(e),u=c?null:null==t?void 0:t.conversationUUID,m=(0,a.wN)(null!=u?u:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&d!==m?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,s.jsx)(j,{messageLimit:t,showTierSelector:n})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:l?(0,s.jsx)(y,{messageLimit:t,onDismiss:()=>o(!1)}):void 0}:{}};function j(e){let{messageLimit:t,showTierSelector:n=!1}=e,a=(0,i.Cf)(),l=(0,i.ZJ)(),r=(0,i.ue)(),o=(0,i.H1)(),d=(0,g.F)(),u=m.ou.fromSeconds(t.resetsAt);return(0,s.jsxs)(f.P,{actionButton:d,minimalUi:!0,children:[n?(0,s.jsx)(p.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):r&&o?(0,s.jsx)(p.Z,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):l||a||r?(0,s.jsx)(p.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)})}}):(0,s.jsx)(p.Z,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:c.pz,children:e})}}),(0,s.jsx)(b,{messageLimit:t})]})}let y=e=>{let{messageLimit:t,onDismiss:n}=e,a=(0,g.F)(),l=m.ou.fromSeconds(t.resetsAt);return(0,s.jsxs)(h.A,{children:[(0,s.jsx)("span",{className:"font-medium",children:(0,s.jsx)(p.Z,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,s.jsx)("span",{className:"inline-block",children:l.toLocaleString(m.ou.TIME_SIMPLE)})}})}),(0,s.jsxs)("span",{children:[a,(0,s.jsx)(o.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:n,children:(0,s.jsx)(u.X,{size:12})})]})]})},b=e=>{let{messageLimit:t}=e,{mutate:n}=(0,l.I)(t.conversationUUID),{value:a}=(0,d.FL)("can_reset_rate_limits");return a?(0,s.jsx)(o.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:(0,s.jsx)(p.Z,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},w=e=>{var t;let{messageLimit:n,activeOrganization:s}=(0,i.t)(),r=(0,l.n)(),o=(0,a.wN)(e),c=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,d=(0,a.wN)(c);(0,x.useEffect)(()=>{(null==s?void 0:s.uuid)&&n&&"within_limit"!==n.type&&d!==o&&r({type:"within_limit"},s.uuid,e)},[e,d,s,n,o,r])}},22235:function(e,t,n){n.d(t,{g:function(){return o}});var s=n(27573),a=n(32737),l=n(87033),i=n(30070),r=n(45790);function o(e,t,n){let{value:o}=(0,l.FL)("claude_ai_cinnamon"),{value:c}=(0,l.FL)("claude_ai_chili");return o&&c&&void 0!==n&&"claude-3-5-haiku-20241022"===t&&n?(0,s.jsxs)(s.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,s.jsx)(a.u,{tooltipContent:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,s.jsx)(i.v,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},48894:function(e,t,n){n.d(t,{d:function(){return d},b:function(){return c}});var s=n(27573),a=n(18013),l=n(81695),i=n(7653),r=n(20355);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function c(){return(0,i.useContext)(o)}function d(e){let{children:t,conversationUUID:n}=e,c=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[n]=(0,a.R)("".concat(e,":chatControlsSidebarIsOpen"),t);return n}(n),{isExpanded:d,setIsExpanded:u}=(0,r.S)(),[m,x]=(0,i.useState)(c),p=(0,i.useRef)({reopenMain:!1}),h=(0,i.useCallback)(e=>{e&&(d&&(p.current.reopenMain=!0),u(!1)),!e&&p.current.reopenMain&&(p.current.reopenMain=!1,u(!0)),x(e)},[d,u,x]);return(0,s.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:h},children:t})}},1399:function(e,t,n){n.d(t,{NuxProvider:function(){return i},s:function(){return l}});var s=n(27573),a=n(7653);let l=(0,a.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,a.useState)({items:{},currentlyShowing:null}),o=(0,a.useCallback)((e,t)=>{i(n=>{if(n.items[e])return n;let s={...n.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),c=(0,a.useCallback)(e=>{i(t=>{let{[e]:n,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),d={items:n.items,currentlyShowing:n.currentlyShowing,registerNux:o,unregisterNux:c};return(0,s.jsx)(l.Provider,{value:d,children:t})}let r=(e,t)=>{let n=Object.entries(e).sort((e,t)=>{let n=e[1].priority||0,s=t[1].priority||0;return n!==s?s-n:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,a;return null!==(a=null===(s=n[0])||void 0===s?void 0:s[0])&&void 0!==a?a:null}for(let[e,t]of n)if(t.showAfterOthersDismiss)return e;return null}},63731:function(e,t,n){n.d(t,{Y7:function(){return v},hK:function(){return y},qg:function(){return j}});var s=n(27573),a=n(27218),l=n(5984),i=n(70354),r=n(10228),o=n(7533),c=n(72243),d=n(10607),u=n(7653),m=n(45790),x=n(40950),p=n(59016),h=n(32559),f=n(57393),g=n(53545);let v=(0,s.jsx)(m.Z,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),j=(0,s.jsx)(m.Z,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function y(e){var t,n,y,b,w,k;let{syncSources:N=[],onProjectCreated:M,onError:C,onCancel:S,strings:E}=e,_=(0,x.Z)(),Z=(0,a.Cf)(),I=(0,g.DU)(),{customInstructions:z,type:A,subtype:T}=null!=I?I:{},[D,O]=(0,u.useState)({name:"",description:null!==(t=E.createProjectDescriptionDefault)&&void 0!==t?t:"",type:A,subtype:T,is_private:!0}),[R,L]=(0,u.useState)({}),[F,P]=(0,u.useState)(!1),U=N.length>0,H=N.some(e=>e.type===r.Fg.GITHUB),G=N.some(e=>e.type===r.Fg.GDRIVE),K=H&&G?(0,s.jsx)(m.Z,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):H?(0,s.jsx)(m.Z,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):G?(0,s.jsx)(m.Z,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(m.Z,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:B}=(0,h.Qs)(),{activeOrganization:V}=(0,a.t)(),{data:Y}=(0,h.Kn)(),{account:W}=(0,a.t)(),{data:q,isLoading:J}=(0,h.O3)(),{data:Q}=(0,p.KJ)(),X=Q&&!U,$=null==q?void 0:q.filter(e=>{var t;return(null===(t=e.creator)||void 0===t?void 0:t.uuid)===(null==W?void 0:W.uuid)&&!e.is_starter_project}),ee=!J&&(null==$?void 0:$.length)===0,et=e=>t=>{O(n=>({...n,[e]:t.target.value})),L(t=>({...t,[e]:null}))},en=e=>{O(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},es=()=>{let e={};return""===D.name.trim()&&(e.name=_.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),L(e),0===Object.keys(e).length},ea=async e=>{if(e.preventDefault(),!F&&es()){P(!0);try{let e={...D};z&&(e.prompt_template=z.replaceAll("{{PROJECT_NAME}}",D.name));let t=await B(e);M(t)}catch(e){C(e)}finally{P(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>ea(e),children:[ee&&!I&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(m.Z,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),Z?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),Y&&(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(i.z,{variant:"underline",size:"unset",href:"/project/".concat(Y),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.oi,{autoFocus:!0,name:"name",className:"w-full",label:null!==(n=E.createProjectNameLabel)&&void 0!==n?n:_.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!==(y=E.createProjectNamePlaceholder)&&void 0!==y?y:_.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:et("name"),error:!!R.name,"data-1p-ignore":!0}),R.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:R.name})]}),!I&&(0,s.jsx)("div",{children:(0,s.jsx)(l.Kx,{name:"description",className:"w-full",label:null!==(b=E.createProjectDescriptionLabel)&&void 0!==b?b:_.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!==(w=E.createProjectDescriptionPlaceholder)&&void 0!==w?w:_.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:et("description"),error:R.description})}),Z?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(m.Z,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,d.Z)("mb-2 flex w-full gap-2",!X&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!D.is_private,onChange:en,disabled:!X}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(o.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(k=null==V?void 0:V.name)&&void 0!==k?k:(0,s.jsx)(m.Z,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:Q?U?K:v:(0,s.jsx)(m.Z,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:D.is_private,onChange:en}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(c.$,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(m.Z,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:j})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{onClick:S,href:S?void 0:"/projects",variant:"secondary",disabled:F,children:(0,s.jsx)(m.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(f.e,{children:(0,s.jsx)(i.z,{type:"submit",loading:F,children:(0,s.jsx)(m.Z,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},20355:function(e,t,n){n.d(t,{A:function(){return u},S:function(){return d}});var s=n(27573),a=n(44512),l=n(1133),i=n(6385),r=n(7653),o=n(77879);let c=(0,r.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1});function d(){return(0,r.useContext)(c)}function u(e){let{children:t}=e,[n,d]=(0,a.nh)(i.cn.SIDEBAR_PINNED,!1),[u,m]=(0,a.nh)(i.cn.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:x=0}=(0,o.iP)(),p=0===x?!u:x<1024,[h,f]=r.useState(u&&n);(0,o.OR)("keydown",e=>{var t;let n=(0,l.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),f(e=>!e))});let g=(0,r.useMemo)(()=>({isExpanded:h,setIsExpanded:e=>{f(e),p||d(e)},closeSidebarOnMobile:()=>{p&&h&&f(!1)},isMobile:p}),[h,f,p,d]);return(0,r.useEffect)(()=>{p?(m(!1),f(!1)):(m(!0),f(n))},[p,m,f,n]),(0,s.jsx)(c.Provider,{value:g,children:t})}},74750:function(e,t,n){n.d(t,{k:function(){return a}});var s=n(65654);async function a(e,t,n,a){return e?Object.fromEntries((await Promise.all(Object.entries(e).map(async e=>{let[l,i]=e;try{let e=await i.request(t,n,{timeout:5e3,...a});return[l,e]}catch(e){if(e instanceof s.yp&&e.code===s.jK.MethodNotFound)return null;return console.error("Request ".concat(t.method," to ").concat(l," failed: ").concat(e)),null}}))).filter(e=>null!==e)):{}}},38622:function(e,t,n){n.d(t,{Tz:function(){return d},Vr:function(){return m},ff:function(){return u}});var s=n(5161),a=n(3053),l=n(27895),i=n(65654),r=n(7653),o=n(91217),c=n(74750);function d(e){let{track:t}=(0,a.z$)(),[n,s]=(0,r.useState)({}),[l,o]=(0,r.useState)({});return(0,r.useEffect)(()=>{let n=!1;async function a(){if(!e)return;let a=await (0,c.k)(e,{method:"resources/list",params:{}},i.Ol,{timeout:6e5}),l=await (0,c.k)(e,{method:"prompts/list",params:{}},i.ev,{timeout:6e5});if(n)return;let r={},d={};Object.entries(a).forEach(e=>{var n,s,a;let[l,i]=e;t({event_key:"mcp.resources.listed",resource_count_on_server:null!==(s=null===(n=i.resources)||void 0===n?void 0:n.length)&&void 0!==s?s:0}),r[l]=(null!==(a=i.resources)&&void 0!==a?a:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(l).forEach(e=>{var n,s,a;let[l,i]=e;t({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(s=null===(n=i.prompts)||void 0===n?void 0:n.length)&&void 0!==s?s:0}),d[l]=(null!==(a=i.prompts)&&void 0!==a?a:[]).sort((e,t)=>e.name.localeCompare(t.name))}),s(r),o(d)}a();let l=setInterval(()=>void a(),6e5);return()=>{n=!0,clearInterval(l)}},[e,t]),{resources:n,prompts:l}}function u(){let{addError:e}=(0,l.e)(),{track:t}=(0,a.z$)(),{handleUpload:n}=(0,o.r)();return(0,r.useCallback)(async(s,a)=>{try{let e=(await s.request({method:"resources/read",params:{uri:a.uri}},i.vg,{timeout:15e3})).contents.map(e=>{let n;return"text"in e?(n=String(e.text),t({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(n=x(e.blob),t({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([n],a.name,{type:e.mimeType})});e.length>0&&await n(e)}catch(t){e("Error uploading resource: ".concat(t))}},[t,e,n])}function m(e){let{track:t}=(0,a.z$)(),{addError:n}=(0,l.e)(),{handleUpload:c}=(0,o.r)();return(0,r.useCallback)(async(a,l,r)=>{if(a&&l)try{let n=await a.request({method:"prompts/get",params:{name:l.name,arguments:r}},i.Go,{timeout:15e3});t({event_key:"mcp.prompts.used",argument_count:Object.keys(r).length,assistant_messages:n.messages.filter(e=>"assistant"===e.role).length,user_messages:n.messages.filter(e=>"user"===e.role).length,text_messages:n.messages.filter(e=>"text"===e.content.type).length,image_messages:n.messages.filter(e=>"image"===e.content.type).length});let o=(e,t)=>{let n=e=>{let t=s.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(l.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([x(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var i;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(i=t.mimeType)&&void 0!==i?i:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let s=n(t.mimeType);return new File([x(t.blob)],"".concat(t.uri,".").concat(s),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===n.messages.length)await c([o(n.messages[0],0)]);else if(n.messages.length>1){let e=n.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[o(e,t)]:[]),t=n.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(t.length>0){let n=JSON.stringify(t,null,2);e.push(new File([n],"".concat(l.name,"_messages.json"),{type:"application/json"}))}await c(e)}null==e||e()}catch(e){n("Error getting prompt: ".concat(e))}},[t,n,c,e])}function x(e){let t=window.atob(e),n=new ArrayBuffer(t.length),s=new Uint8Array(n);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return n}},98279:function(e,t,n){n.d(t,{Q:function(){return E},N:function(){return I}});var s=n(27573),a=n(16282),l=n(32006),i=n(32737),r=n(10228),o=n(10607);function c(e){let{size:t,content:n,fileExtension:l,extensionAccessory:r,tooltipContent:c,isError:d,isInteractive:u,externalDocument:m,hFullContent:x,onRemove:p,onContentClick:h,href:f}=e;return(0,s.jsx)(i.u,{tooltipContent:c,side:"bottom",children:(0,s.jsxs)(a.tK,{size:t,onRemoveFile:p,isInteractive:u,className:"!p-0",children:[p&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,s.jsx)(a.TF,{onRemoveFile:p})}),(0,s.jsxs)(a.ek,{size:t,onClick:h,isInteractive:u,href:f,children:[(0,s.jsx)(a.K3,{isError:d,size:t,isInteractive:u}),(0,s.jsx)("div",{className:(0,o.Z)(d?"text-always-black":"text-accent-secondary-200","pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight","md"===t&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","mdlg"===t&&"line-clamp-3 px-2.5 text-[0.85rem] font-semibold -mb-2 leading-[1.15rem] tracking-tighter","lg"===t&&"line-clamp-4 px-3 text-sm font-semibold",x&&"h-full","lg"===t&&!x&&"pt-6"),children:n}),(0,s.jsx)(a.PJ,{fileExtension:l,size:t,externalDocument:m,extensionAccessory:r})]})]})})}function d(e){let{type:t}=e,n={[r.Fg.GDRIVE]:{variant:l.cT.DOCS,label:"DOC"},[r.Fg.OUTLINE]:{variant:void 0,label:"DOC"},[r.Fg.GITHUB]:{variant:void 0,label:"CODE"},[r.Fg.SALESFORCE]:{variant:void 0,label:"DOC"},[r.Fg.GMAIL]:{variant:void 0,label:"EMAIL"},[r.Fg.GCAL]:{variant:void 0,label:"EVENT"},[r.Fg.SLACK]:{variant:void 0,label:"MSG"},[r.Fg.ASANA]:{variant:void 0,label:"DOC"}};return(0,s.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,s.jsx)(l.j0,{className:"!text-always-black",type:t,size:12,variant:n[t].variant}),(0,s.jsx)("span",{className:"pt-px",children:n[t].label})]})}var u=n(96070),m=n(11607),x=n(13890),p=n(16963),h=n(30070),f=n(85830),g=n(39343),v=n(7653),j=n(45790),y=n(66605),b=n(85465),w=n(95606),k=n(91217),N=n(84344),M=n(71101),C=n(31275),S=n(90824);function E(e){let{uuid:t,syncSource:n,size:a,onRemove:l,isInteractive:i=!0,isEditable:o}=e,{mutateAsync:f}=(0,y.us)(),g=(0,b.lP)(),E=(0,u.b)(),[I,z]=(0,v.useState)(!1),A=(0,x.ir)(null==n?void 0:n.status.state),T=(0,v.useCallback)(()=>{if(n){if(n.type&&n.status.state===r.co.UNAUTHENTICATED)g(n.type);else if(n.type===r.Fg.GITHUB)z(!0);else if(n.type===r.Fg.GDRIVE){let e=n.config;window.open((0,N.m)(e.uri),"_blank")}else throw Error("Unknown sync source type")}},[n,g]),D=(0,v.useCallback)(()=>{f(t),null==l||l()},[f,t,l]),{projectUuid:O}=(0,k.r)(),R=!!n&&[r.co.CREATED,r.co.PENDING,r.co.UPDATING].includes(n.status.state);return E?(0,s.jsx)(S.n4,{location:"chat",projectUuid:O,syncSource:n,handleRemove:o?D:void 0,isEditable:o}):n?R&&n.type?(0,s.jsx)(c,{size:a,content:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(m.Loading,{size:"sm"})}),onRemove:l?D:void 0,isInteractive:i,tooltipContent:void 0,fileExtension:(0,s.jsx)(d,{type:n.type}),extensionAccessory:null,isError:!1,externalDocument:!1,hFullContent:!1}):(0,s.jsxs)(s.Fragment,{children:[n.type===r.Fg.GITHUB&&(0,s.jsx)(C.U,{location:"chat",projectUuid:O,isOpen:I,onClose:()=>z(!1),syncSource:n}),(0,s.jsx)(c,{size:a,content:A?(0,s.jsx)(j.Z,{defaultMessage:"Content not accessible",id:"IPK01iLM7n"}):n.type===r.Fg.GITHUB?(0,s.jsx)(_,{config:n.config}):n.type===r.Fg.GDRIVE?(0,s.jsx)(M.C,{uri:n.config.uri}):null,hFullContent:n.type===r.Fg.GITHUB&&!A,onContentClick:T,onRemove:l?D:void 0,externalDocument:n.type===r.Fg.GDRIVE&&!A,isInteractive:i,isError:A,tooltipContent:A?(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[Z(n),"\xa0",i&&(0,s.jsx)(p.G,{})]}):void 0,extensionAccessory:A&&(0,s.jsxs)("div",{className:"inline-flex ml-1",children:[(0,s.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,s.jsx)(h.v,{className:"text-danger-000 ml-1.5 mr-0.5",weight:"bold",size:12})]}),fileExtension:(0,s.jsx)(d,{type:n.type})})]}):(0,s.jsx)("div",{className:"p-0.5",children:(0,s.jsx)(w.e,{isShown:!0})})}function _(e){let{config:t}=e;return(0,s.jsx)("div",{className:"h-full pt-4 flex flex-col gap-0.5 fade-out-bottom fade-out-right leading-tight pointer-events-none relative overflow-hidden break-words text-left tracking-tighter opacity-70 font-mono text-[0.5rem]",children:Object.entries(t.filters.filters).map(e=>{let[n,a]=e;return(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center text-nowrap",children:[(0,s.jsx)("span",{children:"include"===a?(0,s.jsx)(f.f,{size:12,weight:"fill"}):(0,s.jsx)(g.S,{size:12})}),"/"===n?t.repo:n.replace(/^\/|\/$/,"")]},n)})})}let Z=e=>{switch(e.status.state){case r.co.DISABLED:return x.p5;case r.co.UNAUTHENTICATED:return(0,s.jsx)(j.Z,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"});case r.co.ACCESS_DENIED:return(0,s.jsx)(j.Z,{defaultMessage:"Request access via {source}",id:"OJ2RQ+ZgAF",values:{source:x.X_[e.type]}})}},I=e=>(null==e?void 0:e.status.state)!==r.co.DISABLED&&((null==e?void 0:e.status.state)===r.co.UNAUTHENTICATED||(null==e?void 0:e.status.state)!==r.co.ACCESS_DENIED||(null==e?void 0:e.type)==="gdrive")},33209:function(e,t,n){n.d(t,{MD:function(){return p},S3:function(){return u},x2:function(){return x}});var s=n(13262),a=n(7653),l=n(5362),i=n(8571),r=n(27218),o=n(68571);let c=async e=>{if(o.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await n.e(3338).then(n.bind(n,93338));return t(e)},d=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],u=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.t)(),{data:n,mutate:i,isIdle:o}=(0,l.uC)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[s.CN,null==t?void 0:t.uuid]});return(0,a.useEffect)(()=>{o&&e&&i()},[i,o,e]),n},m=null,x=()=>{let{stripePublishableKey:e}=(0,i.m)();return m||(m=c(e)),m},p=e=>{if(d.includes(e))return e;let t=e.split("-")[0];return d.includes(t)?t:"en"}},11579:function(e,t,n){n.d(t,{l:function(){return a}});var s=n(27573);let a=e=>{let{height:t,className:n}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:n,height:t,fill:"currentColor","aria-label":"Claude",children:(0,s.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},72538:function(e,t,n){n.d(t,{p:function(){return o}});var s=n(27573),a=n(32737),l=n(10607),i=n(23607),r=n(7653);function o(e){let{state:t="static",className:o="w-8 text-accent-brand inline-block",isInteractive:d=!0}=e,u=(0,r.useRef)(null),m=(0,r.useRef)(t),x=(0,i.J)(),[p,h]=(0,r.useState)(),[f,g]=(0,r.useState)(t),[v,j]=(0,r.useReducer)(e=>e+1,0);(0,r.useEffect)(()=>{n.e(8199).then(n.bind(n,88199)).then(e=>{h(e.animations)})},[]),(0,r.useEffect)(()=>g(t),[t]),(0,r.useEffect)(()=>{let e;let t=u.current&&"function"==typeof u.current.animate;if(!x&&"static"!==f&&t&&p){let{frameCount:t,speed:n}=p[f],s=Array.from({length:t},(e,n)=>({transform:"translateY(-".concat(100/t*n,"%)")}));e=u.current.animate(s,{duration:n*s.length,iterations:"tickle"===f?1:1/0,easing:"steps(".concat(s.length,", jump-none)")}),"tickle"===f&&(null==e||e.addEventListener("finish",()=>g(m.current)))}return"tickle"!==f&&(m.current=f),()=>{null==e||e.cancel()}},[p,f,x]);let y=()=>{d&&"writing"!==f&&"thinking"!==f&&"tickle"!==f&&(g("tickle"),j())},b="Hi, I’m Claude. How can I help you today?";v<32&&v>24?b="Ugh, well you can’t do that forever":v<=24&&v>18?b="Alright, alright, you have my attention!":v<=18&&v>12?b="Are you still doing that?":v<=12&&v>5&&(b="Yes, yes. What can I do for you?");let w=!d||"writing"===f||"thinking"===f;if("static"===f||x||!p)return(0,s.jsx)(a.u,{className:(0,l.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,l.Z)(o,"select-none"),onMouseDown:y,children:(0,s.jsx)(c,{className:"w-full fill-current"})})});let{svg:k,width:N,height:M}=p[f];return(0,s.jsx)(a.u,{className:(0,l.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,l.Z)(o,"overflow-hidden select-none"),style:{aspectRatio:N/M},onMouseDown:y,children:(0,s.jsx)("div",{ref:u,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:k}})})})}function c(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:(0,s.jsx)("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}},2723:function(e,t,n){n.d(t,{J:function(){return a}});var s=n(7653);let a=(e,t,n,a)=>(0,s.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(a)),")")}},[n,a,t,e])},28386:function(e,t,n){n.d(t,{J:function(){return s}});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1]}},29670:function(e,t,n){n.d(t,{HY:function(){return i},mz:function(){return a},xG:function(){return s}});let s=function(e,t){let{preferWholeNumber:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let s={minimumFractionDigits:2,maximumFractionDigits:2};n&&e/100%1==0&&(s.minimumFractionDigits=0,s.maximumFractionDigits=0);let a=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof a?a:a[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(s.currencyDisplay="code"),new Intl.NumberFormat(a||void 0,{style:"currency",currency:t,...s}).format(e/100)};function a(e){let{amount:t,currency:n,preferWholeNumber:a}=e;return s(t,n,{preferWholeNumber:a})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!==(t=l[e.toLowerCase()])&&void 0!==t?t:l.usd}},30131:function(e,t,n){n.d(t,{dI:function(){return c},lE:function(){return o}});var s=n(41270),a=n(87033),l=n(98649);let i=[],r=[];function o(){let e=c(),t=(0,a.Zr)("frontend_fallback_paprika_config","modes",r,d);return e.length>0?e:t}function c(){return(0,a.Zr)("paprika_config","modes",i,d)}let d=s.z.array(s.z.object({id:s.z.string(),title:s.z.string(),description:s.z.string(),description_key:s.z.string().optional(),paprika_mode_value:l.Xs.optional()}))}}]);